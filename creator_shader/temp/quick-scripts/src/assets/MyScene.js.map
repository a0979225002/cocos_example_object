{"version":3,"sources":["assets\\MyScene.js"],"names":["cc","Class","Component","properties","btnLeft","Button","btnRight","lblTitle","Label","nodeContainer","Node","_start","prefIdx","set","val","num","prefs","length","__width","changeIdx","get","type","Integer","visible","onLoad","node","on","EventType","TOUCH_START","event","setMouse","getLocation","TOUCH_MOVE","TOUCH_ENDED","removeAllChilds","console","log","loader","loadRes","err","res","instantiate","addChild","setAnchorPoint","string","childs","getChildren","forEach","child","removeChild","pos","mat","children","getComponent","Sprite","getMaterial","effect","setProperty","update","dt","_setShaderTime","_max","cmts","getComponentsInChildren"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        btnLeft: cc.Button,\r\n        btnRight: cc.Button,\r\n        lblTitle: cc.Label,\r\n        nodeContainer: cc.Node,\r\n        _start:0,\r\n        prefIdx: {\r\n            set: function(val)  {\r\n                var num = this.prefs.length;\r\n                if( val < 0 ){\r\n                    val = num -1;\r\n                }\r\n                if( val >= num ){\r\n                    val = 0;\r\n                }\r\n                this.__width = val;\r\n                this.changeIdx();\r\n\r\n            },\r\n            get: function(val)  {\r\n                return this.__width;\r\n            },\r\n            type: cc.Integer,\r\n            visible: false\r\n        }\r\n    },\r\n    \r\n    onLoad() {\r\n        this.prefs = [\r\n            'test-003/test-003_pref',\r\n            'UISmoke/UISmoke_pref',\r\n            '64239.0/64239.0_pref',\r\n            '64420.2/64420.2_pref',\r\n            '64645.0/64645.0_pref',\r\n            '69541.0/69541.0_pref',\r\n            'BookShader/BookShader_pref',\r\n            'BookShader_noise/BookShader_noise_pref',\r\n            'glslsandbox#68726/glslsandbox#68726',\r\n            'glslsandbox#68774/glslsandbox#68774',\r\n            'glslsandbox#69016/glslsandbox#69016',\r\n            'glslsandbox#69022/glslsandbox#69022',\r\n            'glslsandbox#69156/glslsandbox#69156',\r\n            'glslsandbox#69315/glslsandbox#69315',\r\n            'glslsandbox#69342/glslsandbox#69342',\r\n            'glslsandbox#69350/glslsandbox#69350',\r\n            'ImageEffect/ImageEffect_pref',\r\n            'jizuobiao/jizuobiao_pref',\r\n            'KnifeLight/KnifeLight_pref',\r\n            'Regional_gray/Regional_gray_pref',\r\n            'river/river_pref',\r\n            'ScrollBox/ScrollBox_pref',\r\n            'StreetLight/StreetLight',\r\n            'test-002/test-002_pref',\r\n        ];\r\n        this.prefIdx = 0;\r\n        this.btnLeft.node.on('click', () => {\r\n            --this.prefIdx;\r\n        });\r\n        this.btnRight.node.on('click', () => {\r\n            ++this.prefIdx;\r\n        });\r\n\r\n        this.nodeContainer.on(cc.Node.EventType.TOUCH_START, (event) => {\r\n            this.setMouse(event.getLocation());\r\n        });\r\n        this.nodeContainer.on(cc.Node.EventType.TOUCH_MOVE, (event) => {\r\n            this.setMouse(event.getLocation());\r\n        });\r\n        this.nodeContainer.on(cc.Node.EventType.TOUCH_ENDED, (event) => {\r\n            this.setMouse(event.getLocation());\r\n        });\r\n\r\n    },\r\n\r\n    changeIdx() {\r\n        this.removeAllChilds(this.nodeContainer);\r\n        console.log(\"load \" + this.prefs[this.prefIdx]);\r\n        cc.loader.loadRes(this.prefs[this.prefIdx], (err,res) => {\r\n            var node = cc.instantiate(res);\r\n            this.nodeContainer.addChild(node);\r\n            node.setAnchorPoint(0.5,0.5);\r\n            this.lblTitle.string = this.prefs[this.prefIdx];\r\n            // node.setPosition();\r\n        });\r\n    },\r\n\r\n    removeAllChilds(node) {\r\n        var childs = node.getChildren();\r\n        childs.forEach(child => {\r\n            node.removeChild(child);\r\n        })\r\n    },\r\n\r\n    setMouse (pos) {\r\n        let mat = this.nodeContainer.children[0].getComponent(cc.Sprite).getMaterial(0);\r\n        mat.effect.setProperty('u_mouse',pos);\r\n    },\r\n\r\n    update(dt) {\r\n        this._setShaderTime(dt);\r\n    },\r\n\r\n    _setShaderTime(dt) {\r\n        this._start += 0.01;\r\n        if (this._start > this._max) {\r\n            this._start = 0;\r\n        }\r\n        if(this.nodeContainer.children[0])\r\n        {\r\n            let cmts = this.nodeContainer.children[0].getComponentsInChildren(cc.Sprite);\r\n            cmts.forEach(cc => {\r\n                cc.getMaterial(0).effect.setProperty('u_time',this._start);\r\n            });\r\n        }\r\n    },\r\n\r\n});\r\n"]}