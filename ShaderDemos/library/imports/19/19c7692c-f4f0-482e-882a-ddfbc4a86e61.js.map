{"version":3,"sources":["assets\\Script\\CirclePortraitFrag.ts"],"names":[],"mappings":";;;;;;AAAA,cAAc;AACd,eAAe;AACf,0CAA0C;AAC1C;IAAA;IA8EA,CAAC;IA7EU,sBAAW,GAAG,2TAYpB,CAAC;IACK,sBAAW,GAAG,6rDA+DpB,CAAC;IACN,iBAAC;CA9ED,AA8EC,IAAA;kBA9EoB,UAAU","file":"","sourceRoot":"/","sourcesContent":["// Feofox Game\r\n// Author:Lerry\r\n// https://github.com/fylz1125/ShaderDemos\r\nexport default class CircleFrag {\r\n    static circle_vert = `\r\n    attribute vec4 a_position;\r\n    attribute vec2 a_texCoord;\r\n    attribute vec4 a_color;\r\n    varying vec2 v_texCoord;\r\n    varying vec4 v_fragmentColor;\r\n    void main()\r\n    {\r\n        gl_Position = CC_PMatrix * a_position;\r\n        v_fragmentColor = a_color;\r\n        v_texCoord = a_texCoord;\r\n    }\r\n    `;\r\n    static circle_frag = `\r\n    #ifdef GL_ES\r\n    precision mediump float;\r\n    #endif\r\n\r\n    varying vec4 v_fragmentColor;\r\n    varying vec2 v_texCoord;\r\n\r\n    uniform float u_edge;\r\n    uniform float u_offset; \r\n\r\n    void main()\r\n    {\r\n        float edge = u_edge;\r\n        float dis = 0.0;\r\n        vec2 texCoord = v_texCoord;\r\n        if ( texCoord.x < edge )\r\n        {\r\n            if ( texCoord.y < edge )\r\n            {\r\n                dis = distance( texCoord, vec2(edge, edge) );\r\n            }\r\n            if ( texCoord.y > (1.0 - edge) )\r\n            {\r\n                dis = distance( texCoord, vec2(edge, (1.0 - edge)) );\r\n            }\r\n        }\r\n        else if ( texCoord.x > (1.0 - edge) )\r\n        {\r\n            if ( texCoord.y < edge )\r\n            {\r\n                dis = distance( texCoord, vec2((1.0 - edge), edge ) );\r\n            }\r\n            if ( texCoord.y > (1.0 - edge) )\r\n            {\r\n                dis = distance( texCoord, vec2((1.0 - edge), (1.0 - edge) ) );\r\n            }\r\n        }\r\n  \r\n        if(dis > 0.001)\r\n        {\r\n            // 外圈沟\r\n            float gap = edge * 0.02;\r\n            if(dis <= edge - gap)\r\n            {\r\n                gl_FragColor = texture2D( CC_Texture0,texCoord);\r\n            }\r\n            else if(dis <= edge)\r\n            {\r\n                // 平滑过渡\r\n                float t = smoothstep(0.,gap,edge-dis);\r\n                vec4 color = texture2D( CC_Texture0,texCoord);\r\n                gl_FragColor = vec4(color.rgb,t);\r\n            }else{\r\n                gl_FragColor = vec4(0.,0.,0.,0.);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            gl_FragColor = texture2D( CC_Texture0,texCoord);\r\n        }\r\n    }\r\n\r\n    `;\r\n}"]}