{"version":3,"sources":["assets\\Script\\Effect_Rotate.js"],"names":["_default_vert","require","_default_vert_no_mvp","_black_white_frag","_normal_frag","EffectBlackWhite","cc","Class","Component","editor","CC_EDITOR","menu","help","executeInEditMode","properties","isAllChildrenUser","_createSgNode","_initSgNode","updateGLParameters","parameters","now","Date","startTime","time","mouse","x","y","z","w","resolution","date","getYear","getMonth","getDate","getTime","getMilliseconds","rotation","isMouseDown","node","getContentSize","width","height","onEnable","_use","onDisable","_unUse","onLoad","on","Node","EventType","MOUSE_DOWN","event","MOUSE_UP","MOUSE_LEAVE","TOUCH_START","TOUCH_END","TOUCH_CANCEL","MOUSE_MOVE","getLocationX","getLocationY","TOUCH_MOVE","_program","GLProgram","sys","isNative","log","initWithString","addAttribute","macro","ATTRIBUTE_NAME_POSITION","VERTEX_ATTRIB_POSITION","ATTRIBUTE_NAME_COLOR","VERTEX_ATTRIB_COLOR","ATTRIBUTE_NAME_TEX_COORD","VERTEX_ATTRIB_TEX_COORDS","link","updateUniforms","initWithVertexShaderByteArray","setUniformLocationWith4f","getUniformLocationForName","setUniformLocationWith3f","setUniformLocationWith1f","glProgram_state","GLProgramState","getOrCreateWithGLProgram","setUniformVec3","setUniformFloat","setUniformVec4","_resolution","_time","_mouse","_rotation","_date","setProgram","_sgNode","update","dt","use","program","setGLProgramState","setShaderProgram","children","i","length","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var _default_vert = require(\"../Shaders/ccShader_Rotate_Vert.js\");\r\nvar _default_vert_no_mvp = require(\"../Shaders/ccShader_Rotate_Vert_noMVP.js\");\r\n\r\n\r\nvar _black_white_frag = require(\"../Shaders/ccShader_Rotation_Avg_Black_White_Frag.js\");\r\nvar _normal_frag = require(\"../Shaders/ccShader_Normal_Frag.js\");\r\n\r\nvar EffectBlackWhite = cc.Class({\r\n    extends: cc.Component,\r\n    editor: CC_EDITOR && {\r\n        menu: 'i18n:MAIN_MENU.component.renderers/Effect/Rotate',\r\n        help: 'https://github.com/colin3dmax/CocosCreator/blob/master/Shader_docs/Effect_Rotate.md',\r\n        executeInEditMode: true,\r\n    },\r\n\r\n    properties: {\r\n        isAllChildrenUser:false,\r\n    },\r\n    \r\n    _createSgNode: function () {\r\n        // this._clippingStencil = new cc.DrawNode();\r\n        // this._clippingStencil.retain();\r\n        // return new cc.ClippingNode(this._clippingStencil);\r\n    },\r\n\r\n    _initSgNode: function () {},\r\n\r\n    updateGLParameters:function(){\r\n\r\n        if(!this.parameters){\r\n            var now = new Date();\r\n            this.parameters={\r\n                startTime:Date.now(),\r\n                time:0.0,\r\n                mouse:{\r\n                    x:0.0,\r\n                    y:0.0,\r\n                    z:0.0,\r\n                    w:0.0,\r\n                },\r\n                resolution:{\r\n                    x:0.0,\r\n                    y:0.0,\r\n                    z:1.0,\r\n                },\r\n                date:{\r\n                    x:now.getYear(),//year\r\n                    y:now.getMonth(),//month\r\n                    z:now.getDate(),//day\r\n                    w:now.getTime()+now.getMilliseconds()/1000,//time seconds\r\n                },\r\n                rotation:{\r\n                    x:1.0,\r\n                    y:1.0,\r\n                    z:1.0,\r\n                    w:1.0,\r\n                },\r\n                isMouseDown:false,\r\n\r\n            };\r\n\r\n        }\r\n        this.parameters.time = (Date.now() - this.parameters.startTime)/1000;\r\n        this.parameters.resolution.x = ( this.node.getContentSize().width );\r\n        this.parameters.resolution.y = ( this.node.getContentSize().height );\r\n        var now = new Date();\r\n\r\n        this.parameters.date={\r\n                x:now.getYear(),//year\r\n                y:now.getMonth(),//month\r\n                z:now.getDate(),//day\r\n                w:now.getTime()+now.getMilliseconds()/1000,//time seconds\r\n            };\r\n    },\r\n\r\n\r\n    onEnable: function () {\r\n        this._use();\r\n    },\r\n\r\n    onDisable: function () {\r\n        this._unUse();\r\n    },\r\n\r\n    onLoad: function () {\r\n        var now = new Date();\r\n        this.parameters={\r\n            startTime:Date.now(),\r\n            time:0.0,\r\n            mouse:{\r\n                x:0.0,\r\n                y:0.0,\r\n                z:0.0,\r\n                w:0.0,\r\n            },\r\n            resolution:{\r\n                x:0.0,\r\n                y:0.0,\r\n                z:1.0,\r\n            },\r\n            date:{\r\n                x:now.getYear(),//year\r\n                y:now.getMonth(),//month\r\n                z:now.getDate(),//day\r\n                w:now.getTime()+now.getMilliseconds()/1000,//time seconds\r\n            },\r\n            rotation:{\r\n                x:0,\r\n                y:0,\r\n                z:0,\r\n                w:0,\r\n            },\r\n            isMouseDown:false,\r\n\r\n        };\r\n\r\n\r\n        this.node.on(cc.Node.EventType.MOUSE_DOWN, function (event) {\r\n            this.parameters.isMouseDown=true;\r\n        }, this);\r\n\r\n\r\n        this.node.on(cc.Node.EventType.MOUSE_UP, function (event) {\r\n            this.parameters.isMouseDown=false;\r\n        }, this);\r\n\r\n        this.node.on(cc.Node.EventType.MOUSE_LEAVE, function (event) {\r\n            this.parameters.isMouseDown=false;\r\n        }, this);\r\n\r\n\r\n        this.node.on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            this.parameters.isMouseDown=true;\r\n        }, this);\r\n\r\n\r\n        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            this.parameters.isMouseDown=false;\r\n        }, this);\r\n\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            this.parameters.isMouseDown=false;\r\n        }, this);\r\n\r\n\r\n\r\n         this.node.on(cc.Node.EventType.MOUSE_MOVE, function (event) {\r\n            if(this.parameters.isMouseDown){\r\n                this.parameters.mouse.x = event.getLocationX();\r\n                this.parameters.mouse.y = event.getLocationY(); \r\n            }\r\n        }, this);\r\n\r\n\r\n        this.node.on( cc.Node.EventType.TOUCH_MOVE, function (event) {\r\n            if(this.parameters.isMouseDown){\r\n                this.parameters.mouse.x = event.getLocationX();\r\n                this.parameters.mouse.y = event.getLocationY(); \r\n            }\r\n        }, this);\r\n    },\r\n    _unUse: function()\r\n    {\r\n        this.updateGLParameters();\r\n        this._program = new cc.GLProgram();\r\n        if (cc.sys.isNative) {\r\n            cc.log(\"use native GLProgram\")\r\n            this._program.initWithString(_default_vert_no_mvp, _normal_frag);\r\n\r\n\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION, cc.macro.VERTEX_ATTRIB_POSITION);\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR, cc.macro.VERTEX_ATTRIB_COLOR);\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD, cc.macro.VERTEX_ATTRIB_TEX_COORDS);\r\n\r\n            this._program.link();\r\n            this._program.updateUniforms();\r\n            this.updateGLParameters();\r\n        }else{\r\n            this._program.initWithVertexShaderByteArray(_default_vert, _normal_frag);\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION, cc.macro.VERTEX_ATTRIB_POSITION);\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR, cc.macro.VERTEX_ATTRIB_COLOR);\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD, cc.macro.VERTEX_ATTRIB_TEX_COORDS);\r\n            this._program.link();\r\n            this._program.updateUniforms();\r\n\r\n            this.updateGLParameters();\r\n            \r\n            this._program.setUniformLocationWith4f(this._program.getUniformLocationForName('rotation'), this.parameters.rotation.x,this.parameters.rotation.y,this.parameters.rotation.z ,this.parameters.rotation.w );\r\n            this._program.setUniformLocationWith3f(this._program.getUniformLocationForName('iResolution'), this.parameters.resolution.x,this.parameters.resolution.y,this.parameters.resolution.z );\r\n            this._program.setUniformLocationWith1f( this._program.getUniformLocationForName('iGlobalTime'), this.parameters.time );\r\n            this._program.setUniformLocationWith4f( this._program.getUniformLocationForName('iMouse'), this.parameters.mouse.x,this.parameters.mouse.y , this.parameters.mouse.z,this.parameters.mouse.w);\r\n            this._program.setUniformLocationWith4f( this._program.getUniformLocationForName('iDate'), this.parameters.date.x,this.parameters.date.y,this.parameters.date.z,this.parameters.date.w );\r\n\r\n        }\r\n\r\n\r\n        if (cc.sys.isNative) {\r\n            var glProgram_state = cc.GLProgramState.getOrCreateWithGLProgram(this._program);\r\n            glProgram_state.setUniformVec3( \"iResolution\", this.parameters.resolution );\r\n            glProgram_state.setUniformFloat( \"iGlobalTime\" , this.parameters.time );\r\n            glProgram_state.setUniformVec4( \"iMouse\" , this.parameters.mouse );\r\n            glProgram_state.setUniformVec4(\"rotation\", this.parameters.rotation);\r\n        }else{\r\n\r\n\r\n            this._resolution = this._program.getUniformLocationForName( \"iResolution\" );\r\n            this._time = this._program.getUniformLocationForName( \"iGlobalTime\" );\r\n            this._mouse = this._program.getUniformLocationForName( \"iMouse\" );\r\n            this._rotation = this._program.getUniformLocationForName( \"rotation\" );\r\n\r\n            this._program.setUniformLocationWith4f(this._rotation, this.parameters.rotation.x,this.parameters.rotation.y,this.parameters.rotation.z ,this.parameters.rotation.w );\r\n            this._program.setUniformLocationWith3f( this._resolution, this.parameters.resolution.x,this.parameters.resolution.y,this.parameters.resolution.z );\r\n            this._program.setUniformLocationWith1f( this._time, this.parameters.time );\r\n            this._program.setUniformLocationWith4f( this._mouse, this.parameters.mouse.x,this.parameters.mouse.y ,this.parameters.mouse.z,this.parameters.mouse.w);\r\n            this._program.setUniformLocationWith4f( this._date, this.parameters.date.x,this.parameters.date.y,this.parameters.date.z,this.parameters.date.w );\r\n        }\r\n\r\n\r\n        this.setProgram( this.node._sgNode, this._program );\r\n        \r\n    },\r\n\r\n     update:function(dt){\r\n\r\n\r\n        if(this._program){\r\n            this.parameters.rotation.x+=dt*0.2;\r\n            this.parameters.rotation.z+=dt*0.4;\r\n            if(this.parameters.rotation.x>1){\r\n                this.parameters.rotation.x=0;\r\n            }\r\n            \r\n            \r\n            this.updateGLParameters();\r\n            this._program.use();\r\n\r\n            if(cc.sys.isNative){\r\n                var glProgram_state = cc.GLProgramState.getOrCreateWithGLProgram(this._program);\r\n                glProgram_state.setUniformVec3( \"iResolution\", this.parameters.resolution );\r\n                glProgram_state.setUniformFloat( \"iGlobalTime\", this.parameters.time );    \r\n                glProgram_state.setUniformVec4( \"iMouse\" , this.parameters.mouse );\r\n                glProgram_state.setUniformVec4( \"iDate\" , this.parameters.date );\r\n                glProgram_state.setUniformVec4(\"rotation\", this.parameters.rotation);\r\n            }else{\r\n                this._program.setUniformLocationWith4f(this._rotation, this.parameters.rotation.x,this.parameters.rotation.y,this.parameters.rotation.z ,this.parameters.rotation.w );\r\n                this._program.setUniformLocationWith3f( this._resolution, this.parameters.resolution.x,this.parameters.resolution.y,this.parameters.resolution.z );\r\n                this._program.setUniformLocationWith1f( this._time, this.parameters.time );\r\n                this._program.setUniformLocationWith4f( this._mouse, this.parameters.mouse.x,this.parameters.mouse.y,this.parameters.mouse.z,this.parameters.mouse.w );\r\n                this._program.setUniformLocationWith4f( this._date, this.parameters.date.x,this.parameters.date.y,this.parameters.date.z,this.parameters.date.w );\r\n            }\r\n        }\r\n    },\r\n\r\n    _use: function()\r\n    {\r\n        this.updateGLParameters();\r\n        this._program = new cc.GLProgram();\r\n        if (cc.sys.isNative) {\r\n            cc.log(\"use native GLProgram\")\r\n            this._program.initWithString(_default_vert_no_mvp, _black_white_frag);\r\n\r\n\r\n\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION, cc.macro.VERTEX_ATTRIB_POSITION);\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR, cc.macro.VERTEX_ATTRIB_COLOR);\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD, cc.macro.VERTEX_ATTRIB_TEX_COORDS);\r\n\r\n            this._program.link();\r\n            this._program.updateUniforms();\r\n\r\n        }else{\r\n            this._program.initWithVertexShaderByteArray(_default_vert, _black_white_frag);\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION, cc.macro.VERTEX_ATTRIB_POSITION);\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR, cc.macro.VERTEX_ATTRIB_COLOR);\r\n            this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD, cc.macro.VERTEX_ATTRIB_TEX_COORDS);\r\n            this._program.link();\r\n            this._program.updateUniforms();\r\n\r\n\r\n\r\n\r\n            this._program.setUniformLocationWith4f(this._program.getUniformLocationForName('rotation'), this.parameters.rotation.x,this.parameters.rotation.y,this.parameters.rotation.z ,this.parameters.rotation.w );\r\n            this._program.setUniformLocationWith3f(this._program.getUniformLocationForName('iResolution'), this.parameters.resolution.x,this.parameters.resolution.y,this.parameters.resolution.z );\r\n            this._program.setUniformLocationWith1f( this._program.getUniformLocationForName('iGlobalTime'), this.parameters.time );\r\n            this._program.setUniformLocationWith4f( this._program.getUniformLocationForName('iMouse'), this.parameters.mouse.x,this.parameters.mouse.y , this.parameters.mouse.z,this.parameters.mouse.w);\r\n            this._program.setUniformLocationWith4f( this._program.getUniformLocationForName('iDate'), this.parameters.date.x,this.parameters.date.y,this.parameters.date.z,this.parameters.date.w );\r\n\r\n        }\r\n\r\n\r\n        if (cc.sys.isNative) {\r\n            var glProgram_state = cc.GLProgramState.getOrCreateWithGLProgram(this._program);\r\n            glProgram_state.setUniformVec3( \"iResolution\", this.parameters.resolution );\r\n            glProgram_state.setUniformFloat( \"iGlobalTime\" , this.parameters.time );\r\n            glProgram_state.setUniformVec4( \"iMouse\" , this.parameters.mouse );\r\n            glProgram_state.setUniformVec4(\"rotation\", this.parameters.rotation);\r\n        }else{\r\n\r\n\r\n            this._resolution = this._program.getUniformLocationForName( \"iResolution\" );\r\n            this._time = this._program.getUniformLocationForName( \"iGlobalTime\" );\r\n            this._mouse = this._program.getUniformLocationForName( \"iMouse\" );\r\n            this._rotation = this._program.getUniformLocationForName( \"rotation\" );\r\n\r\n            this._program.setUniformLocationWith4f(this._rotation, this.parameters.rotation.x,this.parameters.rotation.y,this.parameters.rotation.z ,this.parameters.rotation.w );\r\n            this._program.setUniformLocationWith3f( this._resolution, this.parameters.resolution.x,this.parameters.resolution.y,this.parameters.resolution.z );\r\n            this._program.setUniformLocationWith1f( this._time, this.parameters.time );\r\n            this._program.setUniformLocationWith4f( this._mouse, this.parameters.mouse.x,this.parameters.mouse.y ,this.parameters.mouse.z,this.parameters.mouse.w);\r\n            this._program.setUniformLocationWith4f( this._date, this.parameters.date.x,this.parameters.date.y,this.parameters.date.z,this.parameters.date.w );\r\n        }\r\n        this.setProgram( this.node._sgNode, this._program );\r\n        \r\n    },\r\n    setProgram:function (node, program) {\r\n\r\n        if (cc.sys.isNative) {\r\n            var glProgram_state = cc.GLProgramState.getOrCreateWithGLProgram(program);\r\n            node.setGLProgramState(glProgram_state);\r\n        }else{\r\n            node.setShaderProgram(program);    \r\n        }\r\n        \r\n        var children = node.children;\r\n        if (!children)\r\n            return;\r\n    \r\n        for (var i = 0; i < children.length; i++)\r\n        {\r\n            this.setProgram(children[i], program);\r\n        }\r\n    },\r\n\r\n    \r\n});\r\n\r\ncc.EffectBlackWhite = module.exports = EffectBlackWhite;\r\n\r\n\r\n\r\n"]}