
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Effect_Rotate.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '78f872Z8+RCY7u9eM/6fUxj', 'Effect_Rotate');
// Script/Effect_Rotate.js

"use strict";

var _default_vert = require("../Shaders/ccShader_Rotate_Vert.js");

var _default_vert_no_mvp = require("../Shaders/ccShader_Rotate_Vert_noMVP.js");

var _black_white_frag = require("../Shaders/ccShader_Rotation_Avg_Black_White_Frag.js");

var _normal_frag = require("../Shaders/ccShader_Normal_Frag.js");

var EffectBlackWhite = cc.Class({
  "extends": cc.Component,
  editor: CC_EDITOR && {
    menu: 'i18n:MAIN_MENU.component.renderers/Effect/Rotate',
    help: 'https://github.com/colin3dmax/CocosCreator/blob/master/Shader_docs/Effect_Rotate.md',
    executeInEditMode: true
  },
  properties: {
    isAllChildrenUser: false
  },
  _createSgNode: function _createSgNode() {// this._clippingStencil = new cc.DrawNode();
    // this._clippingStencil.retain();
    // return new cc.ClippingNode(this._clippingStencil);
  },
  _initSgNode: function _initSgNode() {},
  updateGLParameters: function updateGLParameters() {
    if (!this.parameters) {
      var now = new Date();
      this.parameters = {
        startTime: Date.now(),
        time: 0.0,
        mouse: {
          x: 0.0,
          y: 0.0,
          z: 0.0,
          w: 0.0
        },
        resolution: {
          x: 0.0,
          y: 0.0,
          z: 1.0
        },
        date: {
          x: now.getYear(),
          //year
          y: now.getMonth(),
          //month
          z: now.getDate(),
          //day
          w: now.getTime() + now.getMilliseconds() / 1000 //time seconds

        },
        rotation: {
          x: 1.0,
          y: 1.0,
          z: 1.0,
          w: 1.0
        },
        isMouseDown: false
      };
    }

    this.parameters.time = (Date.now() - this.parameters.startTime) / 1000;
    this.parameters.resolution.x = this.node.getContentSize().width;
    this.parameters.resolution.y = this.node.getContentSize().height;
    var now = new Date();
    this.parameters.date = {
      x: now.getYear(),
      //year
      y: now.getMonth(),
      //month
      z: now.getDate(),
      //day
      w: now.getTime() + now.getMilliseconds() / 1000 //time seconds

    };
  },
  onEnable: function onEnable() {
    this._use();
  },
  onDisable: function onDisable() {
    this._unUse();
  },
  onLoad: function onLoad() {
    var now = new Date();
    this.parameters = {
      startTime: Date.now(),
      time: 0.0,
      mouse: {
        x: 0.0,
        y: 0.0,
        z: 0.0,
        w: 0.0
      },
      resolution: {
        x: 0.0,
        y: 0.0,
        z: 1.0
      },
      date: {
        x: now.getYear(),
        //year
        y: now.getMonth(),
        //month
        z: now.getDate(),
        //day
        w: now.getTime() + now.getMilliseconds() / 1000 //time seconds

      },
      rotation: {
        x: 0,
        y: 0,
        z: 0,
        w: 0
      },
      isMouseDown: false
    };
    this.node.on(cc.Node.EventType.MOUSE_DOWN, function (event) {
      this.parameters.isMouseDown = true;
    }, this);
    this.node.on(cc.Node.EventType.MOUSE_UP, function (event) {
      this.parameters.isMouseDown = false;
    }, this);
    this.node.on(cc.Node.EventType.MOUSE_LEAVE, function (event) {
      this.parameters.isMouseDown = false;
    }, this);
    this.node.on(cc.Node.EventType.TOUCH_START, function (event) {
      this.parameters.isMouseDown = true;
    }, this);
    this.node.on(cc.Node.EventType.TOUCH_END, function (event) {
      this.parameters.isMouseDown = false;
    }, this);
    this.node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {
      this.parameters.isMouseDown = false;
    }, this);
    this.node.on(cc.Node.EventType.MOUSE_MOVE, function (event) {
      if (this.parameters.isMouseDown) {
        this.parameters.mouse.x = event.getLocationX();
        this.parameters.mouse.y = event.getLocationY();
      }
    }, this);
    this.node.on(cc.Node.EventType.TOUCH_MOVE, function (event) {
      if (this.parameters.isMouseDown) {
        this.parameters.mouse.x = event.getLocationX();
        this.parameters.mouse.y = event.getLocationY();
      }
    }, this);
  },
  _unUse: function _unUse() {
    this.updateGLParameters();
    this._program = new cc.GLProgram();

    if (cc.sys.isNative) {
      cc.log("use native GLProgram");

      this._program.initWithString(_default_vert_no_mvp, _normal_frag);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION, cc.macro.VERTEX_ATTRIB_POSITION);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR, cc.macro.VERTEX_ATTRIB_COLOR);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD, cc.macro.VERTEX_ATTRIB_TEX_COORDS);

      this._program.link();

      this._program.updateUniforms();

      this.updateGLParameters();
    } else {
      this._program.initWithVertexShaderByteArray(_default_vert, _normal_frag);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION, cc.macro.VERTEX_ATTRIB_POSITION);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR, cc.macro.VERTEX_ATTRIB_COLOR);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD, cc.macro.VERTEX_ATTRIB_TEX_COORDS);

      this._program.link();

      this._program.updateUniforms();

      this.updateGLParameters();

      this._program.setUniformLocationWith4f(this._program.getUniformLocationForName('rotation'), this.parameters.rotation.x, this.parameters.rotation.y, this.parameters.rotation.z, this.parameters.rotation.w);

      this._program.setUniformLocationWith3f(this._program.getUniformLocationForName('iResolution'), this.parameters.resolution.x, this.parameters.resolution.y, this.parameters.resolution.z);

      this._program.setUniformLocationWith1f(this._program.getUniformLocationForName('iGlobalTime'), this.parameters.time);

      this._program.setUniformLocationWith4f(this._program.getUniformLocationForName('iMouse'), this.parameters.mouse.x, this.parameters.mouse.y, this.parameters.mouse.z, this.parameters.mouse.w);

      this._program.setUniformLocationWith4f(this._program.getUniformLocationForName('iDate'), this.parameters.date.x, this.parameters.date.y, this.parameters.date.z, this.parameters.date.w);
    }

    if (cc.sys.isNative) {
      var glProgram_state = cc.GLProgramState.getOrCreateWithGLProgram(this._program);
      glProgram_state.setUniformVec3("iResolution", this.parameters.resolution);
      glProgram_state.setUniformFloat("iGlobalTime", this.parameters.time);
      glProgram_state.setUniformVec4("iMouse", this.parameters.mouse);
      glProgram_state.setUniformVec4("rotation", this.parameters.rotation);
    } else {
      this._resolution = this._program.getUniformLocationForName("iResolution");
      this._time = this._program.getUniformLocationForName("iGlobalTime");
      this._mouse = this._program.getUniformLocationForName("iMouse");
      this._rotation = this._program.getUniformLocationForName("rotation");

      this._program.setUniformLocationWith4f(this._rotation, this.parameters.rotation.x, this.parameters.rotation.y, this.parameters.rotation.z, this.parameters.rotation.w);

      this._program.setUniformLocationWith3f(this._resolution, this.parameters.resolution.x, this.parameters.resolution.y, this.parameters.resolution.z);

      this._program.setUniformLocationWith1f(this._time, this.parameters.time);

      this._program.setUniformLocationWith4f(this._mouse, this.parameters.mouse.x, this.parameters.mouse.y, this.parameters.mouse.z, this.parameters.mouse.w);

      this._program.setUniformLocationWith4f(this._date, this.parameters.date.x, this.parameters.date.y, this.parameters.date.z, this.parameters.date.w);
    }

    this.setProgram(this.node._sgNode, this._program);
  },
  update: function update(dt) {
    if (this._program) {
      this.parameters.rotation.x += dt * 0.2;
      this.parameters.rotation.z += dt * 0.4;

      if (this.parameters.rotation.x > 1) {
        this.parameters.rotation.x = 0;
      }

      this.updateGLParameters();

      this._program.use();

      if (cc.sys.isNative) {
        var glProgram_state = cc.GLProgramState.getOrCreateWithGLProgram(this._program);
        glProgram_state.setUniformVec3("iResolution", this.parameters.resolution);
        glProgram_state.setUniformFloat("iGlobalTime", this.parameters.time);
        glProgram_state.setUniformVec4("iMouse", this.parameters.mouse);
        glProgram_state.setUniformVec4("iDate", this.parameters.date);
        glProgram_state.setUniformVec4("rotation", this.parameters.rotation);
      } else {
        this._program.setUniformLocationWith4f(this._rotation, this.parameters.rotation.x, this.parameters.rotation.y, this.parameters.rotation.z, this.parameters.rotation.w);

        this._program.setUniformLocationWith3f(this._resolution, this.parameters.resolution.x, this.parameters.resolution.y, this.parameters.resolution.z);

        this._program.setUniformLocationWith1f(this._time, this.parameters.time);

        this._program.setUniformLocationWith4f(this._mouse, this.parameters.mouse.x, this.parameters.mouse.y, this.parameters.mouse.z, this.parameters.mouse.w);

        this._program.setUniformLocationWith4f(this._date, this.parameters.date.x, this.parameters.date.y, this.parameters.date.z, this.parameters.date.w);
      }
    }
  },
  _use: function _use() {
    this.updateGLParameters();
    this._program = new cc.GLProgram();

    if (cc.sys.isNative) {
      cc.log("use native GLProgram");

      this._program.initWithString(_default_vert_no_mvp, _black_white_frag);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION, cc.macro.VERTEX_ATTRIB_POSITION);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR, cc.macro.VERTEX_ATTRIB_COLOR);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD, cc.macro.VERTEX_ATTRIB_TEX_COORDS);

      this._program.link();

      this._program.updateUniforms();
    } else {
      this._program.initWithVertexShaderByteArray(_default_vert, _black_white_frag);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION, cc.macro.VERTEX_ATTRIB_POSITION);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR, cc.macro.VERTEX_ATTRIB_COLOR);

      this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD, cc.macro.VERTEX_ATTRIB_TEX_COORDS);

      this._program.link();

      this._program.updateUniforms();

      this._program.setUniformLocationWith4f(this._program.getUniformLocationForName('rotation'), this.parameters.rotation.x, this.parameters.rotation.y, this.parameters.rotation.z, this.parameters.rotation.w);

      this._program.setUniformLocationWith3f(this._program.getUniformLocationForName('iResolution'), this.parameters.resolution.x, this.parameters.resolution.y, this.parameters.resolution.z);

      this._program.setUniformLocationWith1f(this._program.getUniformLocationForName('iGlobalTime'), this.parameters.time);

      this._program.setUniformLocationWith4f(this._program.getUniformLocationForName('iMouse'), this.parameters.mouse.x, this.parameters.mouse.y, this.parameters.mouse.z, this.parameters.mouse.w);

      this._program.setUniformLocationWith4f(this._program.getUniformLocationForName('iDate'), this.parameters.date.x, this.parameters.date.y, this.parameters.date.z, this.parameters.date.w);
    }

    if (cc.sys.isNative) {
      var glProgram_state = cc.GLProgramState.getOrCreateWithGLProgram(this._program);
      glProgram_state.setUniformVec3("iResolution", this.parameters.resolution);
      glProgram_state.setUniformFloat("iGlobalTime", this.parameters.time);
      glProgram_state.setUniformVec4("iMouse", this.parameters.mouse);
      glProgram_state.setUniformVec4("rotation", this.parameters.rotation);
    } else {
      this._resolution = this._program.getUniformLocationForName("iResolution");
      this._time = this._program.getUniformLocationForName("iGlobalTime");
      this._mouse = this._program.getUniformLocationForName("iMouse");
      this._rotation = this._program.getUniformLocationForName("rotation");

      this._program.setUniformLocationWith4f(this._rotation, this.parameters.rotation.x, this.parameters.rotation.y, this.parameters.rotation.z, this.parameters.rotation.w);

      this._program.setUniformLocationWith3f(this._resolution, this.parameters.resolution.x, this.parameters.resolution.y, this.parameters.resolution.z);

      this._program.setUniformLocationWith1f(this._time, this.parameters.time);

      this._program.setUniformLocationWith4f(this._mouse, this.parameters.mouse.x, this.parameters.mouse.y, this.parameters.mouse.z, this.parameters.mouse.w);

      this._program.setUniformLocationWith4f(this._date, this.parameters.date.x, this.parameters.date.y, this.parameters.date.z, this.parameters.date.w);
    }

    this.setProgram(this.node._sgNode, this._program);
  },
  setProgram: function setProgram(node, program) {
    if (cc.sys.isNative) {
      var glProgram_state = cc.GLProgramState.getOrCreateWithGLProgram(program);
      node.setGLProgramState(glProgram_state);
    } else {
      node.setShaderProgram(program);
    }

    var children = node.children;
    if (!children) return;

    for (var i = 0; i < children.length; i++) {
      this.setProgram(children[i], program);
    }
  }
});
cc.EffectBlackWhite = module.exports = EffectBlackWhite;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxFZmZlY3RfUm90YXRlLmpzIl0sIm5hbWVzIjpbIl9kZWZhdWx0X3ZlcnQiLCJyZXF1aXJlIiwiX2RlZmF1bHRfdmVydF9ub19tdnAiLCJfYmxhY2tfd2hpdGVfZnJhZyIsIl9ub3JtYWxfZnJhZyIsIkVmZmVjdEJsYWNrV2hpdGUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwiZWRpdG9yIiwiQ0NfRURJVE9SIiwibWVudSIsImhlbHAiLCJleGVjdXRlSW5FZGl0TW9kZSIsInByb3BlcnRpZXMiLCJpc0FsbENoaWxkcmVuVXNlciIsIl9jcmVhdGVTZ05vZGUiLCJfaW5pdFNnTm9kZSIsInVwZGF0ZUdMUGFyYW1ldGVycyIsInBhcmFtZXRlcnMiLCJub3ciLCJEYXRlIiwic3RhcnRUaW1lIiwidGltZSIsIm1vdXNlIiwieCIsInkiLCJ6IiwidyIsInJlc29sdXRpb24iLCJkYXRlIiwiZ2V0WWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldFRpbWUiLCJnZXRNaWxsaXNlY29uZHMiLCJyb3RhdGlvbiIsImlzTW91c2VEb3duIiwibm9kZSIsImdldENvbnRlbnRTaXplIiwid2lkdGgiLCJoZWlnaHQiLCJvbkVuYWJsZSIsIl91c2UiLCJvbkRpc2FibGUiLCJfdW5Vc2UiLCJvbkxvYWQiLCJvbiIsIk5vZGUiLCJFdmVudFR5cGUiLCJNT1VTRV9ET1dOIiwiZXZlbnQiLCJNT1VTRV9VUCIsIk1PVVNFX0xFQVZFIiwiVE9VQ0hfU1RBUlQiLCJUT1VDSF9FTkQiLCJUT1VDSF9DQU5DRUwiLCJNT1VTRV9NT1ZFIiwiZ2V0TG9jYXRpb25YIiwiZ2V0TG9jYXRpb25ZIiwiVE9VQ0hfTU9WRSIsIl9wcm9ncmFtIiwiR0xQcm9ncmFtIiwic3lzIiwiaXNOYXRpdmUiLCJsb2ciLCJpbml0V2l0aFN0cmluZyIsImFkZEF0dHJpYnV0ZSIsIm1hY3JvIiwiQVRUUklCVVRFX05BTUVfUE9TSVRJT04iLCJWRVJURVhfQVRUUklCX1BPU0lUSU9OIiwiQVRUUklCVVRFX05BTUVfQ09MT1IiLCJWRVJURVhfQVRUUklCX0NPTE9SIiwiQVRUUklCVVRFX05BTUVfVEVYX0NPT1JEIiwiVkVSVEVYX0FUVFJJQl9URVhfQ09PUkRTIiwibGluayIsInVwZGF0ZVVuaWZvcm1zIiwiaW5pdFdpdGhWZXJ0ZXhTaGFkZXJCeXRlQXJyYXkiLCJzZXRVbmlmb3JtTG9jYXRpb25XaXRoNGYiLCJnZXRVbmlmb3JtTG9jYXRpb25Gb3JOYW1lIiwic2V0VW5pZm9ybUxvY2F0aW9uV2l0aDNmIiwic2V0VW5pZm9ybUxvY2F0aW9uV2l0aDFmIiwiZ2xQcm9ncmFtX3N0YXRlIiwiR0xQcm9ncmFtU3RhdGUiLCJnZXRPckNyZWF0ZVdpdGhHTFByb2dyYW0iLCJzZXRVbmlmb3JtVmVjMyIsInNldFVuaWZvcm1GbG9hdCIsInNldFVuaWZvcm1WZWM0IiwiX3Jlc29sdXRpb24iLCJfdGltZSIsIl9tb3VzZSIsIl9yb3RhdGlvbiIsIl9kYXRlIiwic2V0UHJvZ3JhbSIsIl9zZ05vZGUiLCJ1cGRhdGUiLCJkdCIsInVzZSIsInByb2dyYW0iLCJzZXRHTFByb2dyYW1TdGF0ZSIsInNldFNoYWRlclByb2dyYW0iLCJjaGlsZHJlbiIsImkiLCJsZW5ndGgiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLGFBQWEsR0FBR0MsT0FBTyxDQUFDLG9DQUFELENBQTNCOztBQUNBLElBQUlDLG9CQUFvQixHQUFHRCxPQUFPLENBQUMsMENBQUQsQ0FBbEM7O0FBR0EsSUFBSUUsaUJBQWlCLEdBQUdGLE9BQU8sQ0FBQyxzREFBRCxDQUEvQjs7QUFDQSxJQUFJRyxZQUFZLEdBQUdILE9BQU8sQ0FBQyxvQ0FBRCxDQUExQjs7QUFFQSxJQUFJSSxnQkFBZ0IsR0FBR0MsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDNUIsYUFBU0QsRUFBRSxDQUFDRSxTQURnQjtBQUU1QkMsRUFBQUEsTUFBTSxFQUFFQyxTQUFTLElBQUk7QUFDakJDLElBQUFB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QUF3VUE1RixFQUFFLENBQUNELGdCQUFILEdBQXNCbUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCcEcsZ0JBQXZDIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX2RlZmF1bHRfdmVydCA9IHJlcXVpcmUoXCIuLi9TaGFkZXJzL2NjU2hhZGVyX1JvdGF0ZV9WZXJ0LmpzXCIpO1xyXG52YXIgX2RlZmF1bHRfdmVydF9ub19tdnAgPSByZXF1aXJlKFwiLi4vU2hhZGVycy9jY1NoYWRlcl9Sb3RhdGVfVmVydF9ub01WUC5qc1wiKTtcclxuXHJcblxyXG52YXIgX2JsYWNrX3doaXRlX2ZyYWcgPSByZXF1aXJlKFwiLi4vU2hhZGVycy9jY1NoYWRlcl9Sb3RhdGlvbl9BdmdfQmxhY2tfV2hpdGVfRnJhZy5qc1wiKTtcclxudmFyIF9ub3JtYWxfZnJhZyA9IHJlcXVpcmUoXCIuLi9TaGFkZXJzL2NjU2hhZGVyX05vcm1hbF9GcmFnLmpzXCIpO1xyXG5cclxudmFyIEVmZmVjdEJsYWNrV2hpdGUgPSBjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBlZGl0b3I6IENDX0VESVRPUiAmJiB7XHJcbiAgICAgICAgbWVudTogJ2kxOG46TUFJTl9NRU5VLmNvbXBvbmVudC5yZW5kZXJlcnMvRWZmZWN0L1JvdGF0ZScsXHJcbiAgICAgICAgaGVscDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbjNkbWF4L0NvY29zQ3JlYXRvci9ibG9iL21hc3Rlci9TaGFkZXJfZG9jcy9FZmZlY3RfUm90YXRlLm1kJyxcclxuICAgICAgICBleGVjdXRlSW5FZGl0TW9kZTogdHJ1ZSxcclxuICAgIH0sXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGlzQWxsQ2hpbGRyZW5Vc2VyOmZhbHNlLFxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgX2NyZWF0ZVNnTm9kZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRoaXMuX2NsaXBwaW5nU3RlbmNpbCA9IG5ldyBjYy5EcmF3Tm9kZSgpO1xyXG4gICAgICAgIC8vIHRoaXMuX2NsaXBwaW5nU3RlbmNpbC5yZXRhaW4oKTtcclxuICAgICAgICAvLyByZXR1cm4gbmV3IGNjLkNsaXBwaW5nTm9kZSh0aGlzLl9jbGlwcGluZ1N0ZW5jaWwpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdFNnTm9kZTogZnVuY3Rpb24gKCkge30sXHJcblxyXG4gICAgdXBkYXRlR0xQYXJhbWV0ZXJzOmZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLnBhcmFtZXRlcnMpe1xyXG4gICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzPXtcclxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZTpEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgdGltZTowLjAsXHJcbiAgICAgICAgICAgICAgICBtb3VzZTp7XHJcbiAgICAgICAgICAgICAgICAgICAgeDowLjAsXHJcbiAgICAgICAgICAgICAgICAgICAgeTowLjAsXHJcbiAgICAgICAgICAgICAgICAgICAgejowLjAsXHJcbiAgICAgICAgICAgICAgICAgICAgdzowLjAsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbjp7XHJcbiAgICAgICAgICAgICAgICAgICAgeDowLjAsXHJcbiAgICAgICAgICAgICAgICAgICAgeTowLjAsXHJcbiAgICAgICAgICAgICAgICAgICAgejoxLjAsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0ZTp7XHJcbiAgICAgICAgICAgICAgICAgICAgeDpub3cuZ2V0WWVhcigpLC8veWVhclxyXG4gICAgICAgICAgICAgICAgICAgIHk6bm93LmdldE1vbnRoKCksLy9tb250aFxyXG4gICAgICAgICAgICAgICAgICAgIHo6bm93LmdldERhdGUoKSwvL2RheVxyXG4gICAgICAgICAgICAgICAgICAgIHc6bm93LmdldFRpbWUoKStub3cuZ2V0TWlsbGlzZWNvbmRzKCkvMTAwMCwvL3RpbWUgc2Vjb25kc1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOntcclxuICAgICAgICAgICAgICAgICAgICB4OjEuMCxcclxuICAgICAgICAgICAgICAgICAgICB5OjEuMCxcclxuICAgICAgICAgICAgICAgICAgICB6OjEuMCxcclxuICAgICAgICAgICAgICAgICAgICB3OjEuMCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpc01vdXNlRG93bjpmYWxzZSxcclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMudGltZSA9IChEYXRlLm5vdygpIC0gdGhpcy5wYXJhbWV0ZXJzLnN0YXJ0VGltZSkvMTAwMDtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMucmVzb2x1dGlvbi54ID0gKCB0aGlzLm5vZGUuZ2V0Q29udGVudFNpemUoKS53aWR0aCApO1xyXG4gICAgICAgIHRoaXMucGFyYW1ldGVycy5yZXNvbHV0aW9uLnkgPSAoIHRoaXMubm9kZS5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCApO1xyXG4gICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMuZGF0ZT17XHJcbiAgICAgICAgICAgICAgICB4Om5vdy5nZXRZZWFyKCksLy95ZWFyXHJcbiAgICAgICAgICAgICAgICB5Om5vdy5nZXRNb250aCgpLC8vbW9udGhcclxuICAgICAgICAgICAgICAgIHo6bm93LmdldERhdGUoKSwvL2RheVxyXG4gICAgICAgICAgICAgICAgdzpub3cuZ2V0VGltZSgpK25vdy5nZXRNaWxsaXNlY29uZHMoKS8xMDAwLC8vdGltZSBzZWNvbmRzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBvbkVuYWJsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3VzZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkRpc2FibGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl91blVzZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnM9e1xyXG4gICAgICAgICAgICBzdGFydFRpbWU6RGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgdGltZTowLjAsXHJcbiAgICAgICAgICAgIG1vdXNlOntcclxuICAgICAgICAgICAgICAgIHg6MC4wLFxyXG4gICAgICAgICAgICAgICAgeTowLjAsXHJcbiAgICAgICAgICAgICAgICB6OjAuMCxcclxuICAgICAgICAgICAgICAgIHc6MC4wLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXNvbHV0aW9uOntcclxuICAgICAgICAgICAgICAgIHg6MC4wLFxyXG4gICAgICAgICAgICAgICAgeTowLjAsXHJcbiAgICAgICAgICAgICAgICB6OjEuMCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0ZTp7XHJcbiAgICAgICAgICAgICAgICB4Om5vdy5nZXRZZWFyKCksLy95ZWFyXHJcbiAgICAgICAgICAgICAgICB5Om5vdy5nZXRNb250aCgpLC8vbW9udGhcclxuICAgICAgICAgICAgICAgIHo6bm93LmdldERhdGUoKSwvL2RheVxyXG4gICAgICAgICAgICAgICAgdzpub3cuZ2V0VGltZSgpK25vdy5nZXRNaWxsaXNlY29uZHMoKS8xMDAwLC8vdGltZSBzZWNvbmRzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJvdGF0aW9uOntcclxuICAgICAgICAgICAgICAgIHg6MCxcclxuICAgICAgICAgICAgICAgIHk6MCxcclxuICAgICAgICAgICAgICAgIHo6MCxcclxuICAgICAgICAgICAgICAgIHc6MCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNNb3VzZURvd246ZmFsc2UsXHJcblxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuTU9VU0VfRE9XTiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5pc01vdXNlRG93bj10cnVlO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLk1PVVNFX1VQLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLmlzTW91c2VEb3duPWZhbHNlO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuTU9VU0VfTEVBVkUsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuaXNNb3VzZURvd249ZmFsc2U7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuaXNNb3VzZURvd249dHJ1ZTtcclxuICAgICAgICB9LCB0aGlzKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuaXNNb3VzZURvd249ZmFsc2U7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9DQU5DRUwsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuaXNNb3VzZURvd249ZmFsc2U7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5NT1VTRV9NT1ZFLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYodGhpcy5wYXJhbWV0ZXJzLmlzTW91c2VEb3duKXtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5tb3VzZS54ID0gZXZlbnQuZ2V0TG9jYXRpb25YKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMubW91c2UueSA9IGV2ZW50LmdldExvY2F0aW9uWSgpOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKCBjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9NT1ZFLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYodGhpcy5wYXJhbWV0ZXJzLmlzTW91c2VEb3duKXtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5tb3VzZS54ID0gZXZlbnQuZ2V0TG9jYXRpb25YKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMubW91c2UueSA9IGV2ZW50LmdldExvY2F0aW9uWSgpOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMpO1xyXG4gICAgfSxcclxuICAgIF91blVzZTogZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMudXBkYXRlR0xQYXJhbWV0ZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fcHJvZ3JhbSA9IG5ldyBjYy5HTFByb2dyYW0oKTtcclxuICAgICAgICBpZiAoY2Muc3lzLmlzTmF0aXZlKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInVzZSBuYXRpdmUgR0xQcm9ncmFtXCIpXHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uaW5pdFdpdGhTdHJpbmcoX2RlZmF1bHRfdmVydF9ub19tdnAsIF9ub3JtYWxfZnJhZyk7XHJcblxyXG5cclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5hZGRBdHRyaWJ1dGUoY2MubWFjcm8uQVRUUklCVVRFX05BTUVfUE9TSVRJT04sIGNjLm1hY3JvLlZFUlRFWF9BVFRSSUJfUE9TSVRJT04pO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLmFkZEF0dHJpYnV0ZShjYy5tYWNyby5BVFRSSUJVVEVfTkFNRV9DT0xPUiwgY2MubWFjcm8uVkVSVEVYX0FUVFJJQl9DT0xPUik7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uYWRkQXR0cmlidXRlKGNjLm1hY3JvLkFUVFJJQlVURV9OQU1FX1RFWF9DT09SRCwgY2MubWFjcm8uVkVSVEVYX0FUVFJJQl9URVhfQ09PUkRTKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0ubGluaygpO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLnVwZGF0ZVVuaWZvcm1zKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlR0xQYXJhbWV0ZXJzKCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uaW5pdFdpdGhWZXJ0ZXhTaGFkZXJCeXRlQXJyYXkoX2RlZmF1bHRfdmVydCwgX25vcm1hbF9mcmFnKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5hZGRBdHRyaWJ1dGUoY2MubWFjcm8uQVRUUklCVVRFX05BTUVfUE9TSVRJT04sIGNjLm1hY3JvLlZFUlRFWF9BVFRSSUJfUE9TSVRJT04pO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLmFkZEF0dHJpYnV0ZShjYy5tYWNyby5BVFRSSUJVVEVfTkFNRV9DT0xPUiwgY2MubWFjcm8uVkVSVEVYX0FUVFJJQl9DT0xPUik7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uYWRkQXR0cmlidXRlKGNjLm1hY3JvLkFUVFJJQlVURV9OQU1FX1RFWF9DT09SRCwgY2MubWFjcm8uVkVSVEVYX0FUVFJJQl9URVhfQ09PUkRTKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5saW5rKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0udXBkYXRlVW5pZm9ybXMoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlR0xQYXJhbWV0ZXJzKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm1Mb2NhdGlvbldpdGg0Zih0aGlzLl9wcm9ncmFtLmdldFVuaWZvcm1Mb2NhdGlvbkZvck5hbWUoJ3JvdGF0aW9uJyksIHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbi54LHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbi55LHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbi56ICx0aGlzLnBhcmFtZXRlcnMucm90YXRpb24udyApO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm1Mb2NhdGlvbldpdGgzZih0aGlzLl9wcm9ncmFtLmdldFVuaWZvcm1Mb2NhdGlvbkZvck5hbWUoJ2lSZXNvbHV0aW9uJyksIHRoaXMucGFyYW1ldGVycy5yZXNvbHV0aW9uLngsdGhpcy5wYXJhbWV0ZXJzLnJlc29sdXRpb24ueSx0aGlzLnBhcmFtZXRlcnMucmVzb2x1dGlvbi56ICk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDFmKCB0aGlzLl9wcm9ncmFtLmdldFVuaWZvcm1Mb2NhdGlvbkZvck5hbWUoJ2lHbG9iYWxUaW1lJyksIHRoaXMucGFyYW1ldGVycy50aW1lICk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDRmKCB0aGlzLl9wcm9ncmFtLmdldFVuaWZvcm1Mb2NhdGlvbkZvck5hbWUoJ2lNb3VzZScpLCB0aGlzLnBhcmFtZXRlcnMubW91c2UueCx0aGlzLnBhcmFtZXRlcnMubW91c2UueSAsIHRoaXMucGFyYW1ldGVycy5tb3VzZS56LHRoaXMucGFyYW1ldGVycy5tb3VzZS53KTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtTG9jYXRpb25XaXRoNGYoIHRoaXMuX3Byb2dyYW0uZ2V0VW5pZm9ybUxvY2F0aW9uRm9yTmFtZSgnaURhdGUnKSwgdGhpcy5wYXJhbWV0ZXJzLmRhdGUueCx0aGlzLnBhcmFtZXRlcnMuZGF0ZS55LHRoaXMucGFyYW1ldGVycy5kYXRlLnosdGhpcy5wYXJhbWV0ZXJzLmRhdGUudyApO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoY2Muc3lzLmlzTmF0aXZlKSB7XHJcbiAgICAgICAgICAgIHZhciBnbFByb2dyYW1fc3RhdGUgPSBjYy5HTFByb2dyYW1TdGF0ZS5nZXRPckNyZWF0ZVdpdGhHTFByb2dyYW0odGhpcy5fcHJvZ3JhbSk7XHJcbiAgICAgICAgICAgIGdsUHJvZ3JhbV9zdGF0ZS5zZXRVbmlmb3JtVmVjMyggXCJpUmVzb2x1dGlvblwiLCB0aGlzLnBhcmFtZXRlcnMucmVzb2x1dGlvbiApO1xyXG4gICAgICAgICAgICBnbFByb2dyYW1fc3RhdGUuc2V0VW5pZm9ybUZsb2F0KCBcImlHbG9iYWxUaW1lXCIgLCB0aGlzLnBhcmFtZXRlcnMudGltZSApO1xyXG4gICAgICAgICAgICBnbFByb2dyYW1fc3RhdGUuc2V0VW5pZm9ybVZlYzQoIFwiaU1vdXNlXCIgLCB0aGlzLnBhcmFtZXRlcnMubW91c2UgKTtcclxuICAgICAgICAgICAgZ2xQcm9ncmFtX3N0YXRlLnNldFVuaWZvcm1WZWM0KFwicm90YXRpb25cIiwgdGhpcy5wYXJhbWV0ZXJzLnJvdGF0aW9uKTtcclxuICAgICAgICB9ZWxzZXtcclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLl9yZXNvbHV0aW9uID0gdGhpcy5fcHJvZ3JhbS5nZXRVbmlmb3JtTG9jYXRpb25Gb3JOYW1lKCBcImlSZXNvbHV0aW9uXCIgKTtcclxuICAgICAgICAgICAgdGhpcy5fdGltZSA9IHRoaXMuX3Byb2dyYW0uZ2V0VW5pZm9ybUxvY2F0aW9uRm9yTmFtZSggXCJpR2xvYmFsVGltZVwiICk7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdXNlID0gdGhpcy5fcHJvZ3JhbS5nZXRVbmlmb3JtTG9jYXRpb25Gb3JOYW1lKCBcImlNb3VzZVwiICk7XHJcbiAgICAgICAgICAgIHRoaXMuX3JvdGF0aW9uID0gdGhpcy5fcHJvZ3JhbS5nZXRVbmlmb3JtTG9jYXRpb25Gb3JOYW1lKCBcInJvdGF0aW9uXCIgKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDRmKHRoaXMuX3JvdGF0aW9uLCB0aGlzLnBhcmFtZXRlcnMucm90YXRpb24ueCx0aGlzLnBhcmFtZXRlcnMucm90YXRpb24ueSx0aGlzLnBhcmFtZXRlcnMucm90YXRpb24ueiAsdGhpcy5wYXJhbWV0ZXJzLnJvdGF0aW9uLncgKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtTG9jYXRpb25XaXRoM2YoIHRoaXMuX3Jlc29sdXRpb24sIHRoaXMucGFyYW1ldGVycy5yZXNvbHV0aW9uLngsdGhpcy5wYXJhbWV0ZXJzLnJlc29sdXRpb24ueSx0aGlzLnBhcmFtZXRlcnMucmVzb2x1dGlvbi56ICk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDFmKCB0aGlzLl90aW1lLCB0aGlzLnBhcmFtZXRlcnMudGltZSApO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm1Mb2NhdGlvbldpdGg0ZiggdGhpcy5fbW91c2UsIHRoaXMucGFyYW1ldGVycy5tb3VzZS54LHRoaXMucGFyYW1ldGVycy5tb3VzZS55ICx0aGlzLnBhcmFtZXRlcnMubW91c2Uueix0aGlzLnBhcmFtZXRlcnMubW91c2Uudyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDRmKCB0aGlzLl9kYXRlLCB0aGlzLnBhcmFtZXRlcnMuZGF0ZS54LHRoaXMucGFyYW1ldGVycy5kYXRlLnksdGhpcy5wYXJhbWV0ZXJzLmRhdGUueix0aGlzLnBhcmFtZXRlcnMuZGF0ZS53ICk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5zZXRQcm9ncmFtKCB0aGlzLm5vZGUuX3NnTm9kZSwgdGhpcy5fcHJvZ3JhbSApO1xyXG4gICAgICAgIFxyXG4gICAgfSxcclxuXHJcbiAgICAgdXBkYXRlOmZ1bmN0aW9uKGR0KXtcclxuXHJcblxyXG4gICAgICAgIGlmKHRoaXMuX3Byb2dyYW0pe1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMucm90YXRpb24ueCs9ZHQqMC4yO1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMucm90YXRpb24ueis9ZHQqMC40O1xyXG4gICAgICAgICAgICBpZih0aGlzLnBhcmFtZXRlcnMucm90YXRpb24ueD4xKXtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbi54PTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdMUGFyYW1ldGVycygpO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLnVzZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYoY2Muc3lzLmlzTmF0aXZlKXtcclxuICAgICAgICAgICAgICAgIHZhciBnbFByb2dyYW1fc3RhdGUgPSBjYy5HTFByb2dyYW1TdGF0ZS5nZXRPckNyZWF0ZVdpdGhHTFByb2dyYW0odGhpcy5fcHJvZ3JhbSk7XHJcbiAgICAgICAgICAgICAgICBnbFByb2dyYW1fc3RhdGUuc2V0VW5pZm9ybVZlYzMoIFwiaVJlc29sdXRpb25cIiwgdGhpcy5wYXJhbWV0ZXJzLnJlc29sdXRpb24gKTtcclxuICAgICAgICAgICAgICAgIGdsUHJvZ3JhbV9zdGF0ZS5zZXRVbmlmb3JtRmxvYXQoIFwiaUdsb2JhbFRpbWVcIiwgdGhpcy5wYXJhbWV0ZXJzLnRpbWUgKTsgICAgXHJcbiAgICAgICAgICAgICAgICBnbFByb2dyYW1fc3RhdGUuc2V0VW5pZm9ybVZlYzQoIFwiaU1vdXNlXCIgLCB0aGlzLnBhcmFtZXRlcnMubW91c2UgKTtcclxuICAgICAgICAgICAgICAgIGdsUHJvZ3JhbV9zdGF0ZS5zZXRVbmlmb3JtVmVjNCggXCJpRGF0ZVwiICwgdGhpcy5wYXJhbWV0ZXJzLmRhdGUgKTtcclxuICAgICAgICAgICAgICAgIGdsUHJvZ3JhbV9zdGF0ZS5zZXRVbmlmb3JtVmVjNChcInJvdGF0aW9uXCIsIHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbik7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtTG9jYXRpb25XaXRoNGYodGhpcy5fcm90YXRpb24sIHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbi54LHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbi55LHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbi56ICx0aGlzLnBhcmFtZXRlcnMucm90YXRpb24udyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtTG9jYXRpb25XaXRoM2YoIHRoaXMuX3Jlc29sdXRpb24sIHRoaXMucGFyYW1ldGVycy5yZXNvbHV0aW9uLngsdGhpcy5wYXJhbWV0ZXJzLnJlc29sdXRpb24ueSx0aGlzLnBhcmFtZXRlcnMucmVzb2x1dGlvbi56ICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm1Mb2NhdGlvbldpdGgxZiggdGhpcy5fdGltZSwgdGhpcy5wYXJhbWV0ZXJzLnRpbWUgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDRmKCB0aGlzLl9tb3VzZSwgdGhpcy5wYXJhbWV0ZXJzLm1vdXNlLngsdGhpcy5wYXJhbWV0ZXJzLm1vdXNlLnksdGhpcy5wYXJhbWV0ZXJzLm1vdXNlLnosdGhpcy5wYXJhbWV0ZXJzLm1vdXNlLncgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDRmKCB0aGlzLl9kYXRlLCB0aGlzLnBhcmFtZXRlcnMuZGF0ZS54LHRoaXMucGFyYW1ldGVycy5kYXRlLnksdGhpcy5wYXJhbWV0ZXJzLmRhdGUueix0aGlzLnBhcmFtZXRlcnMuZGF0ZS53ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF91c2U6IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUdMUGFyYW1ldGVycygpO1xyXG4gICAgICAgIHRoaXMuX3Byb2dyYW0gPSBuZXcgY2MuR0xQcm9ncmFtKCk7XHJcbiAgICAgICAgaWYgKGNjLnN5cy5pc05hdGl2ZSkge1xyXG4gICAgICAgICAgICBjYy5sb2coXCJ1c2UgbmF0aXZlIEdMUHJvZ3JhbVwiKVxyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLmluaXRXaXRoU3RyaW5nKF9kZWZhdWx0X3ZlcnRfbm9fbXZwLCBfYmxhY2tfd2hpdGVfZnJhZyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uYWRkQXR0cmlidXRlKGNjLm1hY3JvLkFUVFJJQlVURV9OQU1FX1BPU0lUSU9OLCBjYy5tYWNyby5WRVJURVhfQVRUUklCX1BPU0lUSU9OKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5hZGRBdHRyaWJ1dGUoY2MubWFjcm8uQVRUUklCVVRFX05BTUVfQ09MT1IsIGNjLm1hY3JvLlZFUlRFWF9BVFRSSUJfQ09MT1IpO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLmFkZEF0dHJpYnV0ZShjYy5tYWNyby5BVFRSSUJVVEVfTkFNRV9URVhfQ09PUkQsIGNjLm1hY3JvLlZFUlRFWF9BVFRSSUJfVEVYX0NPT1JEUyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLmxpbmsoKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS51cGRhdGVVbmlmb3JtcygpO1xyXG5cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5pbml0V2l0aFZlcnRleFNoYWRlckJ5dGVBcnJheShfZGVmYXVsdF92ZXJ0LCBfYmxhY2tfd2hpdGVfZnJhZyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uYWRkQXR0cmlidXRlKGNjLm1hY3JvLkFUVFJJQlVURV9OQU1FX1BPU0lUSU9OLCBjYy5tYWNyby5WRVJURVhfQVRUUklCX1BPU0lUSU9OKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5hZGRBdHRyaWJ1dGUoY2MubWFjcm8uQVRUUklCVVRFX05BTUVfQ09MT1IsIGNjLm1hY3JvLlZFUlRFWF9BVFRSSUJfQ09MT1IpO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLmFkZEF0dHJpYnV0ZShjYy5tYWNyby5BVFRSSUJVVEVfTkFNRV9URVhfQ09PUkQsIGNjLm1hY3JvLlZFUlRFWF9BVFRSSUJfVEVYX0NPT1JEUyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0ubGluaygpO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLnVwZGF0ZVVuaWZvcm1zKCk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm1Mb2NhdGlvbldpdGg0Zih0aGlzLl9wcm9ncmFtLmdldFVuaWZvcm1Mb2NhdGlvbkZvck5hbWUoJ3JvdGF0aW9uJyksIHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbi54LHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbi55LHRoaXMucGFyYW1ldGVycy5yb3RhdGlvbi56ICx0aGlzLnBhcmFtZXRlcnMucm90YXRpb24udyApO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm1Mb2NhdGlvbldpdGgzZih0aGlzLl9wcm9ncmFtLmdldFVuaWZvcm1Mb2NhdGlvbkZvck5hbWUoJ2lSZXNvbHV0aW9uJyksIHRoaXMucGFyYW1ldGVycy5yZXNvbHV0aW9uLngsdGhpcy5wYXJhbWV0ZXJzLnJlc29sdXRpb24ueSx0aGlzLnBhcmFtZXRlcnMucmVzb2x1dGlvbi56ICk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDFmKCB0aGlzLl9wcm9ncmFtLmdldFVuaWZvcm1Mb2NhdGlvbkZvck5hbWUoJ2lHbG9iYWxUaW1lJyksIHRoaXMucGFyYW1ldGVycy50aW1lICk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDRmKCB0aGlzLl9wcm9ncmFtLmdldFVuaWZvcm1Mb2NhdGlvbkZvck5hbWUoJ2lNb3VzZScpLCB0aGlzLnBhcmFtZXRlcnMubW91c2UueCx0aGlzLnBhcmFtZXRlcnMubW91c2UueSAsIHRoaXMucGFyYW1ldGVycy5tb3VzZS56LHRoaXMucGFyYW1ldGVycy5tb3VzZS53KTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtTG9jYXRpb25XaXRoNGYoIHRoaXMuX3Byb2dyYW0uZ2V0VW5pZm9ybUxvY2F0aW9uRm9yTmFtZSgnaURhdGUnKSwgdGhpcy5wYXJhbWV0ZXJzLmRhdGUueCx0aGlzLnBhcmFtZXRlcnMuZGF0ZS55LHRoaXMucGFyYW1ldGVycy5kYXRlLnosdGhpcy5wYXJhbWV0ZXJzLmRhdGUudyApO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoY2Muc3lzLmlzTmF0aXZlKSB7XHJcbiAgICAgICAgICAgIHZhciBnbFByb2dyYW1fc3RhdGUgPSBjYy5HTFByb2dyYW1TdGF0ZS5nZXRPckNyZWF0ZVdpdGhHTFByb2dyYW0odGhpcy5fcHJvZ3JhbSk7XHJcbiAgICAgICAgICAgIGdsUHJvZ3JhbV9zdGF0ZS5zZXRVbmlmb3JtVmVjMyggXCJpUmVzb2x1dGlvblwiLCB0aGlzLnBhcmFtZXRlcnMucmVzb2x1dGlvbiApO1xyXG4gICAgICAgICAgICBnbFByb2dyYW1fc3RhdGUuc2V0VW5pZm9ybUZsb2F0KCBcImlHbG9iYWxUaW1lXCIgLCB0aGlzLnBhcmFtZXRlcnMudGltZSApO1xyXG4gICAgICAgICAgICBnbFByb2dyYW1fc3RhdGUuc2V0VW5pZm9ybVZlYzQoIFwiaU1vdXNlXCIgLCB0aGlzLnBhcmFtZXRlcnMubW91c2UgKTtcclxuICAgICAgICAgICAgZ2xQcm9ncmFtX3N0YXRlLnNldFVuaWZvcm1WZWM0KFwicm90YXRpb25cIiwgdGhpcy5wYXJhbWV0ZXJzLnJvdGF0aW9uKTtcclxuICAgICAgICB9ZWxzZXtcclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLl9yZXNvbHV0aW9uID0gdGhpcy5fcHJvZ3JhbS5nZXRVbmlmb3JtTG9jYXRpb25Gb3JOYW1lKCBcImlSZXNvbHV0aW9uXCIgKTtcclxuICAgICAgICAgICAgdGhpcy5fdGltZSA9IHRoaXMuX3Byb2dyYW0uZ2V0VW5pZm9ybUxvY2F0aW9uRm9yTmFtZSggXCJpR2xvYmFsVGltZVwiICk7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdXNlID0gdGhpcy5fcHJvZ3JhbS5nZXRVbmlmb3JtTG9jYXRpb25Gb3JOYW1lKCBcImlNb3VzZVwiICk7XHJcbiAgICAgICAgICAgIHRoaXMuX3JvdGF0aW9uID0gdGhpcy5fcHJvZ3JhbS5nZXRVbmlmb3JtTG9jYXRpb25Gb3JOYW1lKCBcInJvdGF0aW9uXCIgKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDRmKHRoaXMuX3JvdGF0aW9uLCB0aGlzLnBhcmFtZXRlcnMucm90YXRpb24ueCx0aGlzLnBhcmFtZXRlcnMucm90YXRpb24ueSx0aGlzLnBhcmFtZXRlcnMucm90YXRpb24ueiAsdGhpcy5wYXJhbWV0ZXJzLnJvdGF0aW9uLncgKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtTG9jYXRpb25XaXRoM2YoIHRoaXMuX3Jlc29sdXRpb24sIHRoaXMucGFyYW1ldGVycy5yZXNvbHV0aW9uLngsdGhpcy5wYXJhbWV0ZXJzLnJlc29sdXRpb24ueSx0aGlzLnBhcmFtZXRlcnMucmVzb2x1dGlvbi56ICk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDFmKCB0aGlzLl90aW1lLCB0aGlzLnBhcmFtZXRlcnMudGltZSApO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm1Mb2NhdGlvbldpdGg0ZiggdGhpcy5fbW91c2UsIHRoaXMucGFyYW1ldGVycy5tb3VzZS54LHRoaXMucGFyYW1ldGVycy5tb3VzZS55ICx0aGlzLnBhcmFtZXRlcnMubW91c2Uueix0aGlzLnBhcmFtZXRlcnMubW91c2Uudyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybUxvY2F0aW9uV2l0aDRmKCB0aGlzLl9kYXRlLCB0aGlzLnBhcmFtZXRlcnMuZGF0ZS54LHRoaXMucGFyYW1ldGVycy5kYXRlLnksdGhpcy5wYXJhbWV0ZXJzLmRhdGUueix0aGlzLnBhcmFtZXRlcnMuZGF0ZS53ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0UHJvZ3JhbSggdGhpcy5ub2RlLl9zZ05vZGUsIHRoaXMuX3Byb2dyYW0gKTtcclxuICAgICAgICBcclxuICAgIH0sXHJcbiAgICBzZXRQcm9ncmFtOmZ1bmN0aW9uIChub2RlLCBwcm9ncmFtKSB7XHJcblxyXG4gICAgICAgIGlmIChjYy5zeXMuaXNOYXRpdmUpIHtcclxuICAgICAgICAgICAgdmFyIGdsUHJvZ3JhbV9zdGF0ZSA9IGNjLkdMUHJvZ3JhbVN0YXRlLmdldE9yQ3JlYXRlV2l0aEdMUHJvZ3JhbShwcm9ncmFtKTtcclxuICAgICAgICAgICAgbm9kZS5zZXRHTFByb2dyYW1TdGF0ZShnbFByb2dyYW1fc3RhdGUpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBub2RlLnNldFNoYWRlclByb2dyYW0ocHJvZ3JhbSk7ICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB2YXIgY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIGlmICghY2hpbGRyZW4pXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNldFByb2dyYW0oY2hpbGRyZW5baV0sIHByb2dyYW0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgXHJcbn0pO1xyXG5cclxuY2MuRWZmZWN0QmxhY2tXaGl0ZSA9IG1vZHVsZS5leHBvcnRzID0gRWZmZWN0QmxhY2tXaGl0ZTtcclxuXHJcblxyXG5cclxuIl19