
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/__qc_index__.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}
require('./assets/migration/use_reversed_rotateBy');
require('./assets/migration/use_reversed_rotateTo');
require('./assets/migration/use_v2.1-2.2.1_cc.Toggle_event');
require('./assets/scripts/bullet');
require('./assets/scripts/cannon');
require('./assets/scripts/fish_map');
require('./assets/scripts/nav_agent');

                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/migration/use_v2.1-2.2.1_cc.Toggle_event.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '131d8+HMKNOR7WuU0m10//v', 'use_v2.1-2.2.1_cc.Toggle_event');
// migration/use_v2.1-2.2.1_cc.Toggle_event.js

"use strict";

/*
 * This script is automatically generated by Cocos Creator and is only used for projects compatible with the v2.1.0 ～ 2.2.1 version.
 * You do not need to manually add this script in any other project.
 * If you don't use cc.Toggle in your project, you can delete this script directly.
 * If your project is hosted in VCS such as git, submit this script together.
 *
 * 此脚本由 Cocos Creator 自动生成，仅用于兼容 v2.1.0 ~ 2.2.1 版本的工程，
 * 你无需在任何其它项目中手动添加此脚本。
 * 如果你的项目中没用到 Toggle，可直接删除该脚本。
 * 如果你的项目有托管于 git 等版本库，请将此脚本一并上传。
 */
if (cc.Toggle) {
  // Whether to trigger 'toggle' and 'checkEvents' events when modifying 'toggle.isChecked' in the code
  // 在代码中修改 'toggle.isChecked' 时是否触发 'toggle' 与 'checkEvents' 事件
  cc.Toggle._triggerEventInScript_isChecked = true;
}

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbWlncmF0aW9uXFx1c2VfdjIuMS0yLjIuMV9jYy5Ub2dnbGVfZXZlbnQuanMiXSwibmFtZXMiOlsiY2MiLCJUb2dnbGUiLCJfdHJpZ2dlckV2ZW50SW5TY3JpcHRfaXNDaGVja2VkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxJQUFJQSxFQUFFLENBQUNDLE1BQVAsRUFBZTtBQUNYO0FBQ0E7QUFDQUQsRUFBQUEsRUFBRSxDQUFDQyxNQUFILENBQVVDLCtCQUFWLEdBQTRDLElBQTVDO0FBQ0giLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIFRoaXMgc2NyaXB0IGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IENvY29zIENyZWF0b3IgYW5kIGlzIG9ubHkgdXNlZCBmb3IgcHJvamVjdHMgY29tcGF0aWJsZSB3aXRoIHRoZSB2Mi4xLjAg772eIDIuMi4xIHZlcnNpb24uXHJcbiAqIFlvdSBkbyBub3QgbmVlZCB0byBtYW51YWxseSBhZGQgdGhpcyBzY3JpcHQgaW4gYW55IG90aGVyIHByb2plY3QuXHJcbiAqIElmIHlvdSBkb24ndCB1c2UgY2MuVG9nZ2xlIGluIHlvdXIgcHJvamVjdCwgeW91IGNhbiBkZWxldGUgdGhpcyBzY3JpcHQgZGlyZWN0bHkuXHJcbiAqIElmIHlvdXIgcHJvamVjdCBpcyBob3N0ZWQgaW4gVkNTIHN1Y2ggYXMgZ2l0LCBzdWJtaXQgdGhpcyBzY3JpcHQgdG9nZXRoZXIuXHJcbiAqXHJcbiAqIOatpOiEmuacrOeUsSBDb2NvcyBDcmVhdG9yIOiHquWKqOeUn+aIkO+8jOS7heeUqOS6juWFvOWuuSB2Mi4xLjAgfiAyLjIuMSDniYjmnKznmoTlt6XnqIvvvIxcclxuICog5L2g5peg6ZyA5Zyo5Lu75L2V5YW25a6D6aG555uu5Lit5omL5Yqo5re75Yqg5q2k6ISa5pys44CCXHJcbiAqIOWmguaenOS9oOeahOmhueebruS4reayoeeUqOWIsCBUb2dnbGXvvIzlj6/nm7TmjqXliKDpmaTor6XohJrmnKzjgIJcclxuICog5aaC5p6c5L2g55qE6aG555uu5pyJ5omY566h5LqOIGdpdCDnrYnniYjmnKzlupPvvIzor7flsIbmraTohJrmnKzkuIDlubbkuIrkvKDjgIJcclxuICovXHJcblxyXG5pZiAoY2MuVG9nZ2xlKSB7XHJcbiAgICAvLyBXaGV0aGVyIHRvIHRyaWdnZXIgJ3RvZ2dsZScgYW5kICdjaGVja0V2ZW50cycgZXZlbnRzIHdoZW4gbW9kaWZ5aW5nICd0b2dnbGUuaXNDaGVja2VkJyBpbiB0aGUgY29kZVxyXG4gICAgLy8g5Zyo5Luj56CB5Lit5L+u5pS5ICd0b2dnbGUuaXNDaGVja2VkJyDml7bmmK/lkKbop6blj5EgJ3RvZ2dsZScg5LiOICdjaGVja0V2ZW50cycg5LqL5Lu2XHJcbiAgICBjYy5Ub2dnbGUuX3RyaWdnZXJFdmVudEluU2NyaXB0X2lzQ2hlY2tlZCA9IHRydWU7XHJcbn1cclxuIl19
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/nav_agent.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '9d4683+gaZJKIT/Pv2z85pZ', 'nav_agent');
// scripts/nav_agent.js

"use strict";

// Learn cc.Class:
//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html
//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html
// Learn Attribute:
//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html
//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html
// Learn life-cycle callbacks:
//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html
//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html
var fish_map = require("fish_map"); // 组件类,


cc.Class({
  "extends": cc.Component,
  properties: {
    // foo: {
    //     // ATTRIBUTES:
    //     default: null,        // The default value will be used only when the component attaching
    //                           // to a node for the first time
    //     type: cc.SpriteFrame, // optional, default is typeof default
    //     serializable: true,   // optional, default is true
    // },
    // bar: {
    //     get () {
    //         return this._bar;
    //     },
    //     set (value) {
    //         this._bar = value;
    //     }
    // },
    map: {
      type: fish_map,
      "default": null
    },
    speed: 100
  },
  // LIFE-CYCLE CALLBACKS:
  // onLoad () {},
  // start函数 组件开始运行之前，调用, 初始入口的好地方;
  start: function start() {
    this.run_road();
  },
  run_road: function run_road() {
    var road_set = this.map.get_road_set();
    var index = Math.random() * road_set.length;
    index = Math.floor(index);
    this.road_data = road_set[index]; // 假设从第0条;

    if (this.road_data.length < 2) {
      return;
    }

    this.is_walking = false;
    this.node.setPosition(this.road_data[0]);
    this.next_step = 1; // 下一个要走的路径点;

    if (this.road_data[0].x < this.road_data[this.road_data.length - 1].x) {
      this.node.scaleX = 1;
    } else {
      this.node.scaleX = -1;
    }

    this.walk_to_next();
  },
  get_next_point: function get_next_point() {
    if (this.next_step + 3 >= this.road_data.length) {
      return this.road_data[this.road_data.length - 1];
    }

    return this.road_data[this.next_step + 3];
  },
  walk_to_next: function walk_to_next() {
    if (this.next_step >= this.road_data.length) {
      this.is_walking = false;
      this.run_road();
      return;
    }

    this.is_walking = true;
    var src = this.node.getPosition();
    var dst = this.road_data[this.next_step];
    var dir = dst.sub(src);
    var len = dir.mag();
    this.total_time = len / this.speed;
    this.now_time = 0;
    this.vx = this.speed * dir.x / len;
    this.vy = this.speed * dir.y / len; // 旋转鱼头

    var r = Math.atan2(dir.y, dir.x); // 弧度

    var degree = r * 180 / Math.PI;
    degree = degree - 90; // 逆时针--> 顺时针

    this.node.angle = degree; // this.node.runAction(cc.rotateTo(0.5, degree));
    // end
  },
  // update 组件再游戏画面每次刷新的时候调用, update
  // dt: 是距离上一次过去刷新的时间;
  update: function update(dt) {
    if (this.is_walking === false) {
      return;
    }

    this.now_time += dt;

    if (this.now_time > this.total_time) {
      dt -= this.now_time - this.total_time;
    }

    var sx = this.vx * dt;
    var sy = this.vy * dt;
    this.node.x += sx;
    this.node.y += sy;

    if (this.now_time >= this.total_time) {
      this.next_step++;
      this.walk_to_next(); // 继续走下一个点;
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcbmF2X2FnZW50LmpzIl0sIm5hbWVzIjpbImZpc2hfbWFwIiwicmVxdWlyZSIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwibWFwIiwidHlwZSIsInNwZWVkIiwic3RhcnQiLCJydW5fcm9hZCIsInJvYWRfc2V0IiwiZ2V0X3JvYWRfc2V0IiwiaW5kZXgiLCJNYXRoIiwicmFuZG9tIiwibGVuZ3RoIiwiZmxvb3IiLCJyb2FkX2RhdGEiLCJpc193YWxraW5nIiwibm9kZSIsInNldFBvc2l0aW9uIiwibmV4dF9zdGVwIiwieCIsInNjYWxlWCIsIndhbGtfdG9fbmV4dCIsImdldF9uZXh0X3BvaW50Iiwic3JjIiwiZ2V0UG9zaXRpb24iLCJkc3QiLCJkaXIiLCJzdWIiLCJsZW4iLCJtYWciLCJ0b3RhbF90aW1lIiwibm93X3RpbWUiLCJ2eCIsInZ5IiwieSIsInIiLCJhdGFuMiIsImRlZ3JlZSIsIlBJIiwiYW5nbGUiLCJ1cGRhdGUiLCJkdCIsInN4Iiwic3kiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBSUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF0QixFQUNBOzs7QUFDQUMsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FDLElBQUFBLEdBQUcsRUFBRTtBQUNEQyxNQUFBQSxJQUFJLEVBQUVQLFFBREw7QUFFRCxpQkFBUztBQUZSLEtBaEJHO0FBcUJSUSxJQUFBQSxLQUFLLEVBQUU7QUFyQkMsR0FIUDtBQTJCTDtBQUVBO0FBQ0E7QUFDQUMsRUFBQUEsS0EvQkssbUJB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QkYsTUFBbEIsQ0F0QlcsQ0F1Qlg7QUFDQTtBQUNILEdBekZJO0FBMkZMO0FBQ0E7QUFDQUcsRUFBQUEsTUE3Rkssa0JBNkZHQyxFQTdGSCxFQTZGTztBQUNSLFFBQUcsS0FBSzFCLFVBQUwsS0FBb0IsS0FBdkIsRUFBOEI7QUFDMUI7QUFDSDs7QUFFRCxTQUFLZ0IsUUFBTCxJQUFpQlUsRUFBakI7O0FBQ0EsUUFBSSxLQUFLVixRQUFMLEdBQWdCLEtBQUtELFVBQXpCLEVBQXFDO0FBQ2pDVyxNQUFBQSxFQUFFLElBQUssS0FBS1YsUUFBTCxHQUFnQixLQUFLRCxVQUE1QjtBQUNIOztBQUVELFFBQUlZLEVBQUUsR0FBRyxLQUFLVixFQUFMLEdBQVVTLEVBQW5CO0FBQ0EsUUFBSUUsRUFBRSxHQUFHLEtBQUtWLEVBQUwsR0FBVVEsRUFBbkI7QUFFQSxTQUFLekIsSUFBTCxDQUFVRyxDQUFWLElBQWV1QixFQUFmO0FBQ0EsU0FBSzFCLElBQUwsQ0FBVWtCLENBQVYsSUFBZVMsRUFBZjs7QUFFQSxRQUFJLEtBQUtaLFFBQUwsSUFBaUIsS0FBS0QsVUFBMUIsRUFBc0M7QUFDbEMsV0FBS1osU0FBTDtBQUNBLFdBQUtHLFlBQUwsR0FGa0MsQ0FFYjtBQUN4QjtBQUNKO0FBakhJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIi8vIExlYXJuIGNjLkNsYXNzOlxyXG4vLyAgLSBbQ2hpbmVzZV0gaHR0cDovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL3poL3NjcmlwdGluZy9jbGFzcy5odG1sXHJcbi8vICAtIFtFbmdsaXNoXSBodHRwOi8vd3d3LmNvY29zMmQteC5vcmcvZG9jcy9jcmVhdG9yL2VuL3NjcmlwdGluZy9jbGFzcy5odG1sXHJcbi8vIExlYXJuIEF0dHJpYnV0ZTpcclxuLy8gIC0gW0NoaW5lc2VdIGh0dHA6Ly9kb2NzLmNvY29zLmNvbS9jcmVhdG9yL21hbnVhbC96aC9zY3JpcHRpbmcvcmVmZXJlbmNlL2F0dHJpYnV0ZXMuaHRtbFxyXG4vLyAgLSBbRW5nbGlzaF0gaHR0cDovL3d3dy5jb2NvczJkLXgub3JnL2RvY3MvY3JlYXRvci9lbi9zY3JpcHRpbmcvcmVmZXJlbmNlL2F0dHJpYnV0ZXMuaHRtbFxyXG4vLyBMZWFybiBsaWZlLWN5Y2xlIGNhbGxiYWNrczpcclxuLy8gIC0gW0NoaW5lc2VdIGh0dHA6Ly9kb2NzLmNvY29zLmNvbS9jcmVhdG9yL21hbnVhbC96aC9zY3JpcHRpbmcvbGlmZS1jeWNsZS1jYWxsYmFja3MuaHRtbFxyXG4vLyAgLSBbRW5nbGlzaF0gaHR0cDovL3d3dy5jb2NvczJkLXgub3JnL2RvY3MvY3JlYXRvci9lbi9zY3JpcHRpbmcvbGlmZS1jeWNsZS1jYWxsYmFja3MuaHRtbFxyXG5cclxudmFyIGZpc2hfbWFwID0gcmVxdWlyZShcImZpc2hfbWFwXCIpO1xyXG4vLyDnu4Tku7bnsbssXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgIC8vIEFUVFJJQlVURVM6XHJcbiAgICAgICAgLy8gICAgIGRlZmF1bHQ6IG51bGwsICAgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgICBzZXJpYWxpemFibGU6IHRydWUsICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gYmFyOiB7XHJcbiAgICAgICAgLy8gICAgIGdldCAoKSB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gdGhpcy5fYmFyO1xyXG4gICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgIC8vICAgICBzZXQgKHZhbHVlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLl9iYXIgPSB2YWx1ZTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgbWFwOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IGZpc2hfbWFwLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNwZWVkOiAxMDAsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIExJRkUtQ1lDTEUgQ0FMTEJBQ0tTOlxyXG5cclxuICAgIC8vIG9uTG9hZCAoKSB7fSxcclxuICAgIC8vIHN0YXJ05Ye95pWwIOe7hOS7tuW8gOWni+i/kOihjOS5i+WJje+8jOiwg+eUqCwg5Yid5aeL5YWl5Y+j55qE5aW95Zyw5pa5O1xyXG4gICAgc3RhcnQgKCkge1xyXG4gICAgICAgIHRoaXMucnVuX3JvYWQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgcnVuX3JvYWQoKSB7XHJcbiAgICAgICAgdmFyIHJvYWRfc2V0ID0gdGhpcy5tYXAuZ2V0X3JvYWRfc2V0KCk7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gTWF0aC5yYW5kb20oKSAqIHJvYWRfc2V0Lmxlbmd0aDtcclxuICAgICAgICBpbmRleCA9IE1hdGguZmxvb3IoaW5kZXgpO1xyXG4gICAgICAgIHRoaXMucm9hZF9kYXRhID0gcm9hZF9zZXRbaW5kZXhdOyAvLyDlgYforr7ku47nrKww5p2hO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5yb2FkX2RhdGEubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNfd2Fsa2luZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubm9kZS5zZXRQb3NpdGlvbih0aGlzLnJvYWRfZGF0YVswXSk7XHJcbiAgICAgICAgdGhpcy5uZXh0X3N0ZXAgPSAxOyAvLyDkuIvkuIDkuKropoHotbDnmoTot6/lvoTngrk7XHJcbiAgICAgICAgaWYgKHRoaXMucm9hZF9kYXRhWzBdLnggPCB0aGlzLnJvYWRfZGF0YVt0aGlzLnJvYWRfZGF0YS5sZW5ndGggLSAxXS54KSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5zY2FsZVggPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnNjYWxlWCA9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndhbGtfdG9fbmV4dCgpO1xyXG4gICAgfSwgXHJcblxyXG4gICAgZ2V0X25leHRfcG9pbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubmV4dF9zdGVwICsgMyA+PSB0aGlzLnJvYWRfZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm9hZF9kYXRhW3RoaXMucm9hZF9kYXRhLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9hZF9kYXRhW3RoaXMubmV4dF9zdGVwICsgM107XHJcbiAgICB9LFxyXG5cclxuICAgIHdhbGtfdG9fbmV4dCgpIHtcclxuICAgICAgICBpZiAodGhpcy5uZXh0X3N0ZXAgPj0gdGhpcy5yb2FkX2RhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNfd2Fsa2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJ1bl9yb2FkKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaXNfd2Fsa2luZyA9IHRydWU7XHJcbiAgICAgICAgdmFyIHNyYyA9IHRoaXMubm9kZS5nZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIHZhciBkc3QgPSB0aGlzLnJvYWRfZGF0YVt0aGlzLm5leHRfc3RlcF07XHJcbiAgICAgICAgdmFyIGRpciA9IGRzdC5zdWIoc3JjKTtcclxuICAgICAgICB2YXIgbGVuID0gZGlyLm1hZygpO1xyXG5cclxuICAgICAgICB0aGlzLnRvdGFsX3RpbWUgPSBsZW4gLyB0aGlzLnNwZWVkO1xyXG4gICAgICAgIHRoaXMubm93X3RpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMudnggPSB0aGlzLnNwZWVkICogZGlyLnggLyBsZW47XHJcbiAgICAgICAgdGhpcy52eSA9IHRoaXMuc3BlZWQgKiBkaXIueSAvIGxlbjtcclxuXHJcbiAgICAgICAgLy8g5peL6L2s6bG85aS0XHJcbiAgICAgICAgdmFyIHIgPSBNYXRoLmF0YW4yKGRpci55LCBkaXIueCk7IC8vIOW8p+W6plxyXG4gICAgICAgIHZhciBkZWdyZWUgPSByICogMTgwIC8gTWF0aC5QSTtcclxuICAgICAgICBkZWdyZWUgPSBkZWdyZWUgLSA5MDsgLy8g6YCG5pe26ZKILS0+IOmhuuaXtumSiFxyXG4gICAgICAgIHRoaXMubm9kZS5hbmdsZSA9IGRlZ3JlZTtcclxuICAgICAgICAvLyB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnJvdGF0ZVRvKDAuNSwgZGVncmVlKSk7XHJcbiAgICAgICAgLy8gZW5kXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVwZGF0ZSDnu4Tku7blho3muLjmiI/nlLvpnaLmr4/mrKHliLfmlrDnmoTml7blgJnosIPnlKgsIHVwZGF0ZVxyXG4gICAgLy8gZHQ6IOaYr+i3neemu+S4iuS4gOasoei/h+WOu+WIt+aWsOeahOaXtumXtDtcclxuICAgIHVwZGF0ZSAoZHQpIHtcclxuICAgICAgICBpZih0aGlzLmlzX3dhbGtpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubm93X3RpbWUgKz0gZHQ7XHJcbiAgICAgICAgaWYgKHRoaXMubm93X3RpbWUgPiB0aGlzLnRvdGFsX3RpbWUpIHtcclxuICAgICAgICAgICAgZHQgLT0gKHRoaXMubm93X3RpbWUgLSB0aGlzLnRvdGFsX3RpbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHN4ID0gdGhpcy52eCAqIGR0O1xyXG4gICAgICAgIHZhciBzeSA9IHRoaXMudnkgKiBkdDtcclxuXHJcbiAgICAgICAgdGhpcy5ub2RlLnggKz0gc3g7XHJcbiAgICAgICAgdGhpcy5ub2RlLnkgKz0gc3k7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm5vd190aW1lID49IHRoaXMudG90YWxfdGltZSkge1xyXG4gICAgICAgICAgICB0aGlzLm5leHRfc3RlcCArKztcclxuICAgICAgICAgICAgdGhpcy53YWxrX3RvX25leHQoKTsgLy8g57un57ut6LWw5LiL5LiA5Liq54K5O1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn0pO1xyXG4iXX0=
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/migration/use_reversed_rotateTo.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '2f9a2iNh5BFRqkjpsIsmb3f', 'use_reversed_rotateTo');
// migration/use_reversed_rotateTo.js

"use strict";

/*
 * This script is automatically generated by Cocos Creator and is only used for projects compatible with v2.1.0/v2.1.1/v2.2.1/v2.2.2 versions.
 * You do not need to manually add this script in any other project.
 * If you don't use cc.Action in your project, you can delete this script directly.
 * If your project is hosted in VCS such as git, submit this script together.
 *
 * 此脚本由 Cocos Creator 自动生成，仅用于兼容 v2.1.0/v2.1.1/v2.2.1/v2.2.2 版本的工程，
 * 你无需在任何其它项目中手动添加此脚本。
 * 如果你的项目中没用到 Action，可直接删除该脚本。
 * 如果你的项目有托管于 git 等版本库，请将此脚本一并上传。
 */
cc.RotateTo._reverse = true;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbWlncmF0aW9uXFx1c2VfcmV2ZXJzZWRfcm90YXRlVG8uanMiXSwibmFtZXMiOlsiY2MiLCJSb3RhdGVUbyIsIl9yZXZlcnNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQUEsRUFBRSxDQUFDQyxRQUFILENBQVlDLFFBQVosR0FBdUIsSUFBdkIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIFRoaXMgc2NyaXB0IGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IENvY29zIENyZWF0b3IgYW5kIGlzIG9ubHkgdXNlZCBmb3IgcHJvamVjdHMgY29tcGF0aWJsZSB3aXRoIHYyLjEuMC92Mi4xLjEvdjIuMi4xL3YyLjIuMiB2ZXJzaW9ucy5cclxuICogWW91IGRvIG5vdCBuZWVkIHRvIG1hbnVhbGx5IGFkZCB0aGlzIHNjcmlwdCBpbiBhbnkgb3RoZXIgcHJvamVjdC5cclxuICogSWYgeW91IGRvbid0IHVzZSBjYy5BY3Rpb24gaW4geW91ciBwcm9qZWN0LCB5b3UgY2FuIGRlbGV0ZSB0aGlzIHNjcmlwdCBkaXJlY3RseS5cclxuICogSWYgeW91ciBwcm9qZWN0IGlzIGhvc3RlZCBpbiBWQ1Mgc3VjaCBhcyBnaXQsIHN1Ym1pdCB0aGlzIHNjcmlwdCB0b2dldGhlci5cclxuICpcclxuICog5q2k6ISa5pys55SxIENvY29zIENyZWF0b3Ig6Ieq5Yqo55Sf5oiQ77yM5LuF55So5LqO5YW85a65IHYyLjEuMC92Mi4xLjEvdjIuMi4xL3YyLjIuMiDniYjmnKznmoTlt6XnqIvvvIxcclxuICog5L2g5peg6ZyA5Zyo5Lu75L2V5YW25a6D6aG555uu5Lit5omL5Yqo5re75Yqg5q2k6ISa5pys44CCXHJcbiAqIOWmguaenOS9oOeahOmhueebruS4reayoeeUqOWIsCBBY3Rpb27vvIzlj6/nm7TmjqXliKDpmaTor6XohJrmnKzjgIJcclxuICog5aaC5p6c5L2g55qE6aG555uu5pyJ5omY566h5LqOIGdpdCDnrYnniYjmnKzlupPvvIzor7flsIbmraTohJrmnKzkuIDlubbkuIrkvKDjgIJcclxuICovXHJcblxyXG5jYy5Sb3RhdGVUby5fcmV2ZXJzZSA9IHRydWU7XHJcbiJdfQ==
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/migration/use_reversed_rotateBy.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '3a5b2AArqRJrbqEY3ZSycyC', 'use_reversed_rotateBy');
// migration/use_reversed_rotateBy.js

"use strict";

/*
 * This script is automatically generated by Cocos Creator and is only used for projects compatible with v2.1.0/v2.1.1/v2.3.0/v2.3.1/v2.3.2 versions.
 * You do not need to manually add this script in any other project.
 * If you don't use cc.Action in your project, you can delete this script directly.
 * If your project is hosted in VCS such as git, submit this script together.
 *
 * 此脚本由 Cocos Creator 自动生成，仅用于兼容 v2.1.0/v2.1.1/v2.3.0/v2.3.1/v2.3.2 版本的工程，
 * 你无需在任何其它项目中手动添加此脚本。
 * 如果你的项目中没用到 Action，可直接删除该脚本。
 * 如果你的项目有托管于 git 等版本库，请将此脚本一并上传。
 */
cc.RotateBy._reverse = true;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbWlncmF0aW9uXFx1c2VfcmV2ZXJzZWRfcm90YXRlQnkuanMiXSwibmFtZXMiOlsiY2MiLCJSb3RhdGVCeSIsIl9yZXZlcnNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQUEsRUFBRSxDQUFDQyxRQUFILENBQVlDLFFBQVosR0FBdUIsSUFBdkIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIFRoaXMgc2NyaXB0IGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IENvY29zIENyZWF0b3IgYW5kIGlzIG9ubHkgdXNlZCBmb3IgcHJvamVjdHMgY29tcGF0aWJsZSB3aXRoIHYyLjEuMC92Mi4xLjEvdjIuMy4wL3YyLjMuMS92Mi4zLjIgdmVyc2lvbnMuXHJcbiAqIFlvdSBkbyBub3QgbmVlZCB0byBtYW51YWxseSBhZGQgdGhpcyBzY3JpcHQgaW4gYW55IG90aGVyIHByb2plY3QuXHJcbiAqIElmIHlvdSBkb24ndCB1c2UgY2MuQWN0aW9uIGluIHlvdXIgcHJvamVjdCwgeW91IGNhbiBkZWxldGUgdGhpcyBzY3JpcHQgZGlyZWN0bHkuXHJcbiAqIElmIHlvdXIgcHJvamVjdCBpcyBob3N0ZWQgaW4gVkNTIHN1Y2ggYXMgZ2l0LCBzdWJtaXQgdGhpcyBzY3JpcHQgdG9nZXRoZXIuXHJcbiAqXHJcbiAqIOatpOiEmuacrOeUsSBDb2NvcyBDcmVhdG9yIOiHquWKqOeUn+aIkO+8jOS7heeUqOS6juWFvOWuuSB2Mi4xLjAvdjIuMS4xL3YyLjMuMC92Mi4zLjEvdjIuMy4yIOeJiOacrOeahOW3peeoi++8jFxyXG4gKiDkvaDml6DpnIDlnKjku7vkvZXlhbblroPpobnnm67kuK3miYvliqjmt7vliqDmraTohJrmnKzjgIJcclxuICog5aaC5p6c5L2g55qE6aG555uu5Lit5rKh55So5YiwIEFjdGlvbu+8jOWPr+ebtOaOpeWIoOmZpOivpeiEmuacrOOAglxyXG4gKiDlpoLmnpzkvaDnmoTpobnnm67mnInmiZjnrqHkuo4gZ2l0IOetieeJiOacrOW6k++8jOivt+WwhuatpOiEmuacrOS4gOW5tuS4iuS8oOOAglxyXG4gKi9cclxuXHJcbmNjLlJvdGF0ZUJ5Ll9yZXZlcnNlID0gdHJ1ZTtcclxuIl19
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/cannon.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'acbe68HfShFYbhiWLurk/Li', 'cannon');
// scripts/cannon.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    target: {
      type: cc.Node,
      "default": null
    },
    bullet_prefab: {
      type: cc.Prefab,
      "default": null
    },
    bullet_root: {
      type: cc.Node,
      "default": null
    },
    shoot_time: 0.2 // 每隔0.2秒发射一颗;

  },
  start: function start() {
    // this this.node ---> 
    this.now_time = this.shoot_time;
  },
  // 发射一颗子弹, 
  do_shoot: function do_shoot() {
    if (this.target === null) {
      return;
    }

    var dst = this.target.getComponent("nav_agent").get_next_point(); // var dst = this.target.getPosition();

    var src = this.node.getPosition();
    var dir = dst.sub(src); // dir 炮台的方向;

    var r = Math.atan2(dir.y, dir.x);
    var degree = r * 180 / Math.PI;
    var bullet = cc.instantiate(this.bullet_prefab);
    this.bullet_root.addChild(bullet);
    bullet.setPosition(src);
    bullet.getComponent("bullet").shoot(degree, 800);
  },
  update: function update(dt) {
    if (this.target === null) {
      return;
    } // 数学不好能否学会;  初中数学, 


    var src = this.node.getPosition(); // 炮的位置;

    var dst = this.target.getPosition();
    var dir = dst.sub(src); // dir 炮台的方向;

    var r = Math.atan2(dir.y, dir.x);
    var degree = r * 180 / Math.PI;
    this.node.angle = degree - 90;
    this.now_time += dt;

    if (this.now_time >= this.shoot_time) {
      this.now_time = 0;
      this.do_shoot();
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcY2Fubm9uLmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwidGFyZ2V0IiwidHlwZSIsIk5vZGUiLCJidWxsZXRfcHJlZmFiIiwiUHJlZmFiIiwiYnVsbGV0X3Jvb3QiLCJzaG9vdF90aW1lIiwic3RhcnQiLCJub3dfdGltZSIsImRvX3Nob290IiwiZHN0IiwiZ2V0Q29tcG9uZW50IiwiZ2V0X25leHRfcG9pbnQiLCJzcmMiLCJub2RlIiwiZ2V0UG9zaXRpb24iLCJkaXIiLCJzdWIiLCJyIiwiTWF0aCIsImF0YW4yIiwieSIsIngiLCJkZWdyZWUiLCJQSSIsImJ1bGxldCIsImluc3RhbnRpYXRlIiwiYWRkQ2hpbGQiLCJzZXRQb3NpdGlvbiIsInNob290IiwidXBkYXRlIiwiZHQiLCJhbmdsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLE1BQU0sRUFBRTtBQUNKQyxNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ00sSUFETDtBQUVKLGlCQUFTO0FBRkwsS0FEQTtBQU1SQyxJQUFBQSxhQUFhLEVBQUU7QUFDWEYsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNRLE1BREU7QUFFWCxpQkFBUztBQUZFLEtBTlA7QUFXUkMsSUFBQUEsV0FBVyxFQUFFO0FBQ1RKLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTSxJQURBO0FBRVQsaUJBQVM7QUFGQSxLQVhMO0FBZ0JSSSxJQUFBQSxVQUFVLEVBQUUsR0FoQkosQ0FnQlM7O0FBaEJULEdBSFA7QUFzQkxDLEVBQUFBLEtBdEJLLG1CQXNCSTtBQUNMO0FBQ0EsU0FBS0MsUUFBTCxHQUFnQixLQUFLRixVQUFyQjtBQUNILEdBekJJO0FBMkJMO0FBQ0FHLEVBQUFBLFFBNUJLLHNCQTRCTTtBQUNQLFFBQUksS0FBS1QsTUFBTCxLQUFnQixJQUFwQixFQUEwQjtBQUN0QjtBQUNIOztBQUVELFFBQUlVLEdBQUcsR0FBRyxLQUFLVixNQUFMLENBQVlXLFlBQVosQ0FBeUIsV0FBekIsRUFBc0NDLGNBQXRDLEVBQVYsQ0FMTyxDQU1QOztBQUNBLFFBQUlDLEdBQUcsR0FBRyxLQUFLQyxJQUFMLENBQVVDLFdBQVYsRUFBVjtBQUVBLFFBQUlDLEdBQUcsR0FBR04sR0FBRyxDQUFDTyxHQUFKLENBQVFKLEdBQVIsQ0FBVixDQVRPLENBU2lCOztBQUN4QixRQUFJSyxDQUFDLEdBQUdDLElBQUksQ0FBQ0MsS0FBTCxDQUFXSixHQUFHLENBQUNLLENBQWYsRUFBa0JMLEdBQUcsQ0FBQ00sQ0FBdEIsQ0FBUjtBQUNBLFFBQUlDLE1BQU0sR0FBR0wsQ0FBQyxHQUFHLEdBQUosR0FBVUMsSUFBSSxDQUFDSyxFQUE1QjtBQUVBLFFBQUlDLE1BQU0sR0FBRzdCLEVBQUUsQ0FBQzhCLFdBQUgsQ0FBZSxLQUFLdkIsYUFBcEIsQ0FBYjtBQUNBLFNBQUtFLFdBQUwsQ0FBaUJzQixRQUFqQixDQUEwQkYsTUFBMUI7QUFDQUEsSUFBQUEsTUFBTSxDQUFDRyxXQUFQLENBQW1CZixHQUFuQjtBQUVBWSxJQUFBQSxNQUFNLENBQUNkLFlBQVAsQ0FBb0IsUUFBcEIsRUFBOEJrQixLQUE5QixDQUFvQ04sTUFBcEMsRUFBNEMsR0FBNUM7QUFDSCxHQTlDSTtBQWdETE8sRUFBQUEsTUFoREssa0JBZ0RHQyxFQWhESCxFQWdETztBQUNSLFFBQUksS0FBSy9CLE1BQUwsS0FBZ0IsSUFBcEIsRUFBMEI7QUFDdEI7QUFDSCxLQUhPLENBS1I7OztBQUNBLFFBQUlhLEdBQUcsR0FBRyxLQUFLQyxJQUFMLENBQVVDLFdBQVYsRUFBVixDQU5RLENBTTJCOztBQUNuQyxRQUFJTCxHQUFHLEdBQUcsS0FBS1YsTUFBTCxDQUFZZSxXQUFaLEVBQVY7QUFDQSxRQUFJQyxHQUFHLEdBQUdOLEdBQUcsQ0FBQ08sR0FBSixDQUFRSixHQUFSLENBQVYsQ0FSUSxDQVFnQjs7QUFDeEIsUUFBSUssQ0FBQyxHQUFHQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0osR0FBRyxDQUFDSyxDQUFmLEVBQWtCTCxHQUFHLENBQUNNLENBQXRCLENBQVI7QUFDQSxRQUFJQyxNQUFNLEdBQUdMLENBQUMsR0FBRyxHQUFKLEdBQVVDLElBQUksQ0FBQ0ssRUFBNUI7QUFFQSxTQUFLVixJQUFMLENBQVVrQixLQUFWLEdBQWtCVCxNQUFNLEdBQUcsRUFBM0I7QUFFQSxTQUFLZixRQUFMLElBQWlCdUIsRUFBakI7O0FBQ0EsUUFBSSxLQUFLdkIsUUFBTCxJQUFpQixLQUFLRixVQUExQixFQUFzQztBQUNsQyxXQUFLRSxRQUFMLEdBQWdCLENBQWhCO0FBQ0EsV0FBS0MsUUFBTDtBQUNIO0FBQ0o7QUFuRUksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYnVsbGV0X3ByZWZhYjoge1xyXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYnVsbGV0X3Jvb3Q6IHtcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzaG9vdF90aW1lOiAwLjIsIC8vIOavj+malDAuMuenkuWPkeWwhOS4gOmilztcclxuICAgIH0sXHJcblxyXG4gICAgc3RhcnQgKCkge1xyXG4gICAgICAgIC8vIHRoaXMgdGhpcy5ub2RlIC0tLT4gXHJcbiAgICAgICAgdGhpcy5ub3dfdGltZSA9IHRoaXMuc2hvb3RfdGltZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8g5Y+R5bCE5LiA6aKX5a2Q5by5LCBcclxuICAgIGRvX3Nob290KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZHN0ID0gdGhpcy50YXJnZXQuZ2V0Q29tcG9uZW50KFwibmF2X2FnZW50XCIpLmdldF9uZXh0X3BvaW50KCk7XHJcbiAgICAgICAgLy8gdmFyIGRzdCA9IHRoaXMudGFyZ2V0LmdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgdmFyIHNyYyA9IHRoaXMubm9kZS5nZXRQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICB2YXIgZGlyID0gZHN0LnN1YihzcmMpOyAvLyBkaXIg54Ku5Y+w55qE5pa55ZCRO1xyXG4gICAgICAgIHZhciByID0gTWF0aC5hdGFuMihkaXIueSwgZGlyLngpOyBcclxuICAgICAgICB2YXIgZGVncmVlID0gciAqIDE4MCAvIE1hdGguUEk7IFxyXG5cclxuICAgICAgICB2YXIgYnVsbGV0ID0gY2MuaW5zdGFudGlhdGUodGhpcy5idWxsZXRfcHJlZmFiKTtcclxuICAgICAgICB0aGlzLmJ1bGxldF9yb290LmFkZENoaWxkKGJ1bGxldCk7XHJcbiAgICAgICAgYnVsbGV0LnNldFBvc2l0aW9uKHNyYyk7XHJcblxyXG4gICAgICAgIGJ1bGxldC5nZXRDb21wb25lbnQoXCJidWxsZXRcIikuc2hvb3QoZGVncmVlLCA4MDApO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGUgKGR0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOaVsOWtpuS4jeWlveiDveWQpuWtpuS8mjsgIOWIneS4reaVsOWtpiwgXHJcbiAgICAgICAgdmFyIHNyYyA9IHRoaXMubm9kZS5nZXRQb3NpdGlvbigpOyAvLyDngq7nmoTkvY3nva47XHJcbiAgICAgICAgdmFyIGRzdCA9IHRoaXMudGFyZ2V0LmdldFBvc2l0aW9uKCk7IFxyXG4gICAgICAgIHZhciBkaXIgPSBkc3Quc3ViKHNyYyk7IC8vIGRpciDngq7lj7DnmoTmlrnlkJE7XHJcbiAgICAgICAgdmFyIHIgPSBNYXRoLmF0YW4yKGRpci55LCBkaXIueCk7IFxyXG4gICAgICAgIHZhciBkZWdyZWUgPSByICogMTgwIC8gTWF0aC5QSTsgXHJcblxyXG4gICAgICAgIHRoaXMubm9kZS5hbmdsZSA9IGRlZ3JlZSAtIDkwO1xyXG5cclxuICAgICAgICB0aGlzLm5vd190aW1lICs9IGR0O1xyXG4gICAgICAgIGlmICh0aGlzLm5vd190aW1lID49IHRoaXMuc2hvb3RfdGltZSkge1xyXG4gICAgICAgICAgICB0aGlzLm5vd190aW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5kb19zaG9vdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn0pO1xyXG4iXX0=
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/bullet.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'abc9cdcjp1IE4Q59dTt8ZjM', 'bullet');
// scripts/bullet.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    degree: 45,
    speed: 600,
    play_onload: false
  },
  // LIFE-CYCLE CALLBACKS:
  // onLoad () {},
  start: function start() {
    if (this.play_onload) {
      this.shoot(this.degree, this.speed);
    }
  },
  shoot: function shoot(degree, speed) {
    this.degree = degree;
    this.speed = speed;
    var r = this.degree / 180 * Math.PI;
    this.vx = this.speed * Math.cos(r);
    this.vy = this.speed * Math.sin(r);
    this.node.angle = this.degree - 90;
  },
  update: function update(dt) {
    var sx = this.vx * dt;
    var sy = this.vy * dt;
    this.node.x += sx;
    this.node.y += sy;

    if (this.node.x < -cc.winSize.width * 0.5 || this.node.x > cc.winSize.width * 0.5 || this.node.y < -cc.winSize.height * 0.5 || this.node.y > cc.winSize.height * 0.5) {
      console.log("delete");
      this.node.removeFromParent();
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcYnVsbGV0LmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiZGVncmVlIiwic3BlZWQiLCJwbGF5X29ubG9hZCIsInN0YXJ0Iiwic2hvb3QiLCJyIiwiTWF0aCIsIlBJIiwidngiLCJjb3MiLCJ2eSIsInNpbiIsIm5vZGUiLCJhbmdsZSIsInVwZGF0ZSIsImR0Iiwic3giLCJzeSIsIngiLCJ5Iiwid2luU2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwiY29uc29sZSIsImxvZyIsInJlbW92ZUZyb21QYXJlbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxNQUFNLEVBQUUsRUFEQTtBQUVSQyxJQUFBQSxLQUFLLEVBQUUsR0FGQztBQUlSQyxJQUFBQSxXQUFXLEVBQUU7QUFKTCxHQUhQO0FBVUw7QUFFQTtBQUVBQyxFQUFBQSxLQWRLLG1CQWNJO0FBRUwsUUFBSSxLQUFLRCxXQUFULEVBQXNCO0FBQ2xCLFdBQUtFLEtBQUwsQ0FBVyxLQUFLSixNQUFoQixFQUF3QixLQUFLQyxLQUE3QjtBQUNIO0FBQ0osR0FuQkk7QUFxQkxHLEVBQUFBLEtBckJLLGlCQXFCQ0osTUFyQkQsRUFxQlNDLEtBckJULEVBcUJnQjtBQUNqQixTQUFLRCxNQUFMLEdBQWNBLE1BQWQ7QUFDQSxTQUFLQyxLQUFMLEdBQWFBLEtBQWI7QUFFQSxRQUFJSSxDQUFDLEdBQUksS0FBS0wsTUFBTCxHQUFjLEdBQWYsR0FBc0JNLElBQUksQ0FBQ0MsRUFBbkM7QUFDQSxTQUFLQyxFQUFMLEdBQVUsS0FBS1AsS0FBTCxHQUFhSyxJQUFJLENBQUNHLEdBQUwsQ0FBU0osQ0FBVCxDQUF2QjtBQUNBLFNBQUtLLEVBQUwsR0FBVSxLQUFLVCxLQUFMLEdBQWFLLElBQUksQ0FBQ0ssR0FBTCxDQUFTTixDQUFULENBQXZCO0FBRUEsU0FBS08sSUFBTCxDQUFVQyxLQUFWLEdBQWtCLEtBQUtiLE1BQUwsR0FBYyxFQUFoQztBQUNILEdBOUJJO0FBZ0NMYyxFQUFBQSxNQWhDSyxrQkFnQ0dDLEVBaENILEVBZ0NPO0FBQ1IsUUFBSUMsRUFBRSxHQUFHLEtBQUtSLEVBQUwsR0FBVU8sRUFBbkI7QUFDQSxRQUFJRSxFQUFFLEdBQUcsS0FBS1AsRUFBTCxHQUFVSyxFQUFuQjtBQUVBLFNBQUtILElBQUwsQ0FBVU0sQ0FBVixJQUFlRixFQUFmO0FBQ0EsU0FBS0osSUFBTCxDQUFVTyxDQUFWLElBQWVGLEVBQWY7O0FBRUEsUUFBSSxLQUFLTCxJQUFMLENBQVVNLENBQVYsR0FBYyxDQUFDdEIsRUFBRSxDQUFDd0IsT0FBSCxDQUFXQyxLQUFaLEdBQW9CLEdBQWxDLElBQ0EsS0FBS1QsSUFBTCxDQUFVTSxDQUFWLEdBQWN0QixFQUFFLENBQUN3QixPQUFILENBQVdDLEtBQVgsR0FBbUIsR0FEakMsSUFFQSxLQUFLVCxJQUFMLENBQVVPLENBQVYsR0FBYyxDQUFDdkIsRUFBRSxDQUFDd0IsT0FBSCxDQUFXRSxNQUFaLEdBQXFCLEdBRm5DLElBR0EsS0FBS1YsSUFBTCxDQUFVTyxDQUFWLEdBQWN2QixFQUFFLENBQUN3QixPQUFILENBQVdFLE1BQVgsR0FBb0IsR0FIdEMsRUFHMkM7QUFDdkNDLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFFBQVo7QUFDQSxXQUFLWixJQUFMLENBQVVhLGdCQUFWO0FBQ0g7QUFDSjtBQTlDSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGRlZ3JlZTogNDUsXHJcbiAgICAgICAgc3BlZWQ6IDYwMCxcclxuXHJcbiAgICAgICAgcGxheV9vbmxvYWQ6IGZhbHNlLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBMSUZFLUNZQ0xFIENBTExCQUNLUzpcclxuXHJcbiAgICAvLyBvbkxvYWQgKCkge30sXHJcblxyXG4gICAgc3RhcnQgKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wbGF5X29ubG9hZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob290KHRoaXMuZGVncmVlLCB0aGlzLnNwZWVkKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNob290KGRlZ3JlZSwgc3BlZWQpIHtcclxuICAgICAgICB0aGlzLmRlZ3JlZSA9IGRlZ3JlZTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcblxyXG4gICAgICAgIHZhciByID0gKHRoaXMuZGVncmVlIC8gMTgwKSAqIE1hdGguUEk7XHJcbiAgICAgICAgdGhpcy52eCA9IHRoaXMuc3BlZWQgKiBNYXRoLmNvcyhyKTtcclxuICAgICAgICB0aGlzLnZ5ID0gdGhpcy5zcGVlZCAqIE1hdGguc2luKHIpO1xyXG5cclxuICAgICAgICB0aGlzLm5vZGUuYW5nbGUgPSB0aGlzLmRlZ3JlZSAtIDkwO1xyXG4gICAgfSwgXHJcblxyXG4gICAgdXBkYXRlIChkdCkge1xyXG4gICAgICAgIHZhciBzeCA9IHRoaXMudnggKiBkdDtcclxuICAgICAgICB2YXIgc3kgPSB0aGlzLnZ5ICogZHQ7XHJcblxyXG4gICAgICAgIHRoaXMubm9kZS54ICs9IHN4O1xyXG4gICAgICAgIHRoaXMubm9kZS55ICs9IHN5O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ub2RlLnggPCAtY2Mud2luU2l6ZS53aWR0aCAqIDAuNSB8fCBcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnggPiBjYy53aW5TaXplLndpZHRoICogMC41IHx8XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS55IDwgLWNjLndpblNpemUuaGVpZ2h0ICogMC41IHx8XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS55ID4gY2Mud2luU2l6ZS5oZWlnaHQgKiAwLjUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJkZWxldGVcIik7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufSk7XHJcbiJdfQ==
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/fish_map.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'ded6co+rIZHOJQSXvTgBDp/', 'fish_map');
// scripts/fish_map.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    // foo: {
    //    default: null,      // The default value will be used only when the component attaching
    //                           to a node for the first time
    //    url: cc.Texture2D,  // optional, default is typeof default
    //    serializable: true, // optional, default is true
    //    visible: true,      // optional, default is true
    //    displayName: 'Foo', // optional
    //    readonly: false,    // optional, default is false
    // },
    // ...
    is_debug: false
  },
  // use this for initialization
  onLoad: function onLoad() {
    this.anim_com = this.node.getComponent(cc.Animation);
    var clips = this.anim_com.getClips();
    var clip = clips[0];
    this.graphics = this.node.addComponent(cc.Graphics);
    this.graphics.fillColor = cc.color(255, 0, 0, 255);
    var paths = clip.curveData.paths; // console.log(paths);

    this.road_data_set = [];
    var k;

    for (k in paths) {
      var road_data = paths[k].props.position;
      this.gen_path_data(road_data);
    }

    if (this.is_debug) {
      this.draw_roads();
    }
  },
  start: function start() {
    /*
    // test()
    var actor = cc.find("UI_ROOT/map_root/ememy_gorilla").getComponent("actor");
    // actor.gen_at_road(this.road_data_set[0]);
    
    actor = cc.find("UI_ROOT/map_root/ememy_small2").getComponent("actor");
    // actor.gen_at_road(this.road_data_set[1]);
    
    actor = cc.find("UI_ROOT/map_root/ememy_small3").getComponent("actor");
    actor.gen_at_road(this.road_data_set[2]);
    */
    // end 
  },
  get_road_set: function get_road_set() {
    return this.road_data_set;
  },
  gen_path_data: function gen_path_data(road_data) {
    var ctrl1 = null;
    var start_point = null;
    var end_point = null;
    var ctrl2 = null;
    var road_curve_path = []; // [start_point, ctrl1, ctrl2, end_point],

    for (var i = 0; i < road_data.length; i++) {
      var key_frame = road_data[i];

      if (ctrl1 !== null) {
        road_curve_path.push([start_point, ctrl1, ctrl1, cc.v2(key_frame.value[0], key_frame.value[1])]);
      }

      start_point = cc.v2(key_frame.value[0], key_frame.value[1]);

      for (var j = 0; j < key_frame.motionPath.length; j++) {
        var end_point = cc.v2(key_frame.motionPath[j][0], key_frame.motionPath[j][1]);
        ctrl2 = cc.v2(key_frame.motionPath[j][2], key_frame.motionPath[j][3]);

        if (ctrl1 === null) {
          ctrl1 = ctrl2;
        } // 贝塞尔曲线 start_point, ctrl1, ctrl2, end_point,


        road_curve_path.push([start_point, ctrl1, ctrl2, end_point]);
        ctrl1 = cc.v2(key_frame.motionPath[j][4], key_frame.motionPath[j][5]);
        start_point = end_point;
      }
    }

    console.log(road_curve_path);
    var one_road = [road_curve_path[0][0]];

    for (var index = 0; index < road_curve_path.length; index++) {
      start_point = road_curve_path[index][0];
      ctrl1 = road_curve_path[index][1];
      ctrl2 = road_curve_path[index][2];
      end_point = road_curve_path[index][3];
      var len = this.bezier_length(start_point, ctrl1, ctrl2, end_point);
      var OFFSET = 16;
      var count = len / OFFSET;
      count = Math.floor(count);
      var t_delta = 1 / count;
      var t = t_delta;

      for (var i = 0; i < count; i++) {
        var x = start_point.x * (1 - t) * (1 - t) * (1 - t) + 3 * ctrl1.x * t * (1 - t) * (1 - t) + 3 * ctrl2.x * t * t * (1 - t) + end_point.x * t * t * t;
        var y = start_point.y * (1 - t) * (1 - t) * (1 - t) + 3 * ctrl1.y * t * (1 - t) * (1 - t) + 3 * ctrl2.y * t * t * (1 - t) + end_point.y * t * t * t;
        one_road.push(cc.v2(x, y));
        t += t_delta;
      }
    }

    console.log(one_road);
    this.road_data_set.push(one_road);
  },
  draw_roads: function draw_roads(path) {
    this.graphics.clear();

    for (var j = 0; j < this.road_data_set.length; j++) {
      var path = this.road_data_set[j];

      for (var i = 0; i < path.length; i++) {
        this.graphics.moveTo(path[i].x - 2, path[i].y + 2);
        this.graphics.lineTo(path[i].x - 2, path[i].y - 2);
        this.graphics.lineTo(path[i].x + 2, path[i].y - 2);
        this.graphics.lineTo(path[i].x + 2, path[i].y + 2);
        this.graphics.close(); // 组成一个封闭的路径
      }
    } // 画先，填充;
    // this.graphics.stroke();


    this.graphics.fill();
  },
  bezier_length: function bezier_length(start_point, ctrl1, ctrl2, end_point) {
    // t [0, 1] t 分成20等分 1 / 20 = 0.05
    var prev_point = start_point;
    var length = 0;
    var t = 0.05;

    for (var i = 0; i < 20; i++) {
      var x = start_point.x * (1 - t) * (1 - t) * (1 - t) + 3 * ctrl1.x * t * (1 - t) * (1 - t) + 3 * ctrl2.x * t * t * (1 - t) + end_point.x * t * t * t;
      var y = start_point.y * (1 - t) * (1 - t) * (1 - t) + 3 * ctrl1.y * t * (1 - t) * (1 - t) + 3 * ctrl2.y * t * t * (1 - t) + end_point.y * t * t * t;
      var now_point = cc.v2(x, y); // var dir = cc.pSub(now_point, prev_point);

      var dir = now_point.sub(prev_point);
      prev_point = now_point;
      length += dir.mag();
      t += 0.05;
    }

    return length;
  } // called every frame, uncomment this function to activate update callback
  // update: function (dt) {
  // },

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcZmlzaF9tYXAuanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJpc19kZWJ1ZyIsIm9uTG9hZCIsImFuaW1fY29tIiwibm9kZSIsImdldENvbXBvbmVudCIsIkFuaW1hdGlvbiIsImNsaXBzIiwiZ2V0Q2xpcHMiLCJjbGlwIiwiZ3JhcGhpY3MiLCJhZGRDb21wb25lbnQiLCJHcmFwaGljcyIsImZpbGxDb2xvciIsImNvbG9yIiwicGF0aHMiLCJjdXJ2ZURhdGEiLCJyb2FkX2RhdGFfc2V0IiwiayIsInJvYWRfZGF0YSIsInByb3BzIiwicG9zaXRpb24iLCJnZW5fcGF0aF9kYXRhIiwiZHJhd19yb2FkcyIsInN0YXJ0IiwiZ2V0X3JvYWRfc2V0IiwiY3RybDEiLCJzdGFydF9wb2ludCIsImVuZF9wb2ludCIsImN0cmwyIiwicm9hZF9jdXJ2ZV9wYXRoIiwiaSIsImxlbmd0aCIsImtleV9mcmFtZSIsInB1c2giLCJ2MiIsInZhbHVlIiwiaiIsIm1vdGlvblBhdGgiLCJjb25zb2xlIiwibG9nIiwib25lX3JvYWQiLCJpbmRleCIsImxlbiIsImJlemllcl9sZW5ndGgiLCJPRkZTRVQiLCJjb3VudCIsIk1hdGgiLCJmbG9vciIsInRfZGVsdGEiLCJ0IiwieCIsInkiLCJwYXRoIiwiY2xlYXIiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZSIsImZpbGwiLCJwcmV2X3BvaW50Iiwibm93X3BvaW50IiwiZGlyIiwic3ViIiwibWFnIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsU0FEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUU7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBQyxJQUFBQSxRQUFRLEVBQUU7QUFYRixHQUhQO0FBaUJMO0FBQ0FDLEVB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VixHQUFjRCxDQUFkLEdBQWtCQSxDQUFsQixHQUFzQkEsQ0FBbEo7QUFDQSxVQUFJRSxDQUFDLEdBQUd6QixXQUFXLENBQUN5QixDQUFaLElBQWlCLElBQUlGLENBQXJCLEtBQTJCLElBQUlBLENBQS9CLEtBQXFDLElBQUlBLENBQXpDLElBQThDLElBQUl4QixLQUFLLENBQUMwQixDQUFWLEdBQWNGLENBQWQsSUFBbUIsSUFBSUEsQ0FBdkIsS0FBNkIsSUFBSUEsQ0FBakMsQ0FBOUMsR0FBb0YsSUFBSXJCLEtBQUssQ0FBQ3VCLENBQVYsR0FBY0YsQ0FBZCxHQUFrQkEsQ0FBbEIsSUFBdUIsSUFBSUEsQ0FBM0IsQ0FBcEYsR0FBb0h0QixTQUFTLENBQUN3QixDQUFWLEdBQWNGLENBQWQsR0FBa0JBLENBQWxCLEdBQXNCQSxDQUFsSjtBQUNBLFVBQUlVLFNBQVMsR0FBRy9ELEVBQUUsQ0FBQ3NDLEVBQUgsQ0FBTWdCLENBQU4sRUFBU0MsQ0FBVCxDQUFoQixDQUh5QixDQUl6Qjs7QUFDQSxVQUFJUyxHQUFHLEdBQUdELFNBQVMsQ0FBQ0UsR0FBVixDQUFjSCxVQUFkLENBQVY7QUFDQUEsTUFBQUEsVUFBVSxHQUFHQyxTQUFiO0FBQ0E1QixNQUFBQSxNQUFNLElBQUk2QixHQUFHLENBQUNFLEdBQUosRUFBVjtBQUVBYixNQUFBQSxDQUFDLElBQUksSUFBTDtBQUNIOztBQUNELFdBQU9sQixNQUFQO0FBQ0gsR0ExSkksQ0EySkw7QUFDQTtBQUVBOztBQTlKSyxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgICAgIGlzX2RlYnVnOiBmYWxzZSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmFuaW1fY29tID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pO1xyXG4gICAgICAgIHZhciBjbGlwcyA9IHRoaXMuYW5pbV9jb20uZ2V0Q2xpcHMoKTtcclxuICAgICAgICB2YXIgY2xpcCA9IGNsaXBzWzBdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZ3JhcGhpY3MgPSB0aGlzLm5vZGUuYWRkQ29tcG9uZW50KGNjLkdyYXBoaWNzKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNzLmZpbGxDb2xvciA9IGNjLmNvbG9yKDI1NSwgMCwgMCwgMjU1KTtcclxuICAgICAgICB2YXIgcGF0aHMgPSBjbGlwLmN1cnZlRGF0YS5wYXRocztcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXRocyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5yb2FkX2RhdGFfc2V0ID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGs7XHJcbiAgICAgICAgZm9yIChrIGluIHBhdGhzKSB7XHJcbiAgICAgICAgICAgIHZhciByb2FkX2RhdGEgPSBwYXRoc1trXS5wcm9wcy5wb3NpdGlvbjtcclxuICAgICAgICAgICAgdGhpcy5nZW5fcGF0aF9kYXRhKHJvYWRfZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc19kZWJ1Zykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdfcm9hZHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzdGFydDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICAvLyB0ZXN0KClcclxuICAgICAgICB2YXIgYWN0b3IgPSBjYy5maW5kKFwiVUlfUk9PVC9tYXBfcm9vdC9lbWVteV9nb3JpbGxhXCIpLmdldENvbXBvbmVudChcImFjdG9yXCIpO1xyXG4gICAgICAgIC8vIGFjdG9yLmdlbl9hdF9yb2FkKHRoaXMucm9hZF9kYXRhX3NldFswXSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYWN0b3IgPSBjYy5maW5kKFwiVUlfUk9PVC9tYXBfcm9vdC9lbWVteV9zbWFsbDJcIikuZ2V0Q29tcG9uZW50KFwiYWN0b3JcIik7XHJcbiAgICAgICAgLy8gYWN0b3IuZ2VuX2F0X3JvYWQodGhpcy5yb2FkX2RhdGFfc2V0WzFdKTtcclxuICAgICAgICBcclxuICAgICAgICBhY3RvciA9IGNjLmZpbmQoXCJVSV9ST09UL21hcF9yb290L2VtZW15X3NtYWxsM1wiKS5nZXRDb21wb25lbnQoXCJhY3RvclwiKTtcclxuICAgICAgICBhY3Rvci5nZW5fYXRfcm9hZCh0aGlzLnJvYWRfZGF0YV9zZXRbMl0pO1xyXG4gICAgICAgICovXHJcbiAgICAgICAgLy8gZW5kIFxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgZ2V0X3JvYWRfc2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb2FkX2RhdGFfc2V0O1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgZ2VuX3BhdGhfZGF0YTogZnVuY3Rpb24ocm9hZF9kYXRhKSB7XHJcbiAgICAgICAgdmFyIGN0cmwxID0gbnVsbDtcclxuICAgICAgICB2YXIgc3RhcnRfcG9pbnQgPSBudWxsO1xyXG4gICAgICAgIHZhciBlbmRfcG9pbnQgPSBudWxsO1xyXG4gICAgICAgIHZhciBjdHJsMiA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHJvYWRfY3VydmVfcGF0aCA9IFtdOyAvLyBbc3RhcnRfcG9pbnQsIGN0cmwxLCBjdHJsMiwgZW5kX3BvaW50XSxcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcm9hZF9kYXRhLmxlbmd0aDsgaSArKykge1xyXG4gICAgICAgICAgICB2YXIga2V5X2ZyYW1lID0gcm9hZF9kYXRhW2ldO1xyXG4gICAgICAgICAgICBpZiAoY3RybDEgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJvYWRfY3VydmVfcGF0aC5wdXNoKFtzdGFydF9wb2ludCwgY3RybDEsIGN0cmwxLCBjYy52MihrZXlfZnJhbWUudmFsdWVbMF0sIGtleV9mcmFtZS52YWx1ZVsxXSldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3RhcnRfcG9pbnQgPSBjYy52MihrZXlfZnJhbWUudmFsdWVbMF0sIGtleV9mcmFtZS52YWx1ZVsxXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwga2V5X2ZyYW1lLm1vdGlvblBhdGgubGVuZ3RoOyBqICsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kX3BvaW50ID0gY2MudjIoa2V5X2ZyYW1lLm1vdGlvblBhdGhbal1bMF0sIGtleV9mcmFtZS5tb3Rpb25QYXRoW2pdWzFdKTtcclxuICAgICAgICAgICAgICAgIGN0cmwyID0gY2MudjIoa2V5X2ZyYW1lLm1vdGlvblBhdGhbal1bMl0sIGtleV9mcmFtZS5tb3Rpb25QYXRoW2pdWzNdKTtcclxuICAgICAgICAgICAgICAgIGlmIChjdHJsMSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN0cmwxID0gY3RybDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyDotJ3loZ7lsJTmm7Lnur8gc3RhcnRfcG9pbnQsIGN0cmwxLCBjdHJsMiwgZW5kX3BvaW50LFxyXG4gICAgICAgICAgICAgICAgcm9hZF9jdXJ2ZV9wYXRoLnB1c2goW3N0YXJ0X3BvaW50LCBjdHJsMSwgY3RybDIsIGVuZF9wb2ludF0pO1xyXG4gICAgICAgICAgICAgICAgY3RybDEgPSBjYy52MihrZXlfZnJhbWUubW90aW9uUGF0aFtqXVs0XSwga2V5X2ZyYW1lLm1vdGlvblBhdGhbal1bNV0pO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRfcG9pbnQgPSBlbmRfcG9pbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2cocm9hZF9jdXJ2ZV9wYXRoKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgb25lX3JvYWQgPSBbcm9hZF9jdXJ2ZV9wYXRoWzBdWzBdXTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IodmFyIGluZGV4ID0gMDsgaW5kZXggPCByb2FkX2N1cnZlX3BhdGgubGVuZ3RoOyBpbmRleCArKykge1xyXG4gICAgICAgICAgICBzdGFydF9wb2ludCA9IHJvYWRfY3VydmVfcGF0aFtpbmRleF1bMF07XHJcbiAgICAgICAgICAgIGN0cmwxID0gcm9hZF9jdXJ2ZV9wYXRoW2luZGV4XVsxXTtcclxuICAgICAgICAgICAgY3RybDIgPSByb2FkX2N1cnZlX3BhdGhbaW5kZXhdWzJdO1xyXG4gICAgICAgICAgICBlbmRfcG9pbnQgPSByb2FkX2N1cnZlX3BhdGhbaW5kZXhdWzNdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGxlbiA9IHRoaXMuYmV6aWVyX2xlbmd0aChzdGFydF9wb2ludCwgY3RybDEsIGN0cmwyLCBlbmRfcG9pbnQpO1xyXG4gICAgICAgICAgICB2YXIgT0ZGU0VUID0gMTY7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IGxlbiAvIE9GRlNFVDtcclxuICAgICAgICAgICAgY291bnQgPSBNYXRoLmZsb29yKGNvdW50KTtcclxuICAgICAgICAgICAgdmFyIHRfZGVsdGEgPSAxIC8gY291bnQ7XHJcbiAgICAgICAgICAgIHZhciB0ID0gdF9kZWx0YTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSArKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBzdGFydF9wb2ludC54ICogKDEgLSB0KSAqICgxIC0gdCkgKiAoMSAtIHQpICsgMyAqIGN0cmwxLnggKiB0ICogKDEgLSB0KSAqICgxIC0gdCkgKyAzICogY3RybDIueCAqIHQgKiB0ICogKDEgLSB0KSArIGVuZF9wb2ludC54ICogdCAqIHQgKiB0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBzdGFydF9wb2ludC55ICogKDEgLSB0KSAqICgxIC0gdCkgKiAoMSAtIHQpICsgMyAqIGN0cmwxLnkgKiB0ICogKDEgLSB0KSAqICgxIC0gdCkgKyAzICogY3RybDIueSAqIHQgKiB0ICogKDEgLSB0KSArIGVuZF9wb2ludC55ICogdCAqIHQgKiB0O1xyXG4gICAgICAgICAgICAgICAgb25lX3JvYWQucHVzaChjYy52Mih4LCB5KSk7XHJcbiAgICAgICAgICAgICAgICB0ICs9IHRfZGVsdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2cob25lX3JvYWQpO1xyXG4gICAgICAgIHRoaXMucm9hZF9kYXRhX3NldC5wdXNoKG9uZV9yb2FkKTtcclxuICAgIH0sIFxyXG5cclxuICAgIGRyYXdfcm9hZHMocGF0aCkge1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY3MuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHRoaXMucm9hZF9kYXRhX3NldC5sZW5ndGg7IGogKyspIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSB0aGlzLnJvYWRfZGF0YV9zZXRbal07XHJcblxyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkgKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGhpY3MubW92ZVRvKHBhdGhbaV0ueCAtIDIsIHBhdGhbaV0ueSArIDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ncmFwaGljcy5saW5lVG8ocGF0aFtpXS54IC0gMiwgcGF0aFtpXS55IC0gMik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXBoaWNzLmxpbmVUbyhwYXRoW2ldLnggKyAyLCBwYXRoW2ldLnkgLSAyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGhpY3MubGluZVRvKHBhdGhbaV0ueCArIDIsIHBhdGhbaV0ueSArIDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ncmFwaGljcy5jbG9zZSgpOyAvLyDnu4TmiJDkuIDkuKrlsIHpl63nmoTot6/lvoRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDnlLvlhYjvvIzloavlhYU7XHJcbiAgICAgICAgLy8gdGhpcy5ncmFwaGljcy5zdHJva2UoKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNzLmZpbGwoKTtcclxuICAgIH0sIFxyXG5cclxuICAgIGJlemllcl9sZW5ndGg6IGZ1bmN0aW9uKHN0YXJ0X3BvaW50LCBjdHJsMSwgY3RybDIsIGVuZF9wb2ludCkge1xyXG4gICAgICAgIC8vIHQgWzAsIDFdIHQg5YiG5oiQMjDnrYnliIYgMSAvIDIwID0gMC4wNVxyXG4gICAgICAgIHZhciBwcmV2X3BvaW50ID0gc3RhcnRfcG9pbnQ7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IDA7XHJcbiAgICAgICAgdmFyIHQgPSAwLjA1O1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCAyMDsgaSArKykge1xyXG4gICAgICAgICAgICB2YXIgeCA9IHN0YXJ0X3BvaW50LnggKiAoMSAtIHQpICogKDEgLSB0KSAqICgxIC0gdCkgKyAzICogY3RybDEueCAqIHQgKiAoMSAtIHQpICogKDEgLSB0KSArIDMgKiBjdHJsMi54ICogdCAqIHQgKiAoMSAtIHQpICsgZW5kX3BvaW50LnggKiB0ICogdCAqIHQ7XHJcbiAgICAgICAgICAgIHZhciB5ID0gc3RhcnRfcG9pbnQueSAqICgxIC0gdCkgKiAoMSAtIHQpICogKDEgLSB0KSArIDMgKiBjdHJsMS55ICogdCAqICgxIC0gdCkgKiAoMSAtIHQpICsgMyAqIGN0cmwyLnkgKiB0ICogdCAqICgxIC0gdCkgKyBlbmRfcG9pbnQueSAqIHQgKiB0ICogdDtcclxuICAgICAgICAgICAgdmFyIG5vd19wb2ludCA9IGNjLnYyKHgsIHkpO1xyXG4gICAgICAgICAgICAvLyB2YXIgZGlyID0gY2MucFN1Yihub3dfcG9pbnQsIHByZXZfcG9pbnQpO1xyXG4gICAgICAgICAgICB2YXIgZGlyID0gbm93X3BvaW50LnN1YihwcmV2X3BvaW50KTtcclxuICAgICAgICAgICAgcHJldl9wb2ludCA9IG5vd19wb2ludDtcclxuICAgICAgICAgICAgbGVuZ3RoICs9IGRpci5tYWcoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHQgKz0gMC4wNTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iXX0=
//------QC-SOURCE-SPLIT------
