{"version":3,"sources":["assets\\script\\controllers\\mine\\mng\\MineSelectItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameCenter from \"../../../data/GameCenter\";\r\n\r\nexport class MineSelectItem {\r\n\r\n    node: cc.Node;\r\n    node_spine_box: cc.Node;\r\n\r\n    spine_body: sp.Skeleton;\r\n    spine_floor: sp.Skeleton;\r\n\r\n    id: number = 0;\r\n    type: number;\r\n    skinID: number = 0;\r\n    level: number = 0;\r\n    size: object = {\r\n        w:  666,\r\n        h: 600\r\n    };\r\n\r\n    floorName: string = \"empty\";\r\n\r\n    constructor(node: cc.Node, type: number = 0, itemID: number = 0, itemLevel: number = 0, config?) {\r\n\r\n        this.node = node;\r\n        this.node_spine_box = this.node.getChildByName(\"spine\");\r\n        this.spine_body = this.node_spine_box.getChildByName(\"body\").getComponent(sp.Skeleton);\r\n        this.spine_floor = this.node_spine_box.getChildByName(\"floor\").getComponent(sp.Skeleton);\r\n\r\n        this.id = itemID;\r\n        this.type = type;\r\n        this.level = itemLevel;\r\n\r\n        if (config) {\r\n\r\n            if (config.floorName) {\r\n                this.floorName = config.floorName;\r\n            }\r\n\r\n            if (config.bodyAssets) {\r\n                this.setBodySpineAssets(config.bodyAssets);\r\n            }\r\n\r\n        }\r\n\r\n        this.init();\r\n\r\n    }\r\n\r\n    init(): void {\r\n        this.setSkin();\r\n        this.play(\"IDLE\");\r\n    }\r\n\r\n\r\n    play(aniName:String) : void {\r\n        this.bodyPlay(aniName);\r\n        this.floorPlay(aniName);\r\n    }\r\n\r\n\r\n    bodyPlay(aniName): void {\r\n        if (aniName == \"IDLE\") {\r\n            this.spine_body.setAnimation(0, `select_idle`, true);\r\n        } else if (aniName == \"ACTION\") {\r\n            this.spine_body.setAnimation(0, `select_act`, true);\r\n        }\r\n    }\r\n\r\n    floorPlay(aniName): void {\r\n\r\n        if (!this.spine_floor) { return; }\r\n\r\n        if (aniName == \"IDLE\") {\r\n            this.spine_floor.setAnimation(0, `${this.floorName}`, true);\r\n        } else if (aniName == \"ACTION\") {\r\n            let actionAniName = this.floorName == \"empty\" ? `${this.floorName}_act` : this.floorName;\r\n            this.spine_floor.setAnimation(0, actionAniName, true);\r\n        }\r\n\r\n    }\r\n\r\n    setSkin(id?): void {\r\n\r\n        if (this.type > 0) {\r\n            return;\r\n        }\r\n\r\n        this.spine_body.setSkin(GameCenter.game.getPetBodySkinName(id));\r\n\r\n    }\r\n    upgradeSuccess(id: number, level: number): void {\r\n        this.setLevel(id, level);\r\n        let spine =  this.spine_body;\r\n        spine.setAnimation(0, `lv_success`, false);\r\n        spine.addAnimation(0, \"idle\", true);\r\n    }\r\n\r\n    upgradeFail(): void {\r\n        let spine =  this.spine_body;\r\n        spine.setAnimation(0, `lv_fail`, false);\r\n        spine.addAnimation(0, `idle`, true);\r\n    }\r\n    setLevel(id, val: number): void {\r\n        this.level = val;\r\n        this.setSkin(id);\r\n    }\r\n\r\n    setSpineNodePosition(pos: cc.Vec2): void {\r\n        this.node_spine_box.setPosition(pos);\r\n    }\r\n\r\n    setBodySpineAssets(assets): void {\r\n        this.spine_body.skeletonData = assets;\r\n    }\r\n\r\n}"]}