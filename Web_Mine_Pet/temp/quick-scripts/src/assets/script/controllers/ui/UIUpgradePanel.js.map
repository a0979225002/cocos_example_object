{"version":3,"sources":["assets\\script\\controllers\\ui\\UIUpgradePanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameCenter from \"../../data/GameCenter\";\r\nimport AssetsMng from \"../../manager/AssetsMng\";\r\nimport { ViewZorder } from \"../../data/const/ViewZorder\";\r\nimport UIBase from \"./UIBase\";\r\n\r\nexport default class UIUpgradePanel extends UIBase {\r\n\r\n    black_bg: cc.Node;\r\n    spine: sp.Skeleton;\r\n    light: cc.Node;\r\n\r\n    onUILoad() {\r\n        this.black_bg = this.node.getChildByName(\"bg\");\r\n        this.spine = this.node.getChildByName(\"spine\").getComponent(sp.Skeleton);\r\n        this.light = this.node.getChildByName(\"light\");\r\n        this.node.active = false;\r\n        this.init();\r\n    }\r\n\r\n    init(): void {\r\n        this.node.zIndex = ViewZorder.UI;\r\n    }\r\n\r\n    show(upgradeID): void {\r\n\r\n        this.setSpineData(upgradeID);\r\n\r\n        this.node.active = true;\r\n        this.light.active = false;\r\n        this.black_bg.active = true;\r\n        this.black_bg.opacity = 0;\r\n        this.black_bg.stopAllActions();\r\n        this.black_bg.runAction(cc.fadeTo(.15, 180));\r\n\r\n        this.spine.node.active = true;\r\n        this.spine.setAnimation(0, `lv_start`, true);\r\n\r\n    }\r\n\r\n    hide(callback?): void {\r\n\r\n        this.light.active = true;\r\n        this.light.opacity = 0;\r\n        this.light.stopAllActions();\r\n        this.light.runAction(cc.sequence(\r\n            cc.fadeIn(.15).easing(cc.easeSineIn()),\r\n            cc.callFunc(() => {\r\n                this.spine.node.active = false;\r\n                this.black_bg.active = false;\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }),\r\n            cc.delayTime(.1),\r\n            cc.fadeOut(.2).easing(cc.easeSineOut()),\r\n            cc.callFunc(() => {\r\n                this.node.active = false;\r\n            })\r\n        ));\r\n\r\n    }\r\n\r\n    setSpineData(upgradeID): void {\r\n        let spineName = GameCenter.game.getPetBodyThemeName(upgradeID);\r\n        this.spine.skeletonData = AssetsMng.getAssets(`${ spineName }.spine`);\r\n        this.setSkin(upgradeID);\r\n    }\r\n\r\n\r\n    setSkin(upgradeID): void {\r\n        this.spine.setSkin(GameCenter.game.getPetBodySkinName(upgradeID));\r\n    }\r\n\r\n}"]}