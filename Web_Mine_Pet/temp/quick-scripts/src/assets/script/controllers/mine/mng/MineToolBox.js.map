{"version":3,"sources":["assets\\script\\controllers\\mine\\mng\\MineToolBox.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameCenter from \"../../../data/GameCenter\";\r\nimport EventMng from \"../../../manager/EventMng\";\r\nimport LangMng from \"../../../manager/LangMng\";\r\nimport { MineSlider } from \"./MineSlider\";\r\nimport { ToolBtn, ToolIntroCon } from \"./ToolComponent\";\r\nimport { ActionTransition } from \"../../../common/ActionTransition\";\r\nimport { MainEvent } from \"../../../data/const/EventConst\";\r\nimport UIBase from \"../../ui/UIBase\";\r\nimport DataMineToolBox from \"../../../data/scene/DataMineToolBox\";\r\n\r\nconst { ccclass } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MineToolBox extends UIBase {\r\n\r\n    ui: DataMineToolBox;\r\n    slider: MineSlider;\r\n    controlBts: ToolBtn[] = [];\r\n    introCon: ToolIntroCon[] = [];\r\n\r\n    private btnCanClick: boolean = false;\r\n    private currentToolBtnIndex = -1;\r\n\r\n    onUILoad(): void {\r\n        this.ui = this.node.addComponent(DataMineToolBox);\r\n        this.mineSliderCreate();\r\n        this.toolBtnsCreate();\r\n        this.toolIntroConCreate();\r\n    }\r\n\r\n    onStart() {\r\n        this.slider.init();\r\n        this.slider.createSliderList(GameCenter.game.mineFloorName, GameCenter.game.mineBodyName);\r\n        this.viewInit();\r\n    }\r\n\r\n    onShow(): void {\r\n        this.initEvent(MainEvent.PET_UPGRADE_CHANGE, this.onPetUpgradeChange);\r\n        this.initEvent(MainEvent.MESSAGE_SHOW, this.onMessageShow);\r\n        this.onRegisterEvent(this.ui.btn_confirm, this.onBtnConfirmClick, this);\r\n        this.slider.show();\r\n        this.slider.arrowBtnsBindOn();\r\n        this.viewReset();\r\n        this.toolBtnsBindOn();\r\n    }\r\n\r\n    onHide() {\r\n        this.unRegisterEvent(this.ui.btn_confirm, this.onBtnConfirmClick, this);\r\n        this.slider.hide();\r\n        this.slider.arrowBtnsBindOff();\r\n        this.toolBtnsBindOff();\r\n    }\r\n\r\n    viewInit(): void {\r\n        this.controlBts[0].setCount(GameCenter.game.canCount);\r\n        this.controlBts[0].setTitleTxt(LangMng.getTxt(\"T_100\"));\r\n        this.controlBts[1].setTitleTxt(LangMng.getTxt(\"T_110\"));\r\n        this.controlBts[2].setTitleTxt(LangMng.getTxt(\"T_111\"));\r\n        this.ui.label_item_name.string = '';\r\n        this.levelBarUpdate();\r\n    }\r\n\r\n    viewReset(): void {\r\n        this.currentToolBtnIndex = -1;\r\n        this.btnCanClick = false;\r\n        this.msgTipShow(LangMng.getTxt(\"T_008\"));\r\n        this.toolIntroConHide();\r\n        this.ui.node_confirm_active.active = false;\r\n        this.stateBoxHide();\r\n    }\r\n\r\n    mineSliderCreate(): void {\r\n        this.slider = new MineSlider(this.ui, 0, {\r\n            referenceMode: true,\r\n            sliderPageCallBack: this.onSliderPageCallBack.bind(this),\r\n        });\r\n    }\r\n\r\n    itemCheck(autoUpdate: boolean = true): boolean {\r\n\r\n        let state = false;\r\n\r\n        if (this.currentToolBtnIndex < 0) {\r\n            return state;\r\n        }\r\n\r\n        if (GameCenter.game.mineList[this.slider.currentPageIndex] == 0) {\r\n            this.msgTipShow(LangMng.getTxt(\"T_009\"));\r\n            this.toolIntroConHide();\r\n        } else {\r\n            this.msgTipHide();\r\n            this.toolIntroConUpdate(autoUpdate);\r\n            state = true;\r\n        }\r\n\r\n        return state;\r\n\r\n    }\r\n\r\n    itemDialogShow(str): void {\r\n        this.ui.node_pet_dialog_holder.active = true;\r\n        this.ui.label_pet_dialog_txt.string = str;\r\n        this.ui.node_pet_dialog_holder.opacity = 255;\r\n        this.ui.node_pet_dialog_holder.stopAllActions();\r\n        this.ui.node_pet_dialog_holder.runAction(cc.sequence(\r\n            cc.delayTime(3),\r\n            cc.fadeOut(.2),\r\n            cc.callFunc(() => {\r\n                this.ui.node_pet_dialog_holder.active = false;\r\n            })\r\n        ))\r\n    }\r\n\r\n    toolBtnsCreate(): void {\r\n        for (let i = 0 ; i < this.ui.node_props_holder.children.length; i++) {\r\n            let node = this.ui.node_props_holder.children[i];\r\n            this.controlBts[i] = new ToolBtn(node, i, this.onToolBtnClick.bind(this));\r\n        }\r\n    }\r\n\r\n    toolBtnsUpdate(): void {\r\n        this.controlBts[0].setCount(GameCenter.game.canCount);\r\n    }\r\n\r\n    toolBtnsBindOn(): void {\r\n        for (let i = 0; i < this.controlBts.length; i++) {\r\n            this.controlBts[i].bindOn();\r\n        }\r\n    }\r\n\r\n    toolBtnsBindOff(): void {\r\n        for (let i = 0; i < this.controlBts.length; i++) {\r\n            this.controlBts[i].bindOff();\r\n            this.controlBts[i].active(false);\r\n        }\r\n    }\r\n\r\n    toolBtnSwitch(id): void {\r\n\r\n        if (this.currentToolBtnIndex >= 0) {\r\n            this.controlBts[this.currentToolBtnIndex].active(false);\r\n        }\r\n\r\n        this.currentToolBtnIndex = id;\r\n\r\n        this.controlBts[this.currentToolBtnIndex].active(true);\r\n\r\n        this.btnCanClick = this.itemCheck();\r\n\r\n    }\r\n\r\n    toolIntroConCreate(): void {\r\n        this.introCon[0] = new ToolIntroCon(this.ui.node_intro_con_1, 0, this.canIntroUpdate.bind(this));\r\n        this.introCon[1] = new ToolIntroCon(this.ui.node_intro_con_2, 0, this.canIntroUpdate.bind(this));\r\n        this.introCon[2] = new ToolIntroCon(this.ui.node_intro_con_3, 0, this.canIntroUpdate.bind(this));\r\n    }\r\n\r\n    toolIntroConHide(): void {\r\n        for (let i = 0; i < this.introCon.length; i++) {\r\n            this.introCon[i].hide();\r\n        }\r\n    }\r\n\r\n    toolIntroConUpdate(autoUpdate): void {\r\n\r\n        this.toolIntroConHide();\r\n        this.introCon[this.currentToolBtnIndex].show();\r\n\r\n        switch (this.currentToolBtnIndex) {\r\n\r\n            case 0:\r\n                this.canIntroUpdate();\r\n                this.btnConfirmShow();\r\n                break;\r\n            case 1:\r\n                this.btnConfirmHide();\r\n                this.decIntroUpdate();\r\n                break;\r\n            case 2:\r\n\r\n                this.btnConfirmHide();\r\n                this.skinIntroUpdate();\r\n\r\n                if (autoUpdate) {\r\n                    EventMng.emit(MainEvent.OPEN_SKIN_POP_REQ, {\r\n                        id: this.slider.currentPageIndex\r\n                    })\r\n                }\r\n\r\n                break;\r\n        }\r\n    }\r\n\r\n    msgTipShow(str: string): void {\r\n\r\n        this.ui.label_msg_tip.string = str;\r\n        let node = this.ui.label_msg_tip.node;\r\n\r\n        node.active = true;\r\n        node.opacity = 0;\r\n\r\n        node.stopAllActions();\r\n        node.runAction(cc.fadeIn(.1));\r\n\r\n    }\r\n\r\n    msgTipHide(): void {\r\n\r\n        let node = this.ui.label_msg_tip.node;\r\n\r\n        if(!node.active) { return; }\r\n\r\n        node.stopAllActions();\r\n        node.runAction(cc.sequence(\r\n            cc.fadeOut(.1),\r\n            cc.callFunc(() => {\r\n                node.active = false;\r\n            })\r\n        ));\r\n\r\n    }\r\n\r\n    canIntroUpdate(): void {\r\n\r\n        let nextLevel = GameCenter.game.mineLevel[this.slider.currentPageIndex] + 1;\r\n\r\n        this.ui.node_confirm_active.active = false;\r\n\r\n        if (nextLevel >= 10) {\r\n            this.toolIntroConHide();\r\n            this.msgTipShow(LangMng.getTxt(\"T_107\"));\r\n            return;\r\n        }\r\n\r\n\r\n        if (!this.ui.node_intro_con_1.active) { return; }\r\n\r\n        let introNode = this.introCon[this.currentToolBtnIndex].node;\r\n        let sliverLabel = introNode.getChildByName(\"g_1\").getChildByName(\"count\").getComponent(cc.Label);\r\n        let canCountLabel = introNode.getChildByName(\"g_2\").getChildByName(\"count\").getComponent(cc.Label);\r\n        let canTipLabel = introNode.getChildByName(\"g_2\").getChildByName(\"count_tip\").getComponent(cc.Label);\r\n\r\n        let upTxt1 = introNode.getChildByName(\"g_3\").getChildByName(\"txt_1\").getComponent(cc.RichText);\r\n\r\n\r\n        let silverVal = GameCenter.game.levelConfig.silver[nextLevel - 2];\r\n        let canVal = GameCenter.game.levelConfig.can[nextLevel - 2];\r\n\r\n        sliverLabel.string = `${silverVal}`;\r\n        canCountLabel.string = `x${canVal}`;\r\n        canTipLabel.string = `(${GameCenter.game.canCount}/${canVal})`;\r\n        upTxt1.string = `${LangMng.getTxt(\"T_103\")} ${nextLevel}\\n\\r${LangMng.getTxt(\"T_104\")} <color = #ffc600>${GameCenter.game.levelConfig.rate[nextLevel - 2]}%</c>`;\r\n\r\n        if (GameCenter.game.silverPoint >= silverVal && GameCenter.game.canCount >= canVal) {\r\n            this.ui.node_confirm_active.active = true;\r\n        }\r\n\r\n    }\r\n\r\n     decIntroUpdate(): void {\r\n\r\n         if (GameCenter.game.mineAccessories[this.slider.currentPageIndex] == 0) {\r\n             this.ui.node_intro_con_2.active = false;\r\n             this.msgTipShow(LangMng.getTxt(\"T_112\"));\r\n         }\r\n\r\n    }\r\n\r\n\r\n    skinIntroUpdate(): void {\r\n\r\n        if (GameCenter.game.mineSkin[this.slider.currentPageIndex] == 0) {\r\n            this.ui.node_intro_con_3.active = false;\r\n            this.msgTipShow(LangMng.getTxt(\"T_113\"));\r\n        }\r\n\r\n    }\r\n\r\n    levelBarShow(): void {\r\n        this.ui.node_level_holder.active = true;\r\n    }\r\n\r\n    levelBarHide(): void {\r\n        this.ui.node_level_holder.active = false;\r\n    }\r\n\r\n    levelBarUpdate(): void {\r\n        this.ui.label_level_num.string = `LV.${GameCenter.game.mineLevel[this.slider.currentPageIndex]}`;\r\n    }\r\n\r\n    onToolBtnClick(id): void {\r\n\r\n        let introPage = this.introCon[id];\r\n\r\n        if (!introPage) {\r\n            EventMng.emit(MainEvent.MESSAGE_SHOW, {\r\n                type: 2,\r\n                content: LangMng.getTxt(\"S_9001\"),\r\n                autoClose: true,\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.toolBtnSwitch(id);\r\n\r\n    }\r\n\r\n\r\n    onBtnConfirmClick(): void {\r\n\r\n        this.unRegisterEvent(this.ui.btn_confirm, this.onBtnConfirmClick, this);\r\n\r\n        ActionTransition.btnBounce(this.ui.btn_confirm, () => {\r\n\r\n\r\n            if (!this.btnCanClick) {\r\n                this.onRegisterEvent(this.ui.btn_confirm, this.onBtnConfirmClick, this);\r\n                return;\r\n            }\r\n\r\n            EventMng.emit('PET_UPGRADE_REQ', {\r\n                id: this.slider.currentPageIndex,\r\n            });\r\n\r\n        });\r\n\r\n    }\r\n\r\n    onSliderPageCallBack(): void {\r\n\r\n        this.btnCanClick = this.itemCheck(false);\r\n\r\n        if (GameCenter.game.mineList[this.slider.currentPageIndex] == 0) {\r\n            this.levelBarHide();\r\n            this.ui.label_item_name.string = '';\r\n        } else {\r\n            this.levelBarShow();\r\n            this.ui.label_item_name.string = GameCenter.cfgMine[this.slider.currentPageIndex].name;\r\n        }\r\n\r\n    }\r\n\r\n    onPetUpgradeChange(data): void {\r\n\r\n        this.onRegisterEvent(this.ui.btn_confirm, this.onBtnConfirmClick, this);\r\n\r\n        this.toolBtnsUpdate();\r\n        this.levelBarUpdate();\r\n        this.canIntroUpdate();\r\n\r\n        let level = GameCenter.game.mineLevel[data.id];\r\n\r\n        if (data.state == 0) {\r\n            this.slider.items[data.id].upgradeSuccess(data.id, level);\r\n            this.itemDialogShow(LangMng.getTxt(\"T_105\"));\r\n            this.ui.ani_level_bar.play();\r\n        } else {\r\n            this.slider.items[data.id].upgradeFail();\r\n            this.itemDialogShow(LangMng.getTxt(\"T_106\"));\r\n        }\r\n\r\n    }\r\n\r\n    onMessageShow(): void {\r\n        this.onRegisterEvent(this.ui.btn_confirm, this.onBtnConfirmClick, this);\r\n    }\r\n\r\n    stateBoxShow(): void {\r\n        this.ui.node_state_tip.active = true;\r\n    }\r\n\r\n    stateBoxHide(): void {\r\n        this.ui.node_state_tip.active = false;\r\n    }\r\n\r\n    btnConfirmShow(): void {\r\n        this.ui.btn_confirm.active = true;\r\n    }\r\n\r\n    btnConfirmHide(): void {\r\n        this.ui.btn_confirm.active = false;\r\n    }\r\n\r\n}"]}