{"version":3,"sources":["assets\\Scene\\Photo_gallery\\Photo_gallery.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA8C,oCAAY;IAA1D;QAAA,qEAsCC;QApCC,oBAAc,GAAc,EAAE,CAAC;QAC/B,gBAAU,GAAW,GAAG,CAAC;QAQzB,oBAAc,GAAY,KAAK,CAAC;;IA2BlC,CAAC;IAjCC,iCAAM,GAAN;QAAA,iBAIC;QAHC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,GAAG;YACpC,IAAI,CAAC,MAAM,GAAG,KAAI,CAAC,cAAc,CAAC,MAAM,GAAG,GAAG,CAAC;QACjD,CAAC,CAAC,CAAA;IACJ,CAAC;IAGD,sCAAW,GAAX;QAAA,iBAyBC;QAxBC,IAAI,IAAI,CAAC,cAAc;YAAE,OAAO;QAChC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAE3B,IAAI,IAAI,GAAG,GAAG,CAAC;QACf,IAAI,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;QAClC,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC3D,QAAQ,CAAC,WAAW,CAAC,eAAe,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACvD,QAAQ,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACrC,QAAQ,CAAC,MAAM,CAAC,eAAe,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAEhD,IAAI,KAAK,GAAG,WAAW,CAAC;YACtB,IAAI,IAAI,IAAI,CAAC;YACb,QAAQ,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YACrC,IAAI,IAAI,GAAG,GAAG,GAAG,KAAI,CAAC,UAAU,EAAE;gBAChC,KAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;gBAC5B,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC/B,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,GAAG;oBACpC,IAAI,CAAC,MAAM,GAAG,KAAI,CAAC,cAAc,CAAC,MAAM,GAAG,GAAG,CAAC;gBACjD,CAAC,CAAC,CAAA;gBACF,QAAQ,CAAC,MAAM,CAAC,eAAe,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACjD,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;gBAC5B,KAAK,IAAI,aAAa,CAAC,KAAK,CAAC,CAAC;aAC/B;QACH,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC;IAnCD;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;4DACW;IAFZ,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CAsCpC;IAAD,uBAAC;CAtCD,AAsCC,CAtC6C,EAAE,CAAC,SAAS,GAsCzD;kBAtCoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Scene_transition extends cc.Component {\r\n  @property([cc.Node])\r\n  switchNodeList: cc.Node[] = [];\r\n  fadeRadius: number = 0.1;\r\n\r\n  onLoad() {\r\n    this.switchNodeList.forEach((node, idx) => {\r\n      node.zIndex = this.switchNodeList.length - idx;\r\n    })\r\n  }\r\n\r\n  isTransforming: boolean = false;\r\n  bgTramsform() {\r\n    if (this.isTransforming) return;\r\n    this.isTransforming = true;\r\n\r\n    let time = 0.0;\r\n    let node = this.switchNodeList[0];\r\n    let material = node.getComponent(cc.Sprite).getMaterial(0);\r\n    material.setProperty('u_fade_radius', this.fadeRadius);\r\n    material.setProperty('u_time', time);\r\n    material.define('USE_TRAMSFORM', true, 0, true);\r\n\r\n    let timer = setInterval(() => {\r\n      time += 0.03;\r\n      material.setProperty('u_time', time);\r\n      if (time > 1.0 + this.fadeRadius) {\r\n        this.switchNodeList.shift();\r\n        this.switchNodeList.push(node);\r\n        this.switchNodeList.forEach((node, idx) => {\r\n          node.zIndex = this.switchNodeList.length - idx;\r\n        })\r\n        material.define('USE_TRAMSFORM', false, 0, true);\r\n        this.isTransforming = false;\r\n        timer && clearInterval(timer);\r\n      }\r\n    }, 30);\r\n  }\r\n}\r\n"]}