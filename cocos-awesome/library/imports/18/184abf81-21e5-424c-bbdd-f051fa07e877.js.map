{"version":3,"sources":["assets\\Scene\\Dissolve_color\\Dissolve_color.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA4C,kCAAY;IAAxD;QAAA,qEAkCC;QAhCC,SAAG,GAAa,IAAI,CAAC;QACrB,kBAAY,GAAkB,EAAE,CAAC;QACjC,aAAO,GAAW,CAAC,CAAC,CAAC,QAAQ;QAC7B,gBAAU,GAAY,KAAK,CAAC,CAAC,QAAQ;QACrC,YAAM,GAAW,CAAC,CAAC,CAAC,UAAU;QAC9B,WAAK,GAAW,GAAG,CAAC,CAAC,UAAU;;IA2BjC,CAAC;IAzBC,8BAAK,GAAL;QACE,IAAI,CAAC,YAAY,CAAC,IAAI,CACpB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,EACxE,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CACvE,CAAC;IACJ,CAAC;IAED,+BAAM,GAAN;QACE,IAAI,IAAI,CAAC,UAAU;YAAE,OAAO;QAC5B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IACzB,CAAC;IAED,+BAAM,GAAN,UAAO,EAAE;QAAT,iBAYC;QAXC,IAAI,CAAC,IAAI,CAAC,UAAU;YAAE,OAAO;QAC7B,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAC,QAAQ,IAAK,OAAA,QAAQ,CAAC,WAAW,CAAC,UAAU,EAAE,KAAI,CAAC,OAAO,CAAC,EAA9C,CAA8C,CAAC,CAAC;QAExF,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,EAAE;YAC1C,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,MAAM,GAAG,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YAC9C,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;SACrD;aAAM;YACL,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC;YAC3B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;SACzB;IACH,CAAC;;IA/BD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;sDACd,EAAE,oBAAF,EAAE,CAAC,KAAK;+CAAQ;IAFF,cAAc;QADlC,OAAO;OACa,cAAc,CAkClC;IAAD,qBAAC;CAlCD,AAkCC,CAlC2C,EAAE,CAAC,SAAS,GAkCvD;kBAlCoB,cAAc","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Dissolve_color extends cc.Component {\r\n  @property(cc.Label)\r\n  tip: cc.Label = null;\r\n  materialList: cc.Material[] = [];\r\n  fadePct: number = 0; // 溶解百分比\r\n  activeFlag: boolean = false; // 溶解进行中\r\n  symbol: number = 1; // 色彩叠加的正负\r\n  speed: number = 0.5; // 色彩叠加的速度\r\n\r\n  start() {\r\n    this.materialList.push(\r\n      this.node.getChildByName('ghost').getComponent(cc.Sprite).getMaterial(0),\r\n      this.node.getChildByName('man').getComponent(cc.Sprite).getMaterial(0)\r\n    );\r\n  }\r\n\r\n  toggle() {\r\n    if (this.activeFlag) return;\r\n    this.activeFlag = true;\r\n  }\r\n\r\n  update(dt) {\r\n    if (!this.activeFlag) return;\r\n    this.materialList.forEach((material) => material.setProperty('fade_pct', this.fadePct));\r\n\r\n    if (this.fadePct >= 0 && this.fadePct <= 1) {\r\n      this.fadePct += this.symbol * dt * this.speed;\r\n      this.tip.string = \"溶解程度 \" + this.fadePct.toFixed(1);\r\n    } else {\r\n      this.fadePct = this.fadePct > 1 ? 1 : 0;\r\n      this.symbol = -this.symbol;\r\n      this.activeFlag = false;\r\n    }\r\n  }\r\n}\r\n"]}