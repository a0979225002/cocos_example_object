{
  "ver": "1.0.22",
  "uuid": "dc7bb9f6-ca84-4ffd-b1c2-58b34044352f",
  "compiledShaders": [
    {
      "glsl1": {
        "vert": "\nprecision highp float;\nuniform mat4 cc_matViewProj;\n\nattribute vec3 a_position;\nattribute vec4 a_color;\nvarying vec4 v_color;\n\nattribute vec2 a_uv0;\nvarying vec2 v_uv0;\n\nvoid main () {\n  vec4 pos = vec4(a_position, 1);\n\n  pos = cc_matViewProj * pos;\n\n  v_uv0 = a_uv0;\n\n  v_color = a_color;\n\n  gl_Position = pos;\n}\n",
        "frag": "\nprecision highp float;\n\nvarying vec4 v_color;\nvarying vec2 v_uv0;\n\nuniform float time;\nfloat rand(vec2 p){\n  p+=.2127+p.x+.3713*p.y;\n  vec2 r=4.789*sin(789.123*(p));\n  return fract(r.x*r.y);\n}\n\nfloat sn(vec2 p){\n  vec2 i=floor(p-.5);\n  vec2 f=fract(p-.5);\n  f = f*f*f*(f*(f*6.0-15.0)+10.0);\n  float rt=mix(rand(i),rand(i+vec2(1.,0.)),f.x);\n  float rb=mix(rand(i+vec2(0.,1.)),rand(i+vec2(1.,1.)),f.x);\n  return mix(rt,rb,f.y);\n}\n\nvoid main () {\n  vec2 uv = v_uv0.xy;\n\n  vec2 p=uv.xy*vec2(3.,4.3);\n  float f =\n  .5*sn(p)\n  +.25*sn(2.*p)\n  +.125*sn(4.*p)\n  +.0625*sn(8.*p)\n  +.03125*sn(16.*p)+\n  .015*sn(32.*p)\n  ;\n  \n  float newT = time*0.4 + sn(vec2(time*1.))*0.1;\n  p.x-=time*0.2;\n  \n  p.y*=1.3;\n  float f2=\n  .5*sn(p)\n  +.25*sn(2.04*p+newT*1.1)\n  -.125*sn(4.03*p-time*0.3)\n  +.0625*sn(8.02*p-time*0.4)\n  +.03125*sn(16.01*p+time*0.5)+\n  .018*sn(24.02*p);\n  \n  float f3=\n  .5*sn(p)\n  +.25*sn(2.04*p+newT*1.1)\n  -.125*sn(4.03*p-time*0.3)\n  +.0625*sn(8.02*p-time*0.5)\n  +.03125*sn(16.01*p+time*0.6)+\n  .019*sn(18.02*p);\n  \n  float f4 = f2*smoothstep(0.0,1.,uv.y);\n  \n  vec3 clouds = mix(vec3(-0.4,-0.4,-0.15),vec3(1.4,1.4,1.3),f4*f);\n  float lightning = sn((f3)+vec2(pow(sn(vec2(time*4.5)),6.)));\n\n  lightning *= smoothstep(0.0,1.,uv.y+0.5);\n\n  lightning = smoothstep(0.76,1.,lightning);\n  lightning=lightning*2.;\n  \n  vec2 moonp = vec2(0.5,0.8);\n  float moon = smoothstep(0.95,0.956,1.-length(uv-moonp));\n  vec2 moonp2 = moonp + vec2(0.015, 0);\n  moon -= smoothstep(0.93,0.956,1.-length(uv-moonp2));\n  moon = clamp(moon, 0., 1.);\n  moon += 0.3*smoothstep(0.80,0.956,1.-length(uv-moonp));\n\n  clouds+= pow(1.-length(uv-moonp),1.7)*0.3;\n\n  clouds*=0.8;\n  clouds += lightning + moon +0.2;\n\n  float ground = smoothstep(0.07,0.075,f*(p.y-0.98)+0.01);\n  \n  vec2 newUV = uv;\n  newUV.x-=time*0.3;\n  newUV.y+=time*3.;\n  float strength = sin(time*0.5+sn(newUV))*0.1+0.15;\n  \n  float rain = sn( vec2(newUV.x*20.1, newUV.y*40.1+newUV.x*400.1-20.*strength ));\n  float rain2 = sn( vec2(newUV.x*45.+time*0.5, newUV.y*30.1+newUV.x*200.1 ));  \n  rain = strength-rain;\n  rain+=smoothstep(0.2,0.5,f4+lightning+0.1)*rain;\n  rain += pow(length(uv-moonp),1.)*0.1;\n  rain+=rain2*(sin(strength)-0.4)*2.;\n  rain = clamp(rain, 0.,0.5)*0.5;\n  \n  float tree = 0.;\n  vec2 treeUV = uv;\n\n  {\n    float atree = abs(atan(treeUV.x*59.-85.5,3.-treeUV.y*25.+5.));\n    atree +=rand(treeUV.xy*vec2(0.001,1.))*atree;\n    tree += clamp(atree, 0.,1.)*0.33;\n  }\n  {\n    float atree = abs(atan(treeUV.x*65.-65.5,3.-treeUV.y*19.+4.));\n    atree +=rand(treeUV.xy*vec2(0.001,1.))*atree;\n    tree += clamp(atree, 0.,1.)*0.33;\n  }\n  {\n    float atree = abs(atan(treeUV.x*85.-91.5,3.-treeUV.y*21.+4.));\n    atree +=rand(treeUV.xy*vec2(0.001,1.))*atree;\n    tree += clamp(atree, 0.,1.)*0.34;\n  }\n  tree = smoothstep(0.6,1.,tree);\n\n  vec3 painting = tree*ground*(clouds + rain)+clamp(rain*(strength-0.1),0.,1.);\n  \n  float r=1.-length(max(abs(v_uv0.xy*2.-1.)-.5,0.)); \n  painting*=r;\n  \n  gl_FragColor = vec4(painting, 1.);\n}\n"
      },
      "glsl3": {
        "vert": "\nprecision highp float;\nuniform CCGlobal {\n  vec4 cc_time;\n\n  vec4 cc_screenSize;\n\n  vec4 cc_screenScale;\n\n  vec4 cc_nativeSize;\n\n  mat4 cc_matView;\n  mat4 cc_matViewInv;\n  mat4 cc_matProj;\n  mat4 cc_matProjInv;\n  mat4 cc_matViewProj;\n  mat4 cc_matViewProjInv;\n  vec4 cc_cameraPos;\n\n  vec4 cc_exposure;\n\n  vec4 cc_mainLitDir;\n\n  vec4 cc_mainLitColor;\n\n  vec4 cc_ambientSky;\n  vec4 cc_ambientGround;\n};\nuniform CCLocal {\n  mat4 cc_matWorld;\n  mat4 cc_matWorldIT;\n};\n\nin vec3 a_position;\nin vec4 a_color;\nout vec4 v_color;\n\nin vec2 a_uv0;\nout vec2 v_uv0;\n\nvoid main () {\n  vec4 pos = vec4(a_position, 1);\n\n  pos = cc_matViewProj * pos;\n\n  v_uv0 = a_uv0;\n\n  v_color = a_color;\n\n  gl_Position = pos;\n}\n",
        "frag": "\nprecision highp float;\n\nin vec4 v_color;\nin vec2 v_uv0;\n\nuniform TIME {\n  float time;\n}\n\nfloat rand(vec2 p){\n  p+=.2127+p.x+.3713*p.y;\n  vec2 r=4.789*sin(789.123*(p));\n  return fract(r.x*r.y);\n}\n\nfloat sn(vec2 p){\n  vec2 i=floor(p-.5);\n  vec2 f=fract(p-.5);\n  f = f*f*f*(f*(f*6.0-15.0)+10.0);\n  float rt=mix(rand(i),rand(i+vec2(1.,0.)),f.x);\n  float rb=mix(rand(i+vec2(0.,1.)),rand(i+vec2(1.,1.)),f.x);\n  return mix(rt,rb,f.y);\n}\n\nvoid main () {\n  vec2 uv = v_uv0.xy;\n\n  vec2 p=uv.xy*vec2(3.,4.3);\n  float f =\n  .5*sn(p)\n  +.25*sn(2.*p)\n  +.125*sn(4.*p)\n  +.0625*sn(8.*p)\n  +.03125*sn(16.*p)+\n  .015*sn(32.*p)\n  ;\n  \n  float newT = time*0.4 + sn(vec2(time*1.))*0.1;\n  p.x-=time*0.2;\n  \n  p.y*=1.3;\n  float f2=\n  .5*sn(p)\n  +.25*sn(2.04*p+newT*1.1)\n  -.125*sn(4.03*p-time*0.3)\n  +.0625*sn(8.02*p-time*0.4)\n  +.03125*sn(16.01*p+time*0.5)+\n  .018*sn(24.02*p);\n  \n  float f3=\n  .5*sn(p)\n  +.25*sn(2.04*p+newT*1.1)\n  -.125*sn(4.03*p-time*0.3)\n  +.0625*sn(8.02*p-time*0.5)\n  +.03125*sn(16.01*p+time*0.6)+\n  .019*sn(18.02*p);\n  \n  float f4 = f2*smoothstep(0.0,1.,uv.y);\n  \n  vec3 clouds = mix(vec3(-0.4,-0.4,-0.15),vec3(1.4,1.4,1.3),f4*f);\n  float lightning = sn((f3)+vec2(pow(sn(vec2(time*4.5)),6.)));\n\n  lightning *= smoothstep(0.0,1.,uv.y+0.5);\n\n  lightning = smoothstep(0.76,1.,lightning);\n  lightning=lightning*2.;\n  \n  vec2 moonp = vec2(0.5,0.8);\n  float moon = smoothstep(0.95,0.956,1.-length(uv-moonp));\n  vec2 moonp2 = moonp + vec2(0.015, 0);\n  moon -= smoothstep(0.93,0.956,1.-length(uv-moonp2));\n  moon = clamp(moon, 0., 1.);\n  moon += 0.3*smoothstep(0.80,0.956,1.-length(uv-moonp));\n\n  clouds+= pow(1.-length(uv-moonp),1.7)*0.3;\n\n  clouds*=0.8;\n  clouds += lightning + moon +0.2;\n\n  float ground = smoothstep(0.07,0.075,f*(p.y-0.98)+0.01);\n  \n  vec2 newUV = uv;\n  newUV.x-=time*0.3;\n  newUV.y+=time*3.;\n  float strength = sin(time*0.5+sn(newUV))*0.1+0.15;\n  \n  float rain = sn( vec2(newUV.x*20.1, newUV.y*40.1+newUV.x*400.1-20.*strength ));\n  float rain2 = sn( vec2(newUV.x*45.+time*0.5, newUV.y*30.1+newUV.x*200.1 ));  \n  rain = strength-rain;\n  rain+=smoothstep(0.2,0.5,f4+lightning+0.1)*rain;\n  rain += pow(length(uv-moonp),1.)*0.1;\n  rain+=rain2*(sin(strength)-0.4)*2.;\n  rain = clamp(rain, 0.,0.5)*0.5;\n  \n  float tree = 0.;\n  vec2 treeUV = uv;\n\n  {\n    float atree = abs(atan(treeUV.x*59.-85.5,3.-treeUV.y*25.+5.));\n    atree +=rand(treeUV.xy*vec2(0.001,1.))*atree;\n    tree += clamp(atree, 0.,1.)*0.33;\n  }\n  {\n    float atree = abs(atan(treeUV.x*65.-65.5,3.-treeUV.y*19.+4.));\n    atree +=rand(treeUV.xy*vec2(0.001,1.))*atree;\n    tree += clamp(atree, 0.,1.)*0.33;\n  }\n  {\n    float atree = abs(atan(treeUV.x*85.-91.5,3.-treeUV.y*21.+4.));\n    atree +=rand(treeUV.xy*vec2(0.001,1.))*atree;\n    tree += clamp(atree, 0.,1.)*0.34;\n  }\n  tree = smoothstep(0.6,1.,tree);\n\n  vec3 painting = tree*ground*(clouds + rain)+clamp(rain*(strength-0.1),0.,1.);\n  \n  float r=1.-length(max(abs(v_uv0.xy*2.-1.)-.5,0.)); \n  painting*=r;\n  \n  gl_FragColor = vec4(painting, 1.);\n}\n"
      }
    }
  ],
  "subMetas": {}
}