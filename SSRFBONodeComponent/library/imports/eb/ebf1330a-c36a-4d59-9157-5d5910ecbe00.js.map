{"version":3,"sources":["assets\\scripts\\ssr\\fbo\\component\\FBONodeTargetComponent.js"],"names":["ssr","require","FBO","Component","Target","cc","Class","Core","editor","CC_EDITOR","menu","executeInEditMode","properties","_target","target","type","Node","get","set","val","updateTarget","tooltip","_syncAngle","syncAngle","_syncScale","syncScale","_syncSize","syncSize","_syncAnchor","syncAnchor","_offsetX","offsetX","Float","_offsetY","offsetY","_inflateW","inflateW","_inflateH","inflateH","_initFBORenderTexture","_super","_renderTexture","initWithSize","width","height","gfx","RB_FMT_S8","_initFBOCamera","_fboCamera","cullingMask","node","groupIndex","alignWithScreen","orthoSize","updateFBO","oldPosition","position","_targetAngleOld","angle","_targetScaleXOld","scaleX","_targetScaleYOld","scaleY","_targetAnchorXOld","anchorX","_targetAnchorYOld","anchorY","_targetWidthOld","_targetHeightOld","_updateRenderTextureSize","targetTexture","v3","x","y","group","_targetGroupOld","_resetTarget","_fboSprite","fboSpriteFrame","SpriteFrame","spriteFrame","__preload","Flags","Object","onLoad"],"mappings":"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","sourceRoot":"/","sourcesContent":["/****************************************************************************\n Copyright (c) 2017-2020 SuperSuRaccoon\n \n Site: http://www.supersuraccoon-cocos2d.com\n Mail: supersuraccoon@gmail.com\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE.\n ****************************************************************************/\n \nconst ssr = require(\"../namespace/FBONamespace\");\n\n/**\n * 指定[目标纹理] 的FBO 专用类\n * @class FBONodeTargetComponent\n * @extends FBONodeComponent\n */\nssr.FBO.Component.Target = cc.Class({\n    extends: ssr.FBO.Component.Core,\n    editor: CC_EDITOR && {\n        menu: 'ssr/FBO/Target',\n        executeInEditMode: true,\n    },\n    properties: {\n    \t_target: null,\n\t\ttarget: {\n\t\t    type: cc.Node,\n\t\t    get () {\n\t\t        return this._target;\n\t\t    },\n\t\t    set (val) {\n\t\t        this._target = val;\n\t\t        this.updateTarget();\n\t\t    },\n\t\t    tooltip: \"FBO 目标节点\"\n\t\t},\n\t\t_syncAngle: false,\n\t\tsyncAngle: {\n\t\t\tget () {\n\t\t\t\treturn this._syncAngle;\n\t\t\t},\n\t\t\tset (val) {\n\t\t\t\tthis._syncAngle = val;\n\t\t\t},\n\t\t\ttooltip: \"是否需要动态监测目标旋转角度\"\n\t\t},\n\t\t_syncScale: false,\n\t\tsyncScale: {\n\t\t\tget () {\n\t\t\t\treturn this._syncScale;\n\t\t\t},\n\t\t\tset (val) {\n\t\t\t\tthis._syncScale = val;\n\t\t\t},\n\t\t\ttooltip: \"是否需要动态监测目标缩放大小\"\n\t\t},\n\t\t_syncSize: false,\n\t\tsyncSize: {\n\t\t\tget () {\n\t\t\t\treturn this._syncSize;\n\t\t\t},\n\t\t\tset (val) {\n\t\t\t\tthis._syncSize = val;\n\t\t\t},\n\t\t\ttooltip: \"是否需要动态监测目标大小\"\n\t\t},\n\t\t_syncAnchor: false,\n\t\tsyncAnchor: {\n\t\t\tget () {\n\t\t\t\treturn this._syncAnchor;\n\t\t\t},\n\t\t\tset (val) {\n\t\t\t\tthis._syncAnchor = val;\n\t\t\t},\n\t\t\ttooltip: \"是否需要动态监测目标锚点\"\n\t\t},\n\t\t_offsetX: 0,\n\t\toffsetX: {\n\t\t\ttype: cc.Float,\n\t\t\tget () {\n\t\t\t\treturn this._offsetX;\n\t\t\t},\n\t\t\tset (val) {\n\t\t\t\tthis._offsetX = val;\n\t\t        this.updateTarget();\n\t\t\t},\n\t\t\ttooltip: \"FBO 渲染区域 X轴方向偏移量\"\n\t\t},\n\t\t_offsetY: 0,\n\t\toffsetY: {\n\t\t\ttype: cc.Float,\n\t\t\tget () {\n\t\t\t\treturn this._offsetY;\n\t\t\t},\n\t\t\tset (val) {\n\t\t\t\tthis._offsetY = val;\n\t\t        this.updateTarget();\n\t\t\t}\n\t\t},\n\t\t_inflateW: 0,\n\t\tinflateW: {\n\t\t\ttype: cc.Float,\n\t\t\tget () {\n\t\t\t\treturn this._inflateW;\n\t\t\t},\n\t\t\tset (val) {\n\t\t\t\tthis._inflateW = val;\n\t\t        this.updateTarget();\n\t\t\t},\n\t\t\ttooltip: \"FBO 渲染区域 宽度扩展范围\"\n\t\t},\n\t\t_inflateH: 0,\n\t\tinflateH: {\n\t\t\ttype: cc.Float,\n\t\t\tget () {\n\t\t\t\treturn this._inflateH;\n\t\t\t},\n\t\t\tset (val) {\n\t\t\t\tthis._inflateH = val;\n\t\t        this.updateTarget();\n\t\t\t},\n\t\t\ttooltip: \"FBO 渲染区域 高度扩展范围\"\n\t\t}\n    },\n    /**\n     * 重写初始化 RenderTexture 对象，纹理大小为目标对象尺寸\n     * @method _initFBORenderTexture\n     * @private\n     */\n    _initFBORenderTexture () {\n\t\tthis._super();\n\t\tif (this.target) {\n\t\t\tthis._renderTexture.initWithSize(this.target.width + this.inflateW, this.target.height + this.inflateH, cc.gfx.RB_FMT_S8);\t\n\t\t}\n\t},\n\t/**\n     * 重写初始化 FBO 专用 cc.Camera , 设置 cullingMask，开启自定义大小模式\n     * @method _initFBOCamera\n     * @private\n     */\n\t_initFBOCamera () {\n\t\tthis._super();\n\t\tthis._fboCamera.cullingMask = 0x00000000;\n        this._fboCamera.cullingMask |= ~(1 << this.node.groupIndex);\n\t\tthis._fboCamera.alignWithScreen = false;\n\t\tif (this.target) {\n\t\t\tthis._fboCamera.orthoSize = (this.target.height + this.inflateH) / 2;\n\t\t}\n\t},\n\t/**\n     * 重写update 生命周期函数，渲染前后更新节点的坐标\n     * @method update\n     */\n\tupdateFBO () {\n\t\tif (!this.target) {\n\t\t\treturn;\n\t\t}\n\t\tlet oldPosition = this.node.position;\n\t\tif (this.syncAngle && this._targetAngleOld != this.target.angle) {\n\t\t\tthis._targetAngleOld = this.target.angle;\n\t\t\tthis.node.angle = this.target.angle = 0;\n\t\t}\n\t\tif (this.syncScale) {\n\t\t\tif (this._targetScaleXOld != this.target.scaleX) {\n\t\t\t\tthis._targetScaleXOld = this.target.scaleX;\n\t\t\t}\n\t\t\tif (this._targetScaleYOld != this.target.scaleY) {\n\t\t\t\tthis._targetScaleYOld = this.target.scaleY;\n\t\t\t}\n\t\t\tthis.node.scaleX = this.target.scaleX = 1;\n\t\t\tthis.node.scaleY = this.target.scaleY = 1;\n\t\t}\n\t\tif (this.syncAnchor) {\n\t\t\tif (this._targetAnchorXOld != this.target.anchorX) {\n\t\t\t\tthis._targetAnchorXOld = this.target.anchorX;\n\t\t\t}\n\t\t\tif (this._targetAnchorYOld != this.target.anchorY) {\n\t\t\t\tthis._targetAnchorYOld = this.target.anchorY;\n\t\t\t}\n\t\t\tthis.node.anchorX = this.target.anchorX = 0.5;\n\t\t\tthis.node.anchorY = this.target.anchorY = 0.5;\n\t\t}\n\t\tif (this.syncSize) {\n\t\t\tif (this._targetWidthOld != this.target.width ||\n\t\t\t\tthis._targetHeightOld != this.target.height) {\n\t\t\t\tthis._targetWidthOld = this.target.width;\n\t\t\t\tthis._targetHeightOld = this.target.height;\n\t\t\t\tthis.node.width = this.target.width + this.inflateW;\n\t\t    \tthis.node.height = this.target.height + this.inflateH;\n\t\t    \tthis._updateRenderTextureSize(this.target.width + this.inflateW, this.target.height + this.inflateH);\n\t\t    \tif (this._fboCamera) {\n\t\t    \t\tthis._fboCamera.targetTexture = this._renderTexture;\n\t\t        \tthis._fboCamera.orthoSize = (this.target.height + this.inflateH) / 2;\n\t\t    \t}\n\t\t\t}\n\t\t}\n\t\tthis.node.position = cc.v3(this.target.position.x - this.offsetX, this.target.position.y - this.offsetY, 1);\n\t\tthis.target.group = this.group;\n\t\tthis._super();\n\t\tthis.target.group = this._targetGroupOld;\n\t\tif (this.syncAngle) {\n\t\t\tthis.node.angle = this.target.angle = this._targetAngleOld;\n\t\t}\n\t\tif (this.syncAnchor) {\n\t\t\tthis.node.anchorX = this.target.anchorX = this._targetAnchorXOld;\n\t\t\tthis.node.anchorY = this.target.anchorY = this._targetAnchorYOld;\n\t\t\t// if (this.flipY) {\n\t\t\t// \tthis.node.anchorY = 1 - this.node.anchorY;\n\t\t\t// }\n\t\t}\n\t\tif (this.syncScale) {\n\t\t\tthis.node.scaleX = this.target.scaleX = this._targetScaleXOld;\n\t\t\tthis.node.scaleY = this.target.scaleY = this._targetScaleYOld;\t\n\t\t\t// this.node.scaleY *= (this.flipY ? -1 : 1);\n\t\t}\n\t\tthis.node.position = cc.v3(oldPosition.x, oldPosition.y, 1);\n\t},\n\t/**\n     * _resetTarget 函数，重置目标\n     * @method _resetTarget\n     */\n\t_resetTarget () {\n\t\tthis.node.group = \"default\";\n\t\tthis.node.width = 100;\n    \tthis.node.height = 100;\n    \tif (this._renderTexture) {\n        \tthis._renderTexture.initWithSize(this.node.width, this.node.height, cc.gfx.RB_FMT_S8);\n        }\n        if (this._fboCamera) {\n        \tthis._fboCamera.targetTexture = this._renderTexture;\n        \tthis._fboCamera.orthoSize = (this.target.height + this.inflateH) / 2;\n        }\n        if (this._fboSprite) {\n        \tvar fboSpriteFrame = new cc.SpriteFrame();\n        \tthis._fboSprite.spriteFrame = fboSpriteFrame;\n        }\n\t},\n\t/**\n     * updateTarget 函数，更新当前 FBO 的对象\n     * @param {cc.Node} target\n     * @method updateTarget\n     */\n\tupdateTarget () {\n\t\tif (!this.target) {\n\t\t\tthis._resetTarget();\n        \treturn;\t\n\t\t}\n        this.node.width = this.target.width + this.inflateW;\n    \tthis.node.height = this.target.height + this.inflateH;\n        if (this._renderTexture) {\n        \tthis._renderTexture.initWithSize(this.target.width + this.inflateW, this.target.height + this.inflateH, cc.gfx.RB_FMT_S8);\t\n        }\n        if (this._fboCamera) {\n        \tthis._fboCamera.targetTexture = this._renderTexture;\n        \tthis._fboCamera.orthoSize = (this.target.height + this.inflateH) / 2;\n        }\n        //\n        this._targetGroupOld = this.target.group;\n    \tthis._targetAngleOld = 0;\n\t\tthis._targetScaleXOld = 0;\n\t\tthis._targetScaleYOld = 0;\n\t\tthis._targetWidthOld = 0;\n\t\tthis._targetHeightOld = 0;\n\t\tthis._targetAnchorXOld = 0;\n\t\tthis._targetAnchorYOld = 0;\n    },\n\t/**\n     * __preload 函数，编辑器用，锁定部分属性\n     * @method __preload\n     */\n\t__preload () {\n        if (CC_EDITOR) {\n            var Flags = cc.Object.Flags;\n            // this._objFlags |= (Flags.IsAnchorLocked | Flags.IsSizeLocked | Flags.IsRotationLocked | Flags.IsScaleLocked);\n\t\t}\n    },\n\tonLoad () {\n\t\tthis._super();\n\t\t//\n\t\tthis.node.group = \"default\";\n\t\tthis.updateTarget();\n\t}\n});\n"]}