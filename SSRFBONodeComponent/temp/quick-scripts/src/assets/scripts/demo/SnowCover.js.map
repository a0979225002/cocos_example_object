{"version":3,"sources":["assets\\scripts\\demo\\SnowCover.js"],"names":["cc","Class","Component","properties","fbo","Node","fbo2","fbo3","spine","dragon","snow","ParticleSystem","onLoad","debug","setDisplayStats","time","melting","start","tween","by","position","v2","update","dt","edge","getComponent","Sprite","getMaterial","getProperty","setProperty","sp","Skeleton","dragonBones","ArmatureDisplay","stopSystem"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        fbo: cc.Node,\n        fbo2: cc.Node,\n        fbo3: cc.Node,\n        spine: cc.Node,\n        dragon: cc.Node,\n        snow: cc.ParticleSystem\n    },\n    onLoad () {\n        cc.debug.setDisplayStats(true);\n        this.time = 0;\n        this.melting = false;\n    },\n\n    start () {\n        cc.tween(this.spine)\n            .by(25, { position: cc.v2(900, 0) })\n            .start();\n\n        cc.tween(this.dragon)\n            .by(30, { position: cc.v2(1100, 0) })\n            .start();\n    },\n    update (dt) {\n        if (this.melting) {\n            let edge = this.fbo.getComponent(cc.Sprite).getMaterial(0).getProperty(\"Edge\");\n            if (edge >= 0.0) {\n                edge -= dt / 30;\n                this.fbo.getComponent(cc.Sprite).getMaterial(0).setProperty(\"Edge\", edge);\n                this.fbo2.getComponent(cc.Sprite).getMaterial(0).setProperty(\"Edge\", edge);\n                this.fbo3.getComponent(cc.Sprite).getMaterial(0).setProperty(\"Edge\", edge);\n                this.spine.getComponent(sp.Skeleton).getMaterial(0).setProperty(\"Edge\", edge);\n                this.dragon.getComponent(dragonBones.ArmatureDisplay).getMaterial(0).setProperty(\"Edge\", edge);\n            }\n        }\n        else {\n            this.time += dt / 40;\n            if (this.fbo.getComponent(cc.Sprite).getMaterial(0).getProperty(\"Edge\") < 0.35) {\n                this.fbo.getComponent(cc.Sprite).getMaterial(0).setProperty(\"Edge\", this.time);\n                this.fbo2.getComponent(cc.Sprite).getMaterial(0).setProperty(\"Edge\", this.time);\n                this.fbo3.getComponent(cc.Sprite).getMaterial(0).setProperty(\"Edge\", this.time);\n                this.spine.getComponent(sp.Skeleton).getMaterial(0).setProperty(\"Edge\", this.time);\n                this.dragon.getComponent(dragonBones.ArmatureDisplay).getMaterial(0).setProperty(\"Edge\", this.time);\n            }\n            else {\n                this.melting = true;\n                this.time = 0;\n                this.snow.stopSystem();\n            }\n        }\n    },\n});\n"]}