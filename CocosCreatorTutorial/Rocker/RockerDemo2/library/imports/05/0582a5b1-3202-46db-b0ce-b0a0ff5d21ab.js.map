{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\rocker.js"],"names":["cc","Class","extends","Component","properties","bg","Node","rocker","onLoad","start","angle","radian","node","on","mouseDown","mouseMove","mouseEnd","update","dt","setPosition","v2","event","pos","convertToNodeSpaceAR","getLocation","getDistance","p","getRadian","y","Math","sin","x","cos","pos1","pos2","sqrt","point","atan2","getAngle","PI"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,YAAIL,GAAGM,IADC;AAERC,gBAAQP,GAAGM;AAFH,KAHP;;AAQL;AACAE,YAAQ,kBAAY;AAChB,aAAKC,KAAL,GAAa,KAAb;AACA,aAAKC,KAAL,GAAa,CAAC,CAAd;AACA,aAAKC,MAAL,GAAc,CAAC,CAAf;AACA,aAAKC,IAAL,CAAUC,EAAV,CAAa,YAAb,EAA2B,KAAKC,SAAhC,EAA2C,IAA3C;AACA,aAAKF,IAAL,CAAUC,EAAV,CAAa,WAAb,EAA0B,KAAKE,SAA/B,EAA0C,IAA1C;AACA,aAAKH,IAAL,CAAUC,EAAV,CAAa,aAAb,EAA4B,KAAKG,QAAjC,EAA2C,IAA3C;AACA,aAAKJ,IAAL,CAAUC,EAAV,CAAa,UAAb,EAAyB,KAAKG,QAA9B,EAAwC,IAAxC;AACH,KAjBI;;AAmBL;AACAC,YAAQ,gBAAUC,EAAV,EAAc,CAErB,CAtBI;;AAwBLF,YAxBK,sBAwBM;AACP,aAAKT,MAAL,CAAYY,WAAZ,CAAwBnB,GAAGoB,EAAH,CAAM,CAAN,EAAS,CAAT,CAAxB;AACH,KA1BI;;;AA4BLN,eAAW,mBAAUO,KAAV,EAAiB;AACxB;AACH,KA9BI;;AAgCLN,eAAW,mBAAUM,KAAV,EAAiB;AACxB,YAAIC,MAAM,KAAKjB,EAAL,CAAQkB,oBAAR,CAA6BF,MAAMG,WAAN,EAA7B,CAAV;AACA,YAAI,KAAKC,WAAL,CAAiBzB,GAAG0B,CAAH,CAAK,CAAL,EAAQ,CAAR,CAAjB,EAA6BJ,GAA7B,KAAqC,EAAzC,EAA6C;AACzC,iBAAKf,MAAL,CAAYY,WAAZ,CAAwBG,GAAxB;AACH,SAFD,MAEO;AACH,gBAAIX,SAAS,KAAKgB,SAAL,CAAeL,GAAf,CAAb;AACAA,gBAAIM,CAAJ,GAAQC,KAAKC,GAAL,CAASnB,MAAT,IAAmB,EAA3B;AACAW,gBAAIS,CAAJ,GAAQF,KAAKG,GAAL,CAASrB,MAAT,IAAmB,EAA3B;AACA,iBAAKJ,MAAL,CAAYY,WAAZ,CAAwBG,GAAxB;AACH;AACJ,KA1CI;;AA4CLG,iBAAa,qBAAUQ,IAAV,EAAgBC,IAAhB,EAAsB;AAC/B,YAAIH,IAAKE,KAAKF,CAAL,GAASG,KAAKH,CAAvB;AACA,YAAIH,IAAKK,KAAKL,CAAL,GAASM,KAAKN,CAAvB;AACA,eAAOC,KAAKM,IAAL,CAAWJ,IAAIA,CAAJ,GAAQH,IAAIA,CAAvB,CAAP;AACH,KAhDI;;AAkDLD,eAAW,mBAAUS,KAAV,EAAiB;AACxB,aAAKzB,MAAL,GAAckB,KAAKQ,KAAL,CAAWD,MAAMR,CAAjB,EAAoBQ,MAAML,CAA1B,CAAd;AACA,eAAO,KAAKpB,MAAZ;AACH,KArDI;;AAuDL2B,cAAU,kBAAUF,KAAV,EAAiB;AACvB,aAAK1B,KAAL,GAAamB,KAAKQ,KAAL,CAAWD,MAAMR,CAAjB,EAAoBQ,MAAML,CAA1B,KAAgC,MAAMF,KAAKU,EAA3C,CAAb;AACA,eAAO,KAAK7B,KAAZ;AACH;AA1DI,CAAT","file":"rocker.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bg: cc.Node,\n        rocker: cc.Node\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.start = false;\n        this.angle = -1;\n        this.radian = -1;\n        this.node.on(\"touchstart\", this.mouseDown, this);\n        this.node.on(\"touchmove\", this.mouseMove, this);\n        this.node.on('touchcancel', this.mouseEnd, this);\n        this.node.on('touchend', this.mouseEnd, this);\n    },\n\n    // called every frame\n    update: function (dt) {\n\n    },\n\n    mouseEnd() {\n        this.rocker.setPosition(cc.v2(0, 0));\n    },\n\n    mouseDown: function (event) {\n        // this.startPos = this.node.convertToNodeSpaceAR(event.getLocation());\n    },\n\n    mouseMove: function (event) {\n        var pos = this.bg.convertToNodeSpaceAR(event.getLocation());\n        if (this.getDistance(cc.p(0, 0), pos) <= 50) {\n            this.rocker.setPosition(pos);\n        } else {\n            var radian = this.getRadian(pos);\n            pos.y = Math.sin(radian) * 50;\n            pos.x = Math.cos(radian) * 50;\n            this.rocker.setPosition(pos);\n        }\n    },\n\n    getDistance: function (pos1, pos2) {\n        var x = (pos1.x - pos2.x);\n        var y = (pos1.y - pos2.y);\n        return Math.sqrt((x * x + y * y));\n    },\n\n    getRadian: function (point) {\n        this.radian = Math.atan2(point.y, point.x);\n        return this.radian;\n    },\n\n    getAngle: function (point) {\n        this.angle = Math.atan2(point.y, point.x) * (180 / Math.PI);\n        return this.angle;\n    }\n});\n"]}