{"version":3,"sources":["rocker1.js"],"names":["cc","Class","extends","Component","properties","bg","Node","rocker","onLoad","start","angle","radian","node","on","mouseDown","mouseMove","hua","getChildByName","update","dt","event","startPos","convertToNodeSpaceAR","getLocation","setPosition","pos","getDistance","p","x","y","getRadian","Math","sin","cos","graphics","getComponent","Graphics","circle","fillColor","Color","RED","a","stroke","fill","pos1","pos2","sqrt","point","atan2","getAngle","PI","console","log"],"mappings":"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","file":"rocker1.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bg: cc.Node,\n        rocker: cc.Node\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.start = false;\n        this.angle = -1;\n        this.radian = -1;\n        this.node.on(\"mousedown\", this.mouseDown, this);\n        this.node.on(\"mousemove\", this.mouseMove, this);\n        this.hua = this.node.getChildByName(\"hua\");\n    },\n\n    // called every frame\n    update: function (dt) {\n\n    },\n    mouseDown: function (event) {\n        this.start = true;\n        this.startPos = this.node.convertToNodeSpaceAR(event.getLocation());\n        this.bg.setPosition(this.startPos);\n\n\n    },\n    mouseMove: function (event) {\n\n        if (this.start) {\n            var pos = this.bg.convertToNodeSpaceAR(event.getLocation());\n            if (this.getDistance(cc.p(0, 0), pos) <= 50) {\n                pos.x += this.startPos.x;\n                pos.y += this.startPos.y;\n                this.rocker.setPosition(pos);\n            } else {\n                var radian = this.getRadian(pos);\n                pos.y = this.startPos.y + Math.sin(radian) * 50;\n                pos.x = this.startPos.x + Math.cos(radian) * 50;\n                this.rocker.setPosition(pos);\n                var graphics = this.hua.getComponent(cc.Graphics);\n                graphics.circle(pos.x, pos.y, 3);\n                //添加颜色及透明度  \n                let fillColor = cc.Color.RED;//声明一个颜色变量  \n                fillColor.a = 200;//添加透明度  \n                graphics.fillColor = fillColor;//填充  \n\n                graphics.stroke();\n                graphics.fill();\n            }\n        }\n    },\n    getDistance: function (pos1, pos2) {\n        var x = (pos1.x - pos2.x);\n        var y = (pos1.y - pos2.y);\n        return Math.sqrt((x * x + y * y));\n    },\n    getRadian: function (point) {\n        this.radian = Math.atan2(point.y, point.x);\n        // console.log('this', this.radian);\n        this.getAngle(point);\n        return this.radian;\n    },\n    getAngle: function (point) {\n        this.angle = Math.atan2(point.y, point.x) * (180 / Math.PI);\n        console.log('this', this.angle);\n        return this.angle;\n    }\n});\n"]}