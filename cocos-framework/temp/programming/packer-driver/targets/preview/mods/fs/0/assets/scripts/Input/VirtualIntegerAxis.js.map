{"version":3,"sources":["file:///D:/My_Game/%E5%88%A5%E4%BA%BA%E5%AF%AB%E7%9A%84%E5%8F%83%E8%80%83%E7%94%A8/cocos-framework/assets/scripts/Input/VirtualIntegerAxis.ts"],"names":["KeyboardKeys","VirtualInput","VirtualInputNode","VirtualIntegerAxis","nodes","concat","update","i","length","addKeyboardKeys","overlapBehavior","negative","positive","push","val","value","Math","sign","VirtualAxisNode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,Y,iBAAAA,Y;;AACiBC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,gB,iBAAAA,gB;;;;;;;oCAE3BC,kB;;;AAaT,sCAAwC;AAAA;;AACpC;;AADoC,kEAZN,EAYM;;AAAA,4CAAzBC,KAAyB;AAAzBA,YAAAA,KAAyB;AAAA;;AAEpC,gBAAKA,KAAL,CAAWC,MAAX,CAAkBD,KAAlB;;AAFoC;AAGvC;;;;eAEME,M,GAAP,kBAAgB;AACZ,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKH,KAAL,CAAWI,MAA/B,EAAuCD,CAAC,EAAxC;AACI,iBAAKH,KAAL,CAAWG,CAAX,EAAcD,MAAd;AADJ;AAEH;AAED;AACJ;AACA;AACA;AACA;AACA;;;eACWG,e,GAAP,yBAAuBC,eAAvB,EAAyDC,QAAzD,EAAyEC,QAAzE,EAAwF;AACpF,eAAKR,KAAL,CAAWS,IAAX,CAAgB;AAAA;AAAA,4CAAiBH,eAAjB,EAAkCC,QAAlC,EAA4CC,QAA5C,CAAhB;AACA,iBAAO,IAAP;AACH,S;;;;eA7BD,eAAkB;AACd,iBAAK,IAAIL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKH,KAAL,CAAWI,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxC,kBAAIO,GAAG,GAAG,KAAKV,KAAL,CAAWG,CAAX,EAAcQ,KAAxB;AACA,kBAAID,GAAG,IAAI,CAAX,EACI,OAAOE,IAAI,CAACC,IAAL,CAAUH,GAAV,CAAP;AACP;;AAED,mBAAO,CAAP;AACH;;;;;;;;iCAwBiBI,e","sourcesContent":["import { Keys } from \"./Keys\";\r\nimport { KeyboardKeys } from \"./VirtualAxis\";\r\nimport { OverlapBehavior, VirtualInput, VirtualInputNode } from \"./VirtualInput\";\r\n\r\nexport class VirtualIntegerAxis extends VirtualInput {\r\n    public nodes: VirtualAxisNode[] = [];\r\n\r\n    public get value(){\r\n        for (let i = 0; i < this.nodes.length; i ++){\r\n            let val = this.nodes[i].value;\r\n            if (val != 0)\r\n                return Math.sign(val);\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    constructor(...nodes: VirtualAxisNode[]){\r\n        super();\r\n        this.nodes.concat(nodes);\r\n    }\r\n\r\n    public update() {\r\n        for (let i = 0; i < this.nodes.length; i ++)\r\n            this.nodes[i].update();\r\n    }\r\n\r\n    /**\r\n     * 添加键盘键来模拟这个虚拟输入的左/右或上/下\r\n     * @param overlapBehavior\r\n     * @param negative\r\n     * @param positive\r\n     */\r\n    public addKeyboardKeys(overlapBehavior: OverlapBehavior, negative: Keys, positive: Keys){\r\n        this.nodes.push(new KeyboardKeys(overlapBehavior, negative, positive));\r\n        return this;\r\n    }\r\n}\r\n\r\nexport abstract class VirtualAxisNode extends VirtualInputNode {\r\n    public abstract value: number;\r\n}"]}