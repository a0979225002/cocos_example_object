{"version":3,"sources":["file:///D:/My_Game/%E5%88%A5%E4%BA%BA%E5%AF%AB%E7%9A%84%E5%8F%83%E8%80%83%E7%94%A8/cocos-framework/assets/scripts/Main.ts"],"names":["_decorator","Component","Button","find","instantiate","Label","Prefab","resources","Toggle","Batcher","Input","KeyboardUtils","BasicScene","sampleList","ccclass","property","Main","start","es","Core","debugRenderEndabled","create","Graphics","instance","init","initialize","scene","setupSceneSelector","checkBox","getComponent","isChecked","node","on","toggle","layout","forEach","value","key","load","err","data","buttonNode","addChild","label","getChildByName","string","EventType","CLICK","update","deltaTime","emitter","emit","CoreEvents","frameUpdated"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, Button, find, instantiate, Label, Prefab, resources, Toggle, ToggleComponent } from 'cc';\r\nimport { PolygonSprite } from './components/PolygonSprite';\r\nimport { Batcher } from './graphics/Batcher';\r\nimport { Input } from './Input/Input';\r\nimport { KeyboardUtils } from './Input/KeyboardUtils';\r\nimport { BasicScene } from './scenes/BasicScene';\r\nimport { RenderScene, sampleList, SceneEmitType } from './scenes/RenderScene';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Main')\r\nexport class Main extends Component {\r\n    start () {\r\n        es.Core.debugRenderEndabled = true;\r\n        es.Core.create(true);\r\n        \r\n        es.Graphics.instance = new es.Graphics(new Batcher());\r\n        KeyboardUtils.init();\r\n        Input.initialize();\r\n\r\n        es.Core.scene = new BasicScene();\r\n\r\n        this.setupSceneSelector();\r\n    }\r\n\r\n    setupSceneSelector() {\r\n        const checkBox = find(\"Canvas_UI/Layout/DebugRender\")?.getComponent(Toggle);\r\n        if (checkBox) {\r\n            checkBox.isChecked = es.Core.debugRenderEndabled;\r\n            checkBox.node.on('toggle', (toggle: ToggleComponent) => {\r\n                es.Core.debugRenderEndabled = toggle.isChecked;\r\n            }, this);\r\n        }\r\n\r\n        const layout = find(\"Canvas_UI/Layout\");\r\n        sampleList.forEach((value, key)=>{\r\n            resources.load('prefabs/Button', Prefab, (err, data)=>{\r\n                const buttonNode = instantiate(data);\r\n                layout?.addChild(buttonNode);\r\n\r\n                const label = buttonNode.getChildByName(\"Label\")?.getComponent(Label);\r\n                if (label) label.string = key;\r\n                buttonNode.on(Button.EventType.CLICK, ()=>{\r\n                    es.Core.scene = new value();\r\n                }, this);\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    update (deltaTime: number) {\r\n        es.Core.emitter.emit(es.CoreEvents.frameUpdated, deltaTime);\r\n\r\n        Input.update();\r\n    }\r\n}\r\n"]}