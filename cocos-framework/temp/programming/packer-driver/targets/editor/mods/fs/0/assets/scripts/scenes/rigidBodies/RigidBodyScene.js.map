{"version":3,"sources":["file:///D:/My_Game/%E5%88%A5%E4%BA%BA%E5%AF%AB%E7%9A%84%E5%8F%83%E8%80%83%E7%94%A8/cocos-framework/assets/scripts/scenes/rigidBodies/RigidBodyScene.ts"],"names":["instantiate","Prefab","resources","Sprite","SpriteRenderer","RenderScene","sampleScene","RigidBodyScene","onStart","camera","position","add","es","Vector2","load","err","data","initAfter","moonTex","friction","elasticity","createBody","addImpulse","mass","velocity","texture","rigidBody","ArcadeRigidbody","setMass","setFriction","setElasticity","setVelocity","entity","createEntity","UUID","randomUUID","sprite","getComponent","addComponent","setPosition","x","y","CircleCollider","update","Core","emitter","emit","CoreEvents","renderChanged","Time","deltaTime"],"mappings":"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","sourcesContent":["import { find, instantiate, Prefab, resources, Sprite, view } from \"cc\";\r\nimport { component_camera } from \"../../components/component_camera\";\r\nimport { SpriteRenderer } from \"../../components/SpriteRenderer\";\r\nimport { RenderScene, sampleScene } from \"../RenderScene\";\r\n\r\n@sampleScene(\"RigidBody\")\r\nexport class RigidBodyScene extends RenderScene {\r\n    public onStart() {\r\n        // let camera = this.findEntity('camera')?.getComponent(component_camera);\r\n        // if (camera) {\r\n        //     camera.zoom = 2;\r\n        // }\r\n        (this.camera as component_camera).position.add(new es.Vector2(200, 0))\r\n\r\n        resources.load('prefabs/moon', Prefab, (err, data)=>{\r\n            this.initAfter(data);\r\n        });\r\n    }\r\n\r\n    private initAfter(moonTex: Prefab) {\r\n        let friction = 0.3;\r\n        let elasticity = 0.4;\r\n        this.createBody(new es.Vector2(50, 200), 50, friction, elasticity, new es.Vector2(150, 0), moonTex)\r\n            .addImpulse(new es.Vector2(10, 0));\r\n        this.createBody(new es.Vector2(800, 260), 5, friction, elasticity, new es.Vector2(-180, 0), moonTex);\r\n\r\n        this.createBody(new es.Vector2(50, 400), 50, friction, elasticity, new es.Vector2(150, -40), moonTex);\r\n        this.createBody(new es.Vector2(800, 460), 5, friction, elasticity, new es.Vector2(-180, -40), moonTex);\r\n\r\n        this.createBody(new es.Vector2(400, 0), 60, friction, elasticity, new es.Vector2(10, 90), moonTex);\r\n        this.createBody(new es.Vector2(500, 400), 4, friction, elasticity, new es.Vector2(0, -270), moonTex);\r\n\r\n        this.createBody(new es.Vector2(-200, 250), 0, friction, elasticity, new es.Vector2(0, -270), moonTex);\r\n\r\n        this.createBody(new es.Vector2(200, 700), 15, friction, elasticity, new es.Vector2(150, -150), moonTex);\r\n        this.createBody(new es.Vector2(800, 760), 15, friction, elasticity, new es.Vector2(-180, -150), moonTex);\r\n        this.createBody(new es.Vector2(1200, 700), 1, friction, elasticity, new es.Vector2(0, 0), moonTex)\r\n            .addImpulse(new es.Vector2(-5, -20));\r\n\r\n        this.createBody(new es.Vector2(100, 100), 1, friction, elasticity, new es.Vector2(100, 90), moonTex)\r\n            .addImpulse(new es.Vector2(40, -10));\r\n        this.createBody(new es.Vector2(100, 700), 100, friction, elasticity, new es.Vector2(200, -270), moonTex);\r\n    }\r\n\r\n    private createBody(position: es.Vector2, mass: number, friction: number, elasticity: number, velocity: es.Vector2, texture: Prefab) {\r\n        let rigidBody = new es.ArcadeRigidbody()\r\n            .setMass(mass)\r\n            .setFriction(friction)\r\n            .setElasticity(elasticity)\r\n            .setVelocity(velocity);\r\n\r\n        let entity = this.createEntity(es.UUID.randomUUID());\r\n        let sprite = instantiate(texture).getComponent(Sprite)\r\n        if (sprite) entity.addComponent(new SpriteRenderer(sprite));\r\n        entity.setPosition(position.x, position.y);\r\n        entity.addComponent(rigidBody);\r\n        entity.addComponent(new es.CircleCollider());\r\n\r\n        return rigidBody;\r\n    }\r\n\r\n    update() {\r\n        super.update();\r\n\r\n        es.Core.emitter.emit(es.CoreEvents.renderChanged, es.Time.deltaTime);\r\n    }\r\n}"]}